############################
# Russian Civil War Events #
############################

add_namespace = ww1_rcw

#Provisional Siberian Government + czech uprising
country_event = {
	id = ww1_rcw.1
	title = ww1_rcw.1.t
	desc = ww1_rcw.1.d
	picture = GFX_report_event_soldiers_in_france
	fire_only_once = yes
	is_triggered_only = no
	hidden = no
	trigger = {
		tag = RUS
		NOT = {
			has_war_with = GER
		}
		has_war_with = SOV
	}
	immediate = {
		hidden_effect = {
			set_country_flag = czechoslovak_legion
			set_state_controller = 572
			division_template = {
				name = "Czechoslovak Legion"
				division_names_group = RUS_INF_01
				is_locked = yes
				regiments = {
					infantry = {
						x = 0
						y = 0
					}
					infantry = {
						x = 0
						y = 1
					}
					infantry = {
						x = 0
						y = 2
					}
					infantry = {
						x = 1
						y = 0
					}
					infantry = {
						x = 1
						y = 1
					}
					infantry = {
						x = 1
						y = 2
					}
				}
				support = {
					engineer = {
						x = 0
						y = 0
					}
				}
			}
			572 = {
				create_unit = {
					division = "name = \"10. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = RUS
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"11. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = RUS
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"12. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = RUS
					allow_spawning_on_enemy_provs = yes
				}
			}
			568 = {
				create_unit = {
					division = "name = \"7. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = SPG
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"8. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = SPG
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"9. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 0.4"
					owner = SPG
					allow_spawning_on_enemy_provs = yes
				}
			}
			every_controlled_state = {
				limit = {
					OR = {
						state = 408 
						state =	409
						state = 655 
						state = 560 
						state = 561 
						state = 574 
						state = 563 
						state = 564 
						state = 637
						state = 644
						state = 566 
						state = 516
						state = 576
						state = 568
						state = 569
						state = 570
						state = 578
						state = 577
						state = 40
					}
				}
				SPG = {
					add_state_core = PREV
					transfer_state = PREV 
				}
				RUS = {
					remove_state_core = PREV
				}
			}
			random_owned_state = {
				limit = {
					OR = {
						state = 408
						state = 566
					}
				}
				prioritize = {
					408
				}
				SPG = { set_capital = { state = PREV } }
			}
			SPG = {
				set_global_flag = russian_revolution
				load_oob = "SPG_1918"
				declare_war_on = {
				target = SOV
				type = annex_everything
				}
				set_politics = {
					ruling_party = democratic
					
					set_popularities = {
						fascism = 27
						communism = 3
						democratic = 50
						neutrality = 20
					}
				}
				country_event = {
					id = ww1_rcw.2
					days = 30
				}
				add_timed_idea = {
					idea = SRA_siberia_directiveSRA_russian_civil_war
					days = 100
				}
				add_ideas = SRA_russian_civil_war
			}
			RUS = {
				add_to_faction = SPG
				set_cosmetic_tag = RUS_provisional_siberian_government
				set_capital = { state = 571 }
				country_event = {
					id = ww1_rcw.4
					days = 15
				}
			}
		}
	}
	option = {
		name = ww1_rcw.1.a
	}
}

#Vladivostok invasion
country_event = {
	id = ww1_rcw.2
	title = ww1_rcw.2.t
	desc = ww1_rcw.2.d
	picture = GFX_report_event_soldiers_in_france
	fire_only_once = yes
	is_triggered_only = yes
	hidden = no
	immediate = {
		hidden_effect = {
			408 = {
				SPG = {
					transfer_state = PREV 
				}
				create_unit = {
					division = "division_template = \"White Guard Corps\"	start_experience_factor = 0.4	start_equipment_factor = 1"
					owner = SPG
					allow_spawning_on_enemy_provs = yes
					count = 6
					country_score = {
						base = 100
					}
				}
			}
			CER = {
				give_military_access = SPG
			}
		}
	}
	option = {
		name = ww1_rcw.2.a
	}
}

#siberian army 5th corps
country_event = {
	id = ww1_rcw.3
	title = ww1_rcw.3.t
	desc = ww1_rcw.3.d
	picture = GFX_report_event_soldiers_in_france
	fire_only_once = yes
	is_triggered_only = yes
	hidden = no
	immediate = {
		hidden_effect = {
            SPG = {
                set_province_controller = 4677
                set_province_controller = 7725
                set_province_controller = 12622
                set_province_controller = 4719
            }
			563 = {
				create_unit = {
					division = "division_template = \"White Guard Corps\"	start_experience_factor = 0.4	start_equipment_factor = 1"
					owner = SPG
                    prioritize_location = 4677
					allow_spawning_on_enemy_provs = no
					count = 2
					country_score = {
						base = 100
					}
				}
                create_unit = {
					division = "division_template = \"White Guard Corps\"	start_experience_factor = 0.4	start_equipment_factor = 1"
					owner = SPG
                    prioritize_location = 7725
					allow_spawning_on_enemy_provs = no
					count = 2
					country_score = {
						base = 100
					}
				}
                create_unit = {
					division = "division_template = \"White Guard Corps\"	start_experience_factor = 0.4	start_equipment_factor = 1"
					owner = SPG
                    prioritize_location = 12622
					allow_spawning_on_enemy_provs = no
					count = 1
					country_score = {
						base = 100
					}
				}
			}
			CER = {
				give_military_access = SPG
				give_military_access = RUS
			}
		}
	}
	option = {
		name = ww1_rcw.3.a
	}
}
#Czechs Ambush Omsk
country_event = {
	id = ww1_rcw.4
	title = ww1_rcw.4.t
	desc = ww1_rcw.4.d
	picture = GFX_report_event_soldiers_in_france
	fire_only_once = yes
	is_triggered_only = yes
	hidden = no
	immediate = {
		hidden_effect = {
			set_country_flag = czechoslovak_legion
			set_state_controller = 571
			571 = {
				create_unit = {
					division = "name = \"4. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = RUS
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"5. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = RUS
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"6. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = RUS
					allow_spawning_on_enemy_provs = yes
				}
			}
			RUS = {
				country_event = {
					id = ww1_rcw.5
					days = 25
				}
				country_event = {
					id = ww1_rcw.6
					days = 35
				}
			}
		}
	}
	option = {
		name = ww1_rcw.4.a
	}
}
#Czechs Capture Penza and Samara
country_event = {
	id = ww1_rcw.5
	title = ww1_rcw.5.t
	desc = ww1_rcw.5.d
	picture = GFX_report_event_soldiers_in_france
	fire_only_once = yes
	is_triggered_only = yes
	hidden = no
	immediate = {
		hidden_effect = {
			set_country_flag = czechoslovak_legion
			251 = {
				KOM = {
					add_state_core = PREV
					transfer_state = PREV 
				}
			}
			KOM = {
				load_oob = "RUS_civil_war"
				set_politics = {
					ruling_party = democratic
					set_popularities = {
						fascism = 27
						communism = 3
						democratic = 50
						neutrality = 20
					}
				}
				create_country_leader = {
				   name = RUS_volsky_vladimir
				   picture = "gfx/leaders/RUS/RUS_Volsky_vladimir.png"
				   traits = {

				   }
				   ideology = classical_liberalism
			   }
			   division_template = {
					name = "Czechoslovak Legion"
					division_names_group = RUS_INF_01
					is_locked = yes
					regiments = {
						infantry = {
							x = 0
							y = 0
						}
						infantry = {
							x = 0
							y = 1
						}
						infantry = {
							x = 0
							y = 2
						}
						infantry = {
							x = 1
							y = 0
						}
						infantry = {
							x = 1
							y = 1
						}
						infantry = {
							x = 1
							y = 2
						}
					}
					support = {
						engineer = {
							x = 0
							y = 0
						}
					}
				}
			}	
			255 = {
				create_unit = {
					division = "name = \"13. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = KOM
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"14. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = KOM
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"15. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = KOM
					allow_spawning_on_enemy_provs = yes
				}
			}
			251 = {
				create_unit = {
					division = "name = \"1. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = KOM
					prioritize_location = 11225
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"2. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = KOM
					prioritize_location = 9365
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "name = \"3. Czechoslovak Division\" division_template = \"Czechoslovak Legion\" start_experience_factor = 1"
					owner = KOM
					prioritize_location = 11256
					allow_spawning_on_enemy_provs = yes
				}
				create_unit = {
					division = "division_template = \"White Guard Corps\"	start_experience_factor = 0.6	start_equipment_factor = 1"
					owner = KOM
					allow_spawning_on_enemy_provs = yes
					prioritize_location = 11225
					count = 3
				}
			}
		}
	}
	option = {
		name = ww1_rcw.5.a
	}
}

# ALASH RELEASED
###################
country_event = {
	id = ww1_rcw.6
	title = ww1_rcw.6.t
	desc = ww1_rcw.6.d
	picture = GFX_report_event_generic_military_parade
	is_triggered_only = yes
	trigger = {
		KAZ = {
			exists = no
		}
		any_owned_state = {
			NOT = {
				state = 590
				state = 587
			}
			is_core_of = KAZ
		}
	}
	immediate = {
		hidden_effect = {
			every_state = {
				limit = {
					NOT = {
						state = 590
						state = 587
					}
					is_core_of = KAZ
					is_owned_by = RUS
				}
				KAZ = {
					transfer_state = PREV
				}
			}
			KAZ = {
				set_cosmetic_tag = KAZ_alash
				set_province_name = {
					id = 4661
					name = ALASH_PROV
				}
				hidden_effect = {
					load_oob = "KAZ_1918"
					inherit_technology = RUS
				}
			}
			if = {
				limit = {
					OR = {
						has_dlc = "Together for Victory"
						has_dlc = "Man the Guns"
					}
				}
				RUS = {
					set_autonomy = {
						target = KAZ
						autonomy_state = autonomy_dominion
					}
				}
				hidden_effect = {
					KAZ = {
						set_politics = {
							ruling_party = democratic
							elections_allowed = no 
						}	
						set_popularities = {
							fascism = 2
							communism = 29
							democratic = 33
							neutrality = 36
						}	
					}									
				}
				else = {
					RUS = {
						add_to_faction = KAZ
					}
				}
			}
			set_global_flag = alash_released
		}
	}
	option = {
		name = ww1_rcw.6.a
		effect_tooltip = {
			release = KAZ
		}
	}
	# option = {
	# 	name = ww1_rcw.5.b
	# 	KAZ = {
	# 		change_tag_from = ROOT
	# 	}
	# 	trigger = {
	# 		is_ai = no
	# 	}
	# }
}
