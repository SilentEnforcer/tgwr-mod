add_namespace = ww1_albania
#Principality of Albania proclaimed
country_event = {
	title = ww1_albania.1.t
	desc = ww1_albania.1.d
	id = ww1_albania.1
	fire_only_once = yes
	mean_time_to_happen = {
		days = 21
	}
	trigger = {
		tag = ALB
		date > 1914.2.1
		has_government = democratic
		has_global_flag = kis_firstbalkanwar_victory
		has_war = no
		NOT = {
			is_subject_of = TUR
		}
	}
	option = {
		name = ww1_albania.1.a
		set_politics = {
			ruling_party = neutrality
			elections_allowed = no
			long_name = ALB_neutrality_prince_party
			name = ALB_neutrality_prince_party
		}
		add_country_leader_role = {
			Character = ALB_vilhelm_i
			Promote_leader = yes
			Country_leader = {
				ideology=autocracy
				traits={ foreign_leader german_agent  }
				
			}
		}
		set_cosmetic_tag = ALB_principality
	}
}

#Albanian Revolt in 1910
country_event = {
	title = ww1_albania.2.t
	desc = ww1_albania.2.d
	id = ww1_albania.2
	picture = GFX_report_event_spr_civil_war_faction_defeated
	fire_only_once = yes
	mean_time_to_happen = {
		days = 10
	}
	trigger = {
		tag = TUR
		controls_state = 44
		controls_state = 803
		NOT = {
			country_exists = ALB
		}
		date > 1910.6.5
	}
	option = {
		name = ww1_albania.2.a
		add_stability = -0.05
		add_war_support = 0.05
		44 = {
			add_resistance = 5
		}
		803 = {
			add_resistance = 5
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = ww1_albania.2.b
		add_war_support = -0.15
		ALB = {
			transfer_state = 44
			transfer_state = 803
		}
		puppet = ALB
		if = {
			limit = {
				NOT = {
					has_government = communism
				}
			}
			TUR_ahmet_izzet = { set_nationality = ALB }
			hidden_effect = {
				ALB = {
					TUR_ahmet_izzet = {
						set_character_name = TUR_ahmet_izzet
						add_country_leader_role = {
							Promote_leader = yes
							Country_leader = {
								ideology = autocracy
								traits = { ottoman_prince }
							}
						}
					}
					set_cosmetic_tag = ALB_sultanate
					set_politics={
						ruling_party = neutrality
						elections_allowed = no 
						long_name = ALB_neutrality_sultan_party
						name = ALB_neutrality_sultan_party
					}	
					set_popularities = {
						democratic = 40
						neutrality = 60
					}				
				}	
			}
		}
		44 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
		803 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
		ai_chance = {
			factor = 0
		}
	}
}

#Albanian Revolt in 1911
country_event = {
	title = ww1_albania.2.t
	desc = ww1_albania.2.d
	id = ww1_albania.4
	picture = GFX_report_event_spr_civil_war_faction_defeated
	fire_only_once = yes
	mean_time_to_happen = {
		days = 10
	}
	trigger = {
		tag = TUR
		controls_state = 44
		controls_state = 803
		ALB = {
			exists = no
		}
		date > 1911.3.24
	}
	option = {
		name = ww1_albania.2.a
		add_stability = -0.05
		44 = {
			add_resistance = 5
		}
		803 = {
			add_resistance = 5
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = ww1_albania.2.b
		add_war_support = -0.15
		ALB = {
			transfer_state = 44
			transfer_state = 803
		}
		puppet = ALB
		if = {
			limit = {
				NOT = {
					has_government = communism
				}
			}
			TUR_ahmet_izzet = { set_nationality = ALB }
			hidden_effect = {
				ALB = {
					TUR_ahmet_izzet = {
						set_character_name = TUR_ahmet_izzet
						add_country_leader_role = {
							Promote_leader = yes
							Country_leader = {
								ideology = autocracy
								traits = { ottoman_prince }
							}
						}
					}			
					set_cosmetic_tag = ALB_sultanate
					set_politics={
						ruling_party = neutrality
						elections_allowed = no 
						long_name = ALB_neutrality_sultan_party
						name = ALB_neutrality_sultan_party
					}	
					set_popularities = {
						democratic = 40
						neutrality = 60
					}				
				}	
			}
		}
		44 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
		803 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
		ai_chance = {
			factor = 0
		}
	}
}

#Greece proclaimed the annexation of Northern Epirus
country_event = {
	title = ww1_albania.5.t
	desc = ww1_albania.5.d
	id = ww1_albania.5
	fire_only_once = yes
	trigger = {
		tag = ALB
		has_war = no
		owns_state = 803
		GRE = {
			has_war = no
			owns_state = 758
		}
		date > 1914.10.1
	}
	mean_time_to_happen = {
		days = 26
	}
	option = {
		name = ww1_albania.5.a
		GRE = {
			add_opinion_modifier = {
				target = ALB
				modifier = medium_decrease
			}
			transfer_state = 803
		}
		ai_chance = {
			factor = 1
		}
	}
}

#Albanian Revolt in 1912
country_event = {
	title = ww1_albania.2.t
	desc = ww1_albania.6.d
	id = ww1_albania.6
	picture = GFX_report_event_spr_civil_war_faction_defeated
	fire_only_once = yes
	mean_time_to_happen = {
		days = 10
	}
	trigger = {
		tag = TUR
		controls_state = 44
		controls_state = 803
		ALB = {
			exists = yes
		}
		date > 1912.1.10
	}
	option = {
		name = ww1_albania.2.a
		add_stability = -0.05
		44 = {
			add_resistance = 5
		}
		803 = {
			add_resistance = 5
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = ww1_albania.2.b
		ALB = {
			transfer_state = 44
			transfer_state = 803
		}
		puppet = ALB
		if = {
			limit = {
				NOT = {
					has_government = communism
				}
			}
			TUR_ahmet_izzet = { set_nationality = ALB }
			hidden_effect = {
				ALB = {
					TUR_ahmet_izzet = {
						set_character_name = TUR_ahmet_izzet
						add_country_leader_role = {
							Promote_leader = yes
							Country_leader = {
								ideology = autocracy
								traits = { ottoman_prince }
							}
						}
					}			
					set_cosmetic_tag = ALB_sultanate
					set_politics={
						ruling_party = neutrality
						elections_allowed = no 
						long_name = ALB_neutrality_sultan_party
						name = ALB_neutrality_sultan_party
					}	
					set_popularities = {
						democratic = 40
						neutrality = 60
					}				
				}	
			}
		}
		44 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
		803 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
		add_war_support = -0.15
		ai_chance = {
			factor = 0
		}
	}
}

#Albanian War for Independence
country_event = {
	title = ww1_albania.7.t
	desc = ww1_albania.7.d
	id = ww1_albania.7
	picture = GFX_report_event_spr_civil_war_faction_defeated
	fire_only_once = yes
	mean_time_to_happen = {
		days = 10
	}
	trigger = {
		tag = TUR
		has_war = no
		any_owned_state = {
			is_core_of = ALB
			is_owned_by = TUR
			is_controlled_by = TUR
		}
		NOT = {
			country_exists = ALB
		}
		date > 1913.4.10
	}
	option = {
		name = ww1_albania.2.a
		ALB = {
			transfer_state = 44
			transfer_state = 803
			transfer_state = 848
			transfer_state = 847
			hidden_effect = {
				division_template = {
					name = "Albanian Militias"
					regiments = {
						infantry = {
							x = 0
							y = 0
						}
						infantry = {
							x = 0
							y = 1
						}
						infantry = {
							x = 1
							y = 0
						}
						infantry = {
							x = 1
							y = 1
						}
					}
				}
				44 = {
					create_unit = {
						division = "division_template = \"Albanian Militias\" start_experience_factor = 0.1"
						owner = ALB
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "division_template = \"Albanian Militias\" start_experience_factor = 0.1"
						owner = ALB
						allow_spawning_on_enemy_provs = yes
					}
				}
				803 = {
					create_unit = {
						division = "division_template = \"Albanian Militias\" start_experience_factor = 0.1"
						owner = ALB
						allow_spawning_on_enemy_provs = yes
					}
				}
				847 = {
					create_unit = {
						division = "division_template = \"Albanian Militias\" start_experience_factor = 0.1"
						owner = ALB
						allow_spawning_on_enemy_provs = yes
					}
				}
				# load_oob = ALB_1912
				every_owned_state = {
					add_claim_by = TUR
				}
			}
		}
		declare_war_on = {
			target = ALB
			type = annex_everything
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = ww1_albania.2.b
		every_owned_state = {
			limit = {
				is_core_of = ALB
				NOT = {
					is_core_of = SER
				}
			}
			ALB = {
				transfer_state = PREV
			}
		}
		add_war_support = -0.15
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				has_global_flag = kis_firstbalkanwar_lose
			}
		}
	}
}

# Military access to Serbia
country_event = {
	title = ww1_albania.8.t
	desc = ww1_albania.8.d
	id = ww1_albania.8
	fire_only_once = yes
	trigger = {
		tag = ALB
		is_subject = no
		has_war = no
		SER = {
			has_war_with = AUH
		}
		has_country_leader = {
			character = ALB_essad_pasha_toptani
			ruling_only = yes
		}
	}
	option = {
		name = ww1_albania.8.a
		SER = {
			diplomatic_relation = {
				country = ALB
				relation = military_access
				active = yes
			}
		}
		set_country_flag = military_access_to_serbia
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = ww1_albania.8.b
		ai_chance = {
			factor = 0
		}
	}
}

# Military access to Serbia
country_event = {
	title = ww1_albania.9.t
	desc = ww1_albania.9.d
	id = ww1_albania.9
	fire_only_once = yes
	trigger = {
		tag = AUH
		ALB = {
			has_country_flag = military_access_to_serbia
		}
		SER = {
			has_war_with = AUH
			has_capitulated = yes
		}
	}
	mean_time_to_happen = {
		days = 7
	}
	option = {
		name = ww1_albania.9.a
		create_wargoal = {
			type = puppet_wargoal_focus
			target = ALB
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = ww1_albania.9.b
		ai_chance = {
			factor = 0
		}
	}
}

# Peasant Revolt in Albania
country_event = {
	title = ww1_albania.10.t
	desc = ww1_albania.10.d
	id = ww1_albania.10
	fire_only_once = yes
	trigger = {
		tag = ALB
		has_country_leader = {
			character = ALB_vilhelm_i
			ruling_only = yes
		}
		date > 1914.7.1
	}
	mean_time_to_happen = {
		days = 20
	}
	option = {
		name = ww1_albania.10.a
		add_stability = -0.1
		ALB_essad_pasha_toptani = {
			promote_character = {
				ideology = despotism
			}
		}
		drop_cosmetic_tag = yes
		set_party_name = {
			ideology = neutrality
			long_name = ALB_neutrality_party_long
			name = ALB_neutrality_party
		}
	}
}

#No More Ottoman Puppet
country_event = {
	title = ww1_albania.11.t
	desc = ww1_albania.11.d
	id = ww1_albania.11
	hidden = yes
	trigger = {
		tag = ALB
		has_country_leader = {
			character = TUR_ahmet_izzet
			ruling_only = no
		}
		NOT = {
			ALB = {
				is_subject_of = TUR
			}
		}
	}
	mean_time_to_happen = { days = 0 }
	option = {
		name = ww1_albania.11.a
		if = {
			limit = {
				NOT = {
					has_cosmetic_tag = ALB_principality
				}
			}
			ALB_essad_pasha_toptani = {
				promote_character = {
					ideology = despotism
				}
			}
			drop_cosmetic_tag = yes
			set_party_name = {
				ideology = neutrality
				long_name = ALB_neutrality_party_long
				name = ALB_neutrality_party
			}
			drop_cosmetic_tag = yes
		}	
		TUR_ahmet_izzet = { set_character_name = TUR_ahmet_izzet set_nationality = TUR }
	}
}

# June Revolution
country_event = {
	id = ww1_albania.12
	title = {
		text = ww1_albania.12.t
		trigger = {
			has_country_flag = great_war_loser
		}
	}
	title = {
		text = ww1_albania.12.t2
		trigger = {
			NOT = { has_country_flag = great_war_loser }
		}
	}
	desc = {
		text = ww1_albania.12.d
		trigger = {
			has_country_flag = great_war_loser
		}
	}
	desc = {
		text = ww1_albania.12.d2
		trigger = {
			NOT = { has_country_flag = great_war_loser }
		}
	}
	picture = GFX_report_event_albanian_partisans
	trigger = {
		tag = ALB
		has_country_leader = {
			character = ALB_vilhelm_i
			ruling_only = yes
		}
		has_global_flag = great_war_ends
		date > 1924.6.1
	}
	mean_time_to_happen = {
		days = 15
	}
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			ALB_ahmet_muhtar_zogolli = {
				set_character_name = ALB_ahmet_zogu
			}
		}
	}
	option = {
		name = ww1_albania.12.a
		if = {
			limit = {
				is_subject = yes
			}
			OVERLORD = {
				country_event = {
					id = ww1_albania.13
					days = 3
				}
				end_puppet = PREV
				PREV = {
					if = {
						limit = {
							is_in_faction_with = PREV
						}
						leave_faction = yes
					}
				}
			}
		}
		set_cosmetic_tag = ALB_interwar
		set_popularities = {
			democratic = 60
			neutrality = 40
		}
		set_politics = {
			ruling_party = democratic
			elections_allowed = no
		}
		set_party_name = {
			ideology = democratic
			long_name = ALB_democratic_zogu_party
			name = ALB_democratic_zogu_party
		}
		ALB_ahmet_muhtar_zogolli = {
			add_country_leader_role = {
				promote_leader = yes
				country_leader = {
					ideology = conservatism
				}
			}
		}
	}
	option = {
		name = ww1_albania.12.b
		add_stability = -0.15
		add_manpower = -5000
		retire_character = ALB_ahmet_muhtar_zogolli
		ai_chance = {
			factor = 0
		}
	}
}

# Supress June Revolution
country_event = {
	id = ww1_albania.13
	title = ww1_albania.13.t
	desc = ww1_albania.13.d
	picture = GFX_report_event_albanian_partisans
	is_triggered_only = yes
	option = {
		name = ww1_albania.13.a
		declare_war_on = {
			target = FROM
			type = puppet_wargoal_focus
		}
		ai_chance = {
			base = 70
			modifier = {
				factor = 0
				NOT = { is_neighbor_of = FROM }
			}
			modifier = {
				factor = 0
				any_other_country = {
					is_major = yes
					has_war_with = ROOT
				}
			}
			modifier = {
				factor = 0
				has_war_support < 0.5
			}
		}
	}
	option = {
		name = ww1_albania.13.b
		add_political_power = -50
		add_opinion_modifier = {
			target = ALB
			modifier = HOI4TGW_Opinion_hostile_diplomatic_relations
		}
		ai_chance = {
			base = 100
		}
	}
}

# Zogu Government
country_event = {
	id = ww1_albania.14
	title = ww1_albania.14.t
	desc = ww1_albania.14.d
	picture = GFX_report_event_albanian_king_zog
	trigger = {
		tag = ALB
		has_country_leader = {
			character = ALB_ahmet_muhtar_zogolli
			ruling_only = yes
		}
		has_war = no
		is_subject = no
		date > 1928.9.1
	}
	fire_only_once = yes
	option = {
		name = ww1_albania.14.a
		set_cosmetic_tag = ALB_interwar
		set_politics = {
			ruling_party = neutrality
			elections_allowed = no
		}
		set_party_name = {
			ideology = neutrality
			long_name = ALB_neutrality_zogu_party
			name = ALB_neutrality_zogu_party
		}
		ALB_ahmet_muhtar_zogolli = {
			set_character_name = ALB_zog_i
			add_country_leader_role = {
				promote_leader = yes
				country_leader = {
					ideology = autocracy
				}
			}
			add_country_leader_role = {
				promote_leader = yes
				country_leader = {
					ideology = stratocracy
				}
			}
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				has_country_flag = great_war_loser
			}
			modifier = {
				factor = 0
				neutrality < 0.2
			}
		}
	}
	option = {
		name = ww1_albania.14.b
		add_political_power = -75
		ai_chance = {
			factor = 100
		}
	}
}