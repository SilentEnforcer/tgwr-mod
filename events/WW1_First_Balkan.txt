add_namespace = ww1_firstbalkan
###Warning for player basically
country_event = {
	id = ww1_firstbalkan.1
	title = ww1_firstbalkan.1.t
	desc = ww1_firstbalkan.1.d
	picture = GFX_report_event_tur_machine_gunners
	is_triggered_only = yes
	option = {
		name = ww1_firstbalkan.1.a
		custom_effect_tooltip = balkan_war_start_tooltip
		add_timed_idea = {
			idea = war_of_liberation
			days = 140
		}
		GRE = {
			add_timed_idea = {
				idea = gre_naval_supremacy_idea
				days = 140
			}
		}
		add_ai_strategy = {
			type = conquer
			id = TUR
			value = 200
		}
		add_war_support = 0.05
		ai_chance = {
			factor = 1
		}
	}
	option = {
		trigger = {
			NOT = {
				tag = BLL
			}
		}
		name = ww1_firstbalkan.1.b
		leave_faction = yes
		add_war_support = -0.15
		BLL = {
			add_opinion_modifier = {
				target = ROOT
				modifier = faction_traitor
			}
		}
		ai_chance = {
			factor = 0
		}
	}
}

#balkan war news
news_event = {
	id = ww1_firstbalkan.2
	title = ww1_firstbalkan.2.t
	desc = ww1_firstbalkan.2.d
	picture = EVENT_hoi4tgw_balkan_league
	is_triggered_only = yes
	major = yes
	option = {
		name = ww1_firstbalkan.2.a
		if = {
			limit = {
				has_game_rule = {
					rule = rule_superevent
					option = DEFAULT
				}
				is_ai = no
			}
			hidden_effect = {
				play_song = "SE_balkan_war_1"
				set_country_flag = SE_balkan_war_1
			}
		}
	}
}

#Albanian declaration of independence
country_event = {
	id = ww1_firstbalkan.3
	title = ww1_firstbalkan.3.t
	desc = ww1_firstbalkan.3.d
	picture = GFX_report_event_albanian_uprising
	fire_only_once = yes
	trigger = {
		tag = TUR
		NOT = {
			country_exists = ALB
		}
		OR = {
			has_war_with = SER
			has_war_with = BUL
			has_war_with = GRE
		}
		owns_state = 871
	}
	immediate = {
		hidden_effect = {
			ALB = {
				add_ideas = standing_alone	
				# what if balkan league is failing? the leader would be changed
				# add_ai_strategy = {
				# 	type = alliance
				# 	id = BUL
				# 	value = -500
				# }
				division_template = {
					name = "Milicitë Shqiptare"
					regiments = {
						infantry = {
							x = 0
							y = 0
						}
						infantry = {
							x = 0
							y = 1
						}
						infantry = {
							x = 1
							y = 0
						}
						infantry = {
							x = 1
							y = 1
						}
					}
				}
			}
			871 = {
				transfer_state_to = ALB
				create_unit = {
					division = "division_template = \"Milicitë Shqiptare\" start_experience_factor = 0.1"
					owner = ALB
					allow_spawning_on_enemy_provs = yes
				}
			}
		}
	}
	option = {
		name = ww1_firstbalkan.3.b
		trigger = {
			NOT = {
				has_global_flag = kis_firstbalkanwar_victory
				has_global_flag = lone_liberator_victorious
			}
		}
		custom_effect_tooltip = historical_tt
		ALB = {
			declare_war_on = {
				target = ROOT
				type = independence_wargoal
			}
		}
		ai_chance = {
			base = 5
		}
	}
	option = {
		name = ww1_firstbalkan.3.a
		add_war_support = -0.05
		ai_chance = {
			base = 0
			modifier = {
				add = 1000
				OR = {
					has_global_flag = kis_firstbalkanwar_victory
					has_global_flag = lone_liberator_victorious
				}
			}
		}
	}
}

#Armistice
country_event = {
	id = ww1_firstbalkan.4
	title = ww1_firstbalkan.4.t
	desc = {
		text = ww1_firstbalkan.4.d
		trigger = {
			NOT = {
				tag = BUL
				has_global_flag = balkan_league_fail
			}
		}
	}
	desc = {
		text = ww1_firstbalkan.4.e
		trigger = {
			tag = BUL
			has_global_flag = balkan_league_fail
		}
	}
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			#if albania is ottoman puppet
			every_other_country = {
				limit = {
					is_subject_of = FROM
					capital_scope = {
						is_on_continent = europe
					}
				}
				set_country_flag = BW1_loser
				white_peace = BLL
				set_politics = {
					ruling_party = democratic
					elections_allowed = yes
					
				}
				if = {
					limit = {
						tag = ALB
					}
					FROM = {
						country_event = {
							id = ww1_albania.28
							days = 4
						}
					}
					if = {
						limit = {
							controls_state = 44
						}
						44 = {
							remove_claim_by = SER	# if albania held albania, then they didnt losed it
						}
					}
				}
			}
			if = {
				limit = {
					NOT = { has_global_flag = kis_firstbalkanwar_victory }
				}
				set_global_flag = kis_firstbalkanwar_victory
				FROM = {
					if = {
						limit = { has_war_with = ALB }
						white_peace = ALB
						ALB = { remove_ideas = standing_alone }
					}
				}
				every_country = {
					limit = {
						OR = {
							has_war_with = FROM
							is_in_faction_with = BLL
						}
					}
					set_country_flag = BW1_winner
					every_enemy_country = {
						limit = {
							OR = {
								tag = FROM
								is_subject_of = FROM
								has_war_together_with = FROM
							}
						}
						white_peace = PREV
					}
					if = {
						limit = {
							NOT = { tag = ROOT }
						}
						country_event = ww1_firstbalkan.4
					}
				}
				if = {
					limit = {
						has_global_flag = autonomous_macedonia
					}
					every_state = {
						limit = {
							OWNER = {
								OR = {
									has_country_flag = BW1_winner
									tag = FROM
									is_subject_of = FROM
									has_country_flag = BW1_loser
								}
							}
							OR = {
								state = 759
								state = 106
								state = 203
								state = 225
								state = 345
								state = 731
								state = 788
							}
						}
						transfer_state_to = MAC
					}
					every_country = {
						limit = {
							has_country_flag = BW1_winner
						}
						give_guarantee = MAC
					}
				}
				SER = {
					if = {
						limit = { has_country_flag = BW1_winner }
						every_state = {
							limit = {
								OWNER = {
									OR = {
										tag = FROM
										is_subject_of = FROM
										has_country_flag = BW1_loser
									}
								}
								OR = {
									is_core_of = PREV
									is_claimed_by = PREV
								}
							}
							transfer_state_to = PREV
						}
						# Ohrid
						if = {
							limit = {
								203 = {
									owner = {
										has_country_flag = BW1_winner
										NOT = {
											original_tag = MAC
											original_tag = SER
										}
									}
								}
							}
							transfer_state = 203
						}
					}
				}
				BUL = {
					if = {
						limit = { has_country_flag = BW1_winner }
						every_state = {
							limit = {
								OWNER = {
									OR = {
										tag = FROM
										is_subject_of = FROM
										has_country_flag = BW1_loser
									}
								}
								OR = {
									is_core_of = PREV
									is_claimed_by = PREV
								}
							}
							transfer_state_to = PREV
						}
					}
				}
				GRE = {
					if = {
						limit = { has_country_flag = BW1_winner }
						every_state = {
							limit = {
								OWNER = {
									OR = {
										tag = FROM
										is_subject_of = FROM
										has_country_flag = BW1_loser
									}
								}
								OR = {
									is_core_of = PREV
									is_claimed_by = PREV
								}
							}
							transfer_state_to = PREV
						}
						# Southern Macedonia
						every_state = {
							limit = {
								OWNER = {
									has_country_flag = BW1_winner
									NOT = {
										original_tag = MAC
										original_tag = GRE
									}
								}
								OR = {
									state = 345
									state = 731
								}
							}
							transfer_state_to = PREV
						}
					}
					else = {
						every_state = {
							limit = {
								OWNER = {
									OR = {
										tag = FROM
										is_subject_of = FROM
										has_country_flag = BW1_loser
									}
								}
								OR = {
									state = 345
									state = 731
									state = 758
									state = 826
								}
							}
							transfer_state_to = PREV
						}
					}
				}
				MNT = {
					if = {
						limit = { has_country_flag = BW1_winner }
						every_state = {
							limit = {
								OWNER = {
									OR = {
										tag = FROM
										is_subject_of = FROM
										has_country_flag = BW1_loser
									}
								}
								OR = {
									is_core_of = PREV
									is_claimed_by = PREV
								}
							}
							transfer_state_to = PREV
						}
					}
				}
				if = {
					limit = {
						country_exists = ALB
					}
					every_state = {
						limit = {
							OWNER = {
								OR = {
									tag = FROM
									is_subject_of = FROM
									has_country_flag = BW1_loser
								}
							}
							is_core_of = ALB
						}
						transfer_state_to = ALB
					}
				}
				# Remove ottoman cores
				every_state = {
					limit = {
						OR = {
							is_claimed_by = TUR
							is_core_of = TUR
							region = 26
							region = 24
							region = 25
							state = 182
						}
						NOT = {
							is_owned_by = TUR
							state = 756
							state = 200
							state = 757
							state = 451
							# state = 731
							state = 345
							state = 164
							state = 899
							state = 184
						}				
					}
					remove_core_of = TUR
					remove_claim_by = TUR
				}
				if = {
					limit = {
						has_global_flag = bulgarian_solun
					}
					345 = {
						transfer_state_to = BUL
					}
				}
			}
		}
	}
	option = {
		name = ww1_firstbalkan.4.a
	}
}

#london conference 
news_event = {
	id = ww1_firstbalkan.5
	title = ww1_firstbalkan.5.t
	desc = ww1_firstbalkan.5.d
	picture = EVENT_hoi4tgw_first_balkan_war_end
	major = yes
	is_triggered_only = yes
	fire_for_sender = yes
	
	option = {
		name = ww1_firstbalkan.5.a
	}
}

# BALKAN LEAGUE LEADER READY FOR PEACE
#############################
country_event = {
	id = ww1_firstbalkan.7
	title = ww1_firstbalkan.7.t
	desc = ww1_firstbalkan.7.d
	picture = GFX_report_event_generic_read_write
	is_triggered_only = yes
	option = {
		name = ww1_firstbalkan.7.a
		FROM = {
			if = {
				limit = {
					is_faction_leader = yes
				}
				every_other_country = {
					limit = {
						is_in_faction_with = PREV
						OR = {
							original_tag = BUL
							original_tag = SER
							original_tag = GRE
							original_tag = CRE
							original_tag = MNT
							original_tag = MAC
							original_tag = ROM
							original_tag = RUS
							original_tag = SMS
							original_tag = IKR
						}
					}
					country_event = {
						id = ww1_firstbalkan.8
						hours = 1
					}
				}
				if = {
					limit = {
						is_in_faction_with = BUL
						BUL = {
							is_subject = no
						}
					}
					BUL = {
						set_faction_leader = yes
					}
					else_if = {
						limit = {
							is_in_faction_with = SER
							SER = {
								is_subject = no
							}
						}
						SER = {
							set_faction_leader = yes
						}
						else_if = {
							limit = {
								is_in_faction_with = GRE
								GRE = {
									is_subject = no
								}
							}
							GRE = {
								set_faction_leader = yes
							}
						}
					}
				}
				leave_faction = yes
			}
		}
		every_country = {
			limit = {
				has_war = yes
				OR = {
					is_in_faction_with = TUR
					is_subject_of = TUR
					tag = TUR
				}
			}
			FROM = {
				white_peace = PREV
				set_truce = {
					target = PREV
					days = 365
				}
				add_opinion_modifier = {
					target = TUR
					modifier = HOI4TGW_Opinion_hostile_relations_post_balkan_war
				}
			}
		}
		FROM = {
			if = {
				limit = {
					original_tag = BUL
				}
				add_ideas = BUL_idea_first_national_catastrophe
				add_timed_idea = {
					idea = BUL_idea_refugee_crisis
					days = 200
				}
				set_global_flag = BUL_surrender_in_balkan_war
			}
			if = {
				limit = {
					original_tag = SER
				}
				remove_state_claim = 106
				remove_state_claim = 203
				set_global_flag = SER_surrender_in_balkan_war
			}
			if = {
				limit = {
					original_tag = GRE
				}
				set_global_flag = GRE_surrender_in_balkan_war
			}
			if = {
				limit = {
					original_tag = ROM
				}
				set_global_flag = ROM_surrender_in_balkan_war
			}
			if = {
				limit = {
					OR = {
						original_tag = CRE
						has_subject = CRE
					}
				}
				ROOT = {
					annex_country = {
						target = CRE
					}
				}
				CRE = {
					drop_cosmetic_tag = yes
				}
			}
			if = {
				limit = {
					OR = {
						original_tag = SMS
						has_subject = SMS
					}
				}
				ROOT = {
					white_peace = SMS
					SMS = {
						get_current_government_type = yes
						set_country_flag = protectorate
					}
					set_autonomy = {
						target = SMS
						autonomy_state = autonomy_tgwr_integrated_protectorate
					}
					SMS = { restore_previous_government_type = yes }
				}
			}
			if = {
				limit = {
					OR = {
						original_tag = IKR
						has_subject = IKR
					}
				}
				ROOT = {
					annex_country = {
						target = IKR
					}
				}
			}
			if = {
				limit = {
					original_tag = MNT
				}
				set_global_flag = MNT_surrender_in_balkan_war
				ROOT = {
					FROM = { set_country_flag = protectorate }
					set_autonomy = {
						target = FROM
						autonomous_state = autonomy_tgwr_informal_protectorate
						freedom_level = 0.9
					}
				}
				hidden_effect = {
					set_cosmetic_tag = MNT_TUR
					set_politics = {
						ruling_party = neutrality
						elections_allowed = no
					}
					set_popularities = {
						neutrality = 60
						fascism = 16
						democratic = 12
						communism = 12
					}
				}
			}
			every_owned_state = {
				limit = {
					OR = {
						is_claimed_by = TUR
						is_core_of = TUR
						state = 185
						state = 876
						state = 821
					}
				}
				TUR = {
					transfer_state = PREV
				}
			}
		}
		set_global_flag = kis_firstbalkanwar_lose
	}
	option = {
		name = ww1_firstbalkan.7.b
		trigger = {
			is_ai = no
		}
		add_named_threat = {
			threat = 5
			name = kis_firstbalkanwar_lose
		}
		set_global_flag = TUR_is_winning_balkan_war
	}
}

# BALKAN LEAGUE MEMBERS ACCEPT THE PEACE?
#############################
country_event = {
	id = ww1_firstbalkan.8
	title = ww1_firstbalkan.8.t
	desc = ww1_firstbalkan.8.d
	picture = GFX_report_event_generic_read_write
	is_triggered_only = yes
	option = {
		name = ww1_firstbalkan.8.a
		ai_chance = {
			base = 0
			modifier = {
				add = 100
				OR = {
					surrender_progress > 0.2
					original_tag = ROM
					original_tag = CRE
				}
			}
		}
	}
	option = {
		name = ww1_firstbalkan.6.b
		if = {
			limit = {
				is_faction_leader = yes
			}
			if = {
				limit = {
					is_in_faction_with = BUL
					BUL = {
						is_subject = no
					}
				}
				BUL = {
					set_faction_leader = yes
				}
				else_if = {
					limit = {
						is_in_faction_with = SER
						SER = {
							is_subject = no
						}
					}
					SER = {
						set_faction_leader = yes
					}
					else_if = {
						limit = {
							is_in_faction_with = GRE
							GRE = {
								is_subject = no
							}
						}
						GRE = {
							set_faction_leader = yes
						}
					}
				}
			}
		}
		if = {
			limit = {
				is_in_faction = yes
			}
			leave_faction = yes
		}
		every_country = {
			limit = {
				has_war = yes
				OR = {
					is_in_faction_with = TUR
					is_subject_of = TUR
					tag = TUR
				}
			}
			ROOT = {
				white_peace = PREV
				set_truce = {
					target = PREV
					days = 365
				}
				add_opinion_modifier = {
					target = TUR
					modifier = HOI4TGW_Opinion_hostile_relations_post_balkan_war
				}
			}
		}
		hidden_effect = {
			if = {
				limit = {
					original_tag = BUL
				}
				add_ideas = BUL_idea_first_national_catastrophe
				add_timed_idea = {
					idea = BUL_idea_refugee_crisis
					days = 200
				}
				set_global_flag = BUL_surrender_in_balkan_war
			}
			if = {
				limit = {
					original_tag = SER
				}
				remove_state_core = 106
				remove_state_core = 203
				set_global_flag = SER_surrender_in_balkan_war
			}
			if = {
				limit = {
					original_tag = GRE
				}
				set_global_flag = GRE_surrender_in_balkan_war
			}
			if = {
				limit = {
					original_tag = ROM
				}
				set_global_flag = ROM_surrender_in_balkan_war
			}
			if = {
				limit = {
					OR = {
						has_subject = CRE
						original_tag = CRE
					}
				}
				ROOT = {
					annex_country = {
						target = CRE
					}
				}
				CRE = {
					drop_cosmetic_tag = yes
				}
			}
			if = {
				limit = {
					original_tag = MNT
				}
				set_global_flag = MNT_surrender_in_balkan_war
				TUR = {
					ROOT = { set_country_flag = protectorate }
					set_autonomy = {
						target = ROOT
						autonomous_state = autonomy_tgwr_informal_protectorate
						freedom_level = 0.9
					}
				}
				hidden_effect = {
					set_cosmetic_tag = MNT_TUR
					set_politics = {
						ruling_party = neutrality
						elections_allowed = no
					}
					set_popularities = {
						neutrality = 60
						fascism = 16
						democratic = 12
						communism = 12
					}
				}
			}
			every_owned_state = {
				limit = {
					OR = {
						is_claimed_by = TUR
						is_core_of = TUR
						state = 185
						state = 876
						state = 821
					}
				}
				TUR = {
					transfer_state = PREV
				}
			}
		}
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				OR = {
					surrender_progress > 0.2
					original_tag = ROM
					original_tag = CRE
				}
			}
		}
	}
}

#TUR_is_winning_balkan_war
country_event = {
	id = ww1_firstbalkan.10
	title = ww1_firstbalkan.10.t
	desc = ww1_firstbalkan.10.d
	picture = GFX_report_event_generic_conference
	trigger = {
		tag = ENG
		is_subject = no
		has_war = no
		has_global_flag = TUR_is_winning_balkan_war
		NOT = {
			is_in_faction_with = TUR
			has_country_flag = ENG_reaction_to_balkan_situation
			is_in_array = {
				array = global.anti_ottoman_coalition
				value = ROOT
			}
		}
	}
	immediate = {
		set_country_flag = ENG_reaction_to_balkan_situation
	}
	fire_only_once = yes
	mean_time_to_happen = {
		days = 0
	}
	## Ottoman war wining the balkan war, the great power will discuss impose to Ottoman conditions to avoid their total supremacy in balkans
	option = {
		name = ww1_firstbalkan.10.a		## lets form a great coalition and invite every great power
		add_war_support = 0.05
		set_global_flag = organise_the_anti_ottoman_coalition
		set_country_flag = eight_coalition_master
		custom_effect_tooltip = ENG_anti_ottoman_coalition
		add_to_array = {
			array = global.anti_ottoman_coalition_leaders
			value = ROOT
		}
		add_to_array = {
			array = global.anti_ottoman_coalition
			value = ROOT
		}
		add_ideas = anti_ottoman_balkan_coalition
		hidden_effect = {
			# enough time to get members
			news_event = {
				id = ww1_firstbalkan.42
				days = 10
			}
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = ww1_firstbalkan.10.b		## Who are you ? Where im am ? - Joe Biden 2022
		ai_chance = {
			factor = 0
		}
		hidden_effect = {
			# britian is not able to join coalition after that
			set_country_flag = dont_want_to_join_anti_ottoman_balkan_coalition
			# the other european power gets opportunity
			random_other_country = {
				limit = {
					capital_scope = {
						is_on_continent = europe
					}
					is_subject = no
					has_war = no
					has_global_flag = TUR_is_winning_balkan_war
					NOT = {
						is_in_faction_with = TUR
						has_country_flag = ENG_reaction_to_balkan_situation
						is_in_array = {
							array = global.anti_ottoman_coalition
							value = ROOT
						}
					}
				}
				country_event = {
					id = ww1_firstbalkan.10
				}
			}
		}
	}
}

# The coalition leader is inviting us into the coalition
country_event = {
	id = ww1_firstbalkan.11
	title = ww1_firstbalkan.11.t
	desc = ww1_firstbalkan.11.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	## Ottoman war wining the balkan war, the great power will discuss impose to Ottoman conditions to avoid their total supremacy in balkans
	option = {
		name = ww1_firstbalkan.11.a		## join coalition
		add_war_support = 0.05
		add_ideas = anti_ottoman_balkan_coalition
		set_global_flag = not_alone_in_anti_ottoman_balkan_coalition
		if = {
			limit = {
				is_major = yes
			}
			add_to_array = {
				array = global.anti_ottoman_coalition_leaders
				value = ROOT
			}
		}
		add_to_array = {
			array = global.anti_ottoman_coalition
			value = ROOT
		}
		FROM = {
			country_event = {
				id = ww1_firstbalkan.34
			}
		}
		ai_chance = {
			base = 100
			# we are not relevant
			modifier = {
				add = -90
				capital_scope = {
					OR = {
						is_on_continent = north_america
						is_on_continent = south_america
						is_on_continent = australia
					}
				}
			}
			# I don't want to
			modifier = {
				add = -90
				OR = {
					is_in_faction_with = TUR
					has_guaranteed = TUR
					has_opinion = {
						target = TUR
						value > 70
					}
				}
			}
		}
	}
	option = {
		name = ww1_firstbalkan.11.b		## No
		set_country_flag = dont_want_to_join_anti_ottoman_balkan_coalition
		FROM = {
			country_event = {
				id = ww1_firstbalkan.35
			}
		}
		ai_chance = {
			base = 100
			modifier = {
				add = -100
				OR = {
					is_neighbor_of = TUR
					capital_scope = {
						is_on_continent = europe
					}
				}
			}
			modifier = {
				add = -100
				has_opinion = {
					target = TUR
					value < -20
				}
			}
		}
	}
}

#########################################
#
#
#	BULGARIA PART
#
#######################
# ENG discussion about a minor balkan country = Bulgaria
country_event = {
	id = ww1_firstbalkan.12
	title = ww1_firstbalkan.12.t
	desc = ww1_firstbalkan.12.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	immediate = {
		if = {
			limit = {
				check_variable = {
					id = global.BUL_coalition_fate_lose_rumelia
				}
			}
			else = {
				##setting up votes 
				set_variable = {
					id = global.BUL_coalition_fate_lose_rumelia
					value = 0
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					id = global.BUL_coalition_fate_integrated_puppet
				}
			}
			else = {
				##setting up votes 
				set_variable = {
					id = global.BUL_coalition_fate_integrated_puppet
					value = 0
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					id = global.BUL_coalition_fate_annexed
				}
			}
			else = {
				##setting up votes 
				set_variable = {
					id = global.BUL_coalition_fate_annexed
					value = 0
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					id = global.BUL_coalition_fate_reparations
				}
			}
			else = {
				##setting up votes 
				set_variable = {
					id = global.BUL_coalition_fate_reparations
					value = 0
				}
			}
		}
	}
	## Ottoman can annex Rumelia
	option = {
		name = ww1_firstbalkan.12.a
		add_to_variable = {
			global.bulgaria_annex_rumelia = 1
		}
		ai_chance = {
			factor = 30			#strong base
			modifier = {
				is_in_faction_with = TUR				## puppet is the best for our friend
				add = -100
			}
			modifier = {
				has_opinion = {
					target = TUR
					value > 50
				}
				add = 20				#friendly country
			}
		}
	}
	## Ottoman may puppet bulgaria
	option = {
		name = ww1_firstbalkan.12.b		## No
		add_to_variable = {
			global.bulgaria_autonomy = 1
		}
		ai_chance = {
			factor = 10			#This is what ottomans want
			modifier = {
				is_in_faction_with = TUR				## puppet is the best for our friend
				add = 100
			}
			modifier = {
				has_opinion = {
					target = TUR
					value > 50
				}
				add = 20				#friendly country
			}
		}
	}
	## Ottoman may do whatever they want
	option = {
		name = ww1_firstbalkan.12.c		## No
		add_to_variable = {
			global.bulgaria_annex_entirity = 1
		}
		ai_chance = {
			factor = 5			#low chances
			modifier = {
				is_in_faction_with = TUR				##its very good
				add = 200
			}
			modifier = {
				has_opinion = {
					target = TUR
					value > 100
				}
				add = 20				#must be very friendly
			}
		}
	}
	## Ottoman may just ask reparations
	option = {
		name = ww1_firstbalkan.12.e		## No
		add_to_variable = {
			global.bulgaria_reparation = 1
		}
		ai_chance = {
			factor = 15			#strong base
			modifier = {
				is_in_faction_with = TUR				##thats shit
				add = -100
			}
			modifier = {
				has_opinion = {
					target = TUR
					value > 50
				}
				add = -20				#friendly country
			}
		}
	}
}

# Bulgarian fate is sealed
country_event = {
	id = ww1_firstbalkan.13
	title = ww1_firstbalkan.13.t
	desc = ww1_firstbalkan.13.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	immediate = {
		BUL = {
			set_country_flag = fate_sealed_by_anti_ottoman_balkan_coalition
		}
	}
	option = {
		name = ww1_firstbalkan.13.a
		trigger = {
			check_variable = {
				var = global.bulgaria_annex_rumelia
				value = global.bulgaria_autonomy
				compare = greater_than_or_equals
			}
			check_variable = {
				var = global.bulgaria_annex_rumelia
				value = global.bulgaria_annex_entirity
				compare = greater_than_or_equals
			}
			check_variable = {
				var = global.bulgaria_annex_rumelia
				value = global.bulgaria_reparation
				compare = greater_than_or_equals
			}
		}
		TUR = {
			country_event = {
				id = ww1_firstbalkan.15
				days = 2
			}
		}
		if = {
			limit = {
				OR = {
					tag = AUS
					tag = RUS
				}
			}
			custom_effect_tooltip = if_tur_refuse_we_will_get_a_war_goal
		}
	}
	option = {
		name = ww1_firstbalkan.13.b
		trigger = {
			check_variable = {
				var = global.bulgaria_autonomy
				value = global.bulgaria_annex_rumelia
				compare = greater_than
			}
			check_variable = {
				var = global.bulgaria_autonomy
				value = global.bulgaria_annex_entirity
				compare = greater_than_or_equals
			}
			check_variable = {
				var = global.bulgaria_autonomy
				value = global.bulgaria_reparation
				compare = greater_than
			}
		}
		TUR = {
			country_event = {
				id = ww1_firstbalkan.16
				days = 2
			}
		}
		if = {
			limit = {
				OR = {
					tag = AUS
					tag = RUS
				}
			}
			custom_effect_tooltip = if_tur_refuse_we_will_get_a_war_goal
		}
	}
	option = {
		name = ww1_firstbalkan.13.c
		trigger = {
			check_variable = {
				var = global.bulgaria_annex_entirity
				value = global.bulgaria_annex_rumelia
				compare = greater_than
			}
			check_variable = {
				var = global.bulgaria_annex_entirity
				value = global.bulgaria_autonomy
				compare = greater_than
			}
			check_variable = {
				var = global.bulgaria_annex_entirity
				value = global.bulgaria_reparation
				compare = greater_than
			}
		}
		TUR = {
			country_event = {
				id = ww1_firstbalkan.17
				days = 2
			}
		}
		if = {
			limit = {
				OR = {
					tag = AUS
					tag = RUS
				}
			}
			custom_effect_tooltip = if_tur_refuse_we_will_get_a_war_goal
		}
	}
	option = {
		name = ww1_firstbalkan.13.e
		trigger = {
			check_variable = {
				var = global.bulgaria_reparation
				value = global.bulgaria_annex_rumelia
				compare = greater_than
			}
			check_variable = {
				var = global.bulgaria_reparation
				value = global.bulgaria_autonomy
				compare = greater_than_or_equals
			}
			check_variable = {
				var = global.bulgaria_reparation
				value = global.bulgaria_annex_entirity
				compare = greater_than_or_equals
			}
		}
		TUR = {
			country_event = {
				id = ww1_firstbalkan.18
				days = 2
			}
		}
		if = {
			limit = {
				OR = {
					tag = AUS
					tag = RUS
				}
			}
			custom_effect_tooltip = if_tur_refuse_we_will_get_a_war_goal
		}
	}
}

#BUL capituled ! We won some stuff
country_event = {
	id = ww1_firstbalkan.14
	title = ww1_firstbalkan.14.t
	desc = ww1_firstbalkan.14.d
	picture = GFX_report_event_generic_conference
	trigger = {
		tag = TUR
		has_global_flag = TUR_is_winning_balkan_war
		has_global_flag = BUL_surrender_in_balkan_war
		NOT = {
			has_country_flag = TUR_reaction_to_BUL_capitulation
		}
	}
	fire_only_once = yes
	immediate = {
		set_country_flag = TUR_reaction_to_BUL_capitulation
	}
	## Bulgaria is now a temporary puppet
	option = {
		name = ww1_firstbalkan.14.a		## lets form a great coalition and invite every great power
		add_manpower = 50000
		BUL = {
			add_manpower = -50000
		}
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 10000
			producer = BUL
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = ww1_firstbalkan.14.b		## lets just annex everything
		annex_country = {
			target = BUL
			transfer_troops = yes
		}
		BUL = {
			add_manpower = -10000
		}
		add_manpower = 10000
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 10000
			producer = BUL
		}
		ai_chance = {
			factor = 0
		}
	}
}

#coalition ask TUR to liberate bulgaria and just take Rumelia
country_event = {
	id = ww1_firstbalkan.15
	title = ww1_firstbalkan.15.t
	desc = ww1_firstbalkan.15.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		set_country_flag = TUR_reaction_to_BUL_capitulation
	}
	##
	option = {
		name = ww1_firstbalkan.15.a		## we have no other choices
		if = {
			limit = {
				BUL = {
					exists = no
				}
			}
			BUL = {
				transfer_state = 48
				transfer_state = 211
				transfer_state = 77
			}
		}
		if = {
			limit = {
				BUL = {
					is_subject_of = TUR
				}
			}
			TUR = {
				end_puppet = BUL
			}
			BUL = {
				drop_cosmetic_tag = yes
			}
		}
		transfer_state = 212
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = ww1_firstbalkan.15.b		##
		effect_tooltip = {
			RUS = {
				create_wargoal = {
					target = TUR
					type = topple_government
				}
			}
			AUS = {
				create_wargoal = {
					target = TUR
					type = topple_government
				}
			}
		}
		every_country = {
			limit = {
				is_in_array = {
					array = global.anti_ottoman_coalition
					value = THIS
				}
			}
			country_event = ww1_firstbalkan.31
		}
		set_global_flag = TUR_oppose_the_coalition
	}
}

#coalition let TUR get a bulgarian puppet BUL_coalition_fate_integrated_puppet
country_event = {
	id = ww1_firstbalkan.16
	title = ww1_firstbalkan.16.t
	desc = ww1_firstbalkan.16.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		set_country_flag = TUR_reaction_to_BUL_capitulation
	}
	##
	option = {
		name = ww1_firstbalkan.16.a		## we have no other choices
		if = {
			limit = {
				BUL = {
					exists = no
				}
			}
			BUL = {
				transfer_state = 48
				transfer_state = 211
				transfer_state = 77
			}
		}
		transfer_state = 212
		set_autonomy = {
			target = BUL
			autonomous_state = autonomy_puppet
			freedom_level = 0.2
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = ww1_firstbalkan.16.b		##
		effect_tooltip = {
			RUS = {
				create_wargoal = {
					target = TUR
					type = topple_government
				}
			}
			AUS = {
				create_wargoal = {
					target = TUR
					type = topple_government
				}
			}
		}
		every_country = {
			limit = {
				is_in_array = {
					array = global.anti_ottoman_coalition
					value = THIS
				}
			}
			country_event = ww1_firstbalkan.31
		}
		set_global_flag = TUR_oppose_the_coalition
	}
}

#coalition let TUR annex bulgaria ! BUL_coalition_fate_annexed
country_event = {
	id = ww1_firstbalkan.17
	title = ww1_firstbalkan.17.t
	desc = ww1_firstbalkan.17.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		set_country_flag = TUR_reaction_to_BUL_capitulation
	}
	##
	option = {
		name = ww1_firstbalkan.17.a		## cool
		if = {
			limit = {
				BUL = {
					is_subject_of = TUR
				}
			}
			TUR = {
				end_puppet = BUL
			}
			BUL = {
				drop_cosmetic_tag = yes
			}
		}
		TUR = {
			annex_country = {
				target = BUL
				transfer_troops = no
			}
		}
		every_state = {
			limit = {
				OR = {
					is_claimed_by = BUL
					is_core_of = BUL
				}
			}
			add_claim_by = TUR
		}
		if = {
			limit = {
				any_country = {
					is_subject_of = TUR
					owns_state = 821
				}
			}
			transfer_state = 821
		}
		if = {
			limit = {
				any_country = {
					is_subject_of = TUR
					owns_state = 876
				}
			}
			transfer_state = 876
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		## we are fine with the puppet
		name = ww1_firstbalkan.17.b		##
	}
}

#coalition just ask bulgaria to pay reparation... BUL_coalition_fate_reparations
country_event = {
	id = ww1_firstbalkan.18
	title = ww1_firstbalkan.18.t
	desc = ww1_firstbalkan.18.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		set_country_flag = TUR_reaction_to_BUL_capitulation
	}
	##
	option = {
		name = ww1_firstbalkan.18.a		## wtf okay...
		ai_chance = {
			factor = 100
		}
		if = {
			limit = {
				BUL = {
					exists = no
				}
			}
			BUL = {
				transfer_state = 48
				transfer_state = 212
				transfer_state = 211
				transfer_state = 77
			}
		}
		if = {
			limit = {
				BUL = {
					is_subject_of = TUR
				}
			}
			TUR = {
				end_puppet = BUL
			}
			BUL = {
				drop_cosmetic_tag = yes
			}
		}
		TUR_remove_debt_2360 = yes
		BUL = {
			diplomatic_relation = {
				country = TUR
				relation = non_aggression_pact
			}
			add_timed_idea = {
				idea = TUR_paying_war_reparations
				days = 548
			}
		}
	}
	option = {
		## fuck you uk
		name = ww1_firstbalkan.18.b		##
		effect_tooltip = {
			RUS = {
				create_wargoal = {
					target = TUR
					type = topple_government
				}
			}
			AUS = {
				create_wargoal = {
					target = TUR
					type = topple_government
				}
			}
		}
		every_country = {
			limit = {
				is_in_array = {
					array = global.anti_ottoman_coalition
					value = THIS
				}
			}
			country_event = ww1_firstbalkan.31
		}
		set_global_flag = TUR_oppose_the_coalition
	}
}

#########################################
#
#
#	GREECE PART
#
#######################
# ENG discussion about a minor balkan country = Greece
country_event = {
	id = ww1_firstbalkan.19
	title = ww1_firstbalkan.19.t
	desc = ww1_firstbalkan.19.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	immediate = {
		if = {
			limit = {
				check_variable = {
					id = global.GRE_coalition_fate_integrated_puppet
				}
			}
			else = {
				##setting up votes 
				set_variable = {
					id = global.GRE_coalition_fate_integrated_puppet
					value = 0
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					id = global.GRE_coalition_fate_annexed
				}
			}
			else = {
				##setting up votes 
				set_variable = {
					id = global.GRE_coalition_fate_annexed
					value = 0
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					id = global.GRE_coalition_fate_reparations
				}
			}
			else = {
				##setting up votes 
				set_variable = {
					id = global.GRE_coalition_fate_reparations
					value = 0
				}
			}
		}
	}
	## Ottoman may puppet
	option = {
		name = ww1_firstbalkan.19.a		## No
		add_to_variable = {
			global.greece_puppet = 1
		}
		ai_chance = {
			factor = 10			#This is what ottomans want
			modifier = {
				is_in_faction_with = TUR				## puppet is the best for our friend
				add = 100
			}
			modifier = {
				has_opinion = {
					target = TUR
					value > 50
				}
				add = 20				#friendly country
			}
		}
	}
	## Ottoman may do whatever they want
	option = {
		name = ww1_firstbalkan.19.b		## No
		add_to_variable = {
			global.greece_annex = 1
		}
		ai_chance = {
			factor = 5			#low chances
			modifier = {
				is_in_faction_with = TUR				##its very good
				add = 200
			}
			modifier = {
				has_opinion = {
					target = TUR
					value > 100
				}
				add = 20				#must be very friendly
			}
		}
	}
	## Ottoman may just ask reparations
	option = {
		name = ww1_firstbalkan.19.c		## No
		ai_chance = {
			factor = 15			#strong base
			modifier = {
				is_in_faction_with = TUR				##thats shit
				add = -100
			}
			modifier = {
				has_opinion = {
					target = TUR
					value > 50
				}
				add = -20				#friendly country
			}
		}
	}
}

# greek fate is sealed
country_event = {
	id = ww1_firstbalkan.20
	title = ww1_firstbalkan.20.t
	desc = ww1_firstbalkan.20.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	immediate = {
		GRE = {
			set_country_flag = fate_sealed_by_anti_ottoman_balkan_coalition
		}
	}
	option = {
		name = ww1_firstbalkan.20.b
		trigger = {
			check_variable = {
				var = global.greece_puppet
				value = global.greece_annex
				compare = greater_than_or_equals
			}
			check_variable = {
				var = global.greece_puppet
				value = global.greece_reparations
				compare = greater_than_or_equals
			}
		}
		TUR = {
			country_event = {
				id = ww1_firstbalkan.21
				days = 2
			}
		}
		if = {
			limit = {
				OR = {
					tag = AUS
					tag = RUS
				}
			}
			custom_effect_tooltip = if_tur_refuse_we_will_get_a_war_goal
		}
	}
	option = {
		name = ww1_firstbalkan.20.c
		trigger = {
			check_variable = {
				var = global.greece_annex
				value = global.greece_puppet
				compare = greater_than
			}
			check_variable = {
				var = global.greece_annex
				value = global.greece_reparations
				compare = greater_than
			}
		}
		TUR = {
			country_event = {
				id = ww1_firstbalkan.22
				days = 2
			}
		}
		if = {
			limit = {
				OR = {
					tag = AUS
					tag = RUS
				}
			}
			custom_effect_tooltip = if_tur_refuse_we_will_get_a_war_goal
		}
	}
	option = {
		name = ww1_firstbalkan.20.e
		trigger = {
			check_variable = {
				var = global.greece_reparations
				value = global.greece_puppet
				compare = greater_than
			}
			check_variable = {
				var = global.greece_reparations
				value = global.greece_annex
				compare = greater_than_or_equals
			}
		}
		TUR = {
			country_event = {
				id = ww1_firstbalkan.23
				days = 2
			}
		}
		if = {
			limit = {
				OR = {
					tag = AUS
					tag = RUS
				}
			}
			custom_effect_tooltip = if_tur_refuse_we_will_get_a_war_goal
		}
	}
}

#coalition let TUR get a greek puppet BUL_coalition_fate_integrated_puppet
country_event = {
	id = ww1_firstbalkan.21
	title = ww1_firstbalkan.21.t
	desc = ww1_firstbalkan.21.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		set_country_flag = TUR_reaction_to_GRE_capitulation
	}
	##
	option = {
		name = ww1_firstbalkan.21.a		## we have no other choices
		if = {
			limit = {
				GRE = {
					exists = no
				}
			}
			GRE = {
				transfer_state = 898
				transfer_state = 47
				transfer_state = 185
				transfer_state = 187
				transfer_state = 186
				transfer_state = 900
			}
		}
		transfer_state = 187
		transfer_state = 185
		transfer_state = 900
		transfer_state = 182
		set_autonomy = {
			target = GRE
			autonomous_state = autonomy_puppet
			freedom_level = 0.2
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = ww1_firstbalkan.16.b		##
		effect_tooltip = {
			RUS = {
				create_wargoal = {
					target = TUR
					type = topple_government
				}
			}
			AUS = {
				create_wargoal = {
					target = TUR
					type = topple_government
				}
			}
		}
		every_country = {
			limit = {
				is_in_array = {
					array = global.anti_ottoman_coalition
					value = THIS
				}
			}
			country_event = ww1_firstbalkan.31
		}
		set_global_flag = TUR_oppose_the_coalition
	}
}

#coalition let TUR annex greece ! GRE_coalition_fate_annexed
country_event = {
	id = ww1_firstbalkan.22
	title = ww1_firstbalkan.17.t
	desc = ww1_firstbalkan.17.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		set_country_flag = TUR_reaction_to_GRE_capitulation
	}
	##
	option = {
		name = ww1_firstbalkan.22.a		## cool
		if = {
			limit = {
				GRE = {
					is_subject_of = TUR
				}
			}
			TUR = {
				end_puppet = GRE
			}
			GRE = {
				drop_cosmetic_tag = yes
			}
		}
		if = {
			limit = {
				CRE = {
					is_subject_of = TUR
				}
			}
			TUR = {
				end_puppet = CRE
			}
			CRE = {
				drop_cosmetic_tag = yes
			}
		}
		TUR = {
			annex_country = {
				target = GRE
				transfer_troops = no
			}
		}
		every_state = {
			limit = {
				OR = {
					is_claimed_by = GRE
					is_core_of = GRE
					is_claimed_by = CRE
					is_core_of = CRE
				}
			}
			add_claim_by = TUR
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		## we are fine with the puppet
		name = ww1_firstbalkan.22.b		##
	}
}

#coalition just ask Greece to pay reparation... GRE_coalition_fate_reparations
country_event = {
	id = ww1_firstbalkan.23
	title = ww1_firstbalkan.23.t
	desc = ww1_firstbalkan.23.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		set_country_flag = TUR_reaction_to_BUL_capitulation
	}
	##
	option = {
		name = ww1_firstbalkan.23.a		## wtf okay...
		ai_chance = {
			factor = 100
		}
		if = {
			limit = {
				GRE = {
					exists = no
				}
			}
			GRE = {
				transfer_state = 898
				transfer_state = 47
				transfer_state = 185
				transfer_state = 187
				transfer_state = 186
				transfer_state = 900
			}
		}
		if = {
			limit = {
				CRE = {
					exists = no
				}
			}
			CRE = {
				transfer_state = 182
			}
		}
		if = {
			limit = {
				GRE = {
					is_subject_of = TUR
				}
			}
			TUR = {
				end_puppet = GRE
			}
			GRE = {
				drop_cosmetic_tag = yes
			}
		}
		if = {
			limit = {
				CRE = {
					is_subject_of = TUR
				}
			}
			TUR = {
				end_puppet = CRE
			}
			CRE = {
				drop_cosmetic_tag = yes
			}
		}
		TUR_remove_debt_2360 = yes
		GRE = {
			diplomatic_relation = {
				country = TUR
				relation = non_aggression_pact
			}
			add_timed_idea = {
				idea = TUR_paying_war_reparations
				days = 548
			}
		}
		CRE = {
			diplomatic_relation = {
				country = TUR
				relation = non_aggression_pact
			}
			add_timed_idea = {
				idea = TUR_paying_war_reparations
				days = 548
			}
		}
	}
	option = {
		## fuck you uk
		name = ww1_firstbalkan.23.b		##
		effect_tooltip = {
			RUS = {
				create_wargoal = {
					target = TUR
					type = topple_government
				}
			}
			AUS = {
				create_wargoal = {
					target = TUR
					type = topple_government
				}
			}
		}
		every_country = {
			limit = {
				is_in_array = {
					array = global.anti_ottoman_coalition
					value = THIS
				}
			}
			country_event = ww1_firstbalkan.31
		}
		set_global_flag = TUR_oppose_the_coalition
	}
}

#########################################
#
#
#	SERBIA PART
#
#######################
# ENG discussion about a minor balkan country = Serbia
country_event = {
	id = ww1_firstbalkan.24
	title = ww1_firstbalkan.24.t
	desc = ww1_firstbalkan.24.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	immediate = {
		if = {
			limit = {
				check_variable = {
					id = global.SER_coalition_fate_integrated_puppet
				}
			}
			else = {
				##setting up votes 
				set_variable = {
					id = global.SER_coalition_fate_integrated_puppet
					value = 0
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					id = global.GRE_coalition_fate_annexed
				}
			}
			else = {
				##setting up votes 
				set_variable = {
					id = global.SER_coalition_fate_annexed
					value = 0
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					id = global.SER_coalition_fate_reparations
				}
			}
			else = {
				##setting up votes 
				set_variable = {
					id = global.SER_coalition_fate_reparations
					value = 0
				}
			}
		}
	}
	## Ottoman may puppet
	option = {
		name = ww1_firstbalkan.24.b		## No
		add_to_variable = {
			var = global.serbia_puppet
			value = 1
		}
		ai_chance = {
			factor = 10			#This is what ottomans want
			modifier = {
				is_in_faction_with = TUR				## puppet is the best for our friend
				add = 100
			}
			modifier = {
				has_opinion = {
					target = TUR
					value > 50
				}
				add = 20				#friendly country
			}
		}
	}
	## Ottoman may do whatever they want
	option = {
		name = ww1_firstbalkan.24.c		## No
		add_to_variable = {
			var = global.serbia_annex
			value = 1
		}
		ai_chance = {
			factor = 5			#low chances
			modifier = {
				is_in_faction_with = TUR				##its very good
				add = 200
			}
			modifier = {
				has_opinion = {
					target = TUR
					value > 100
				}
				add = 20				#must be very friendly
			}
		}
	}
	## Ottoman may just ask reparations
	option = {
		name = ww1_firstbalkan.24.e		## No
		add_to_variable = {
			var = global.serbia_reparations
			value = 1
		}
		ai_chance = {
			factor = 15			#strong base
			modifier = {
				is_in_faction_with = TUR				##thats shit
				add = -100
			}
			modifier = {
				has_opinion = {
					target = TUR
					value > 50
				}
				add = -20				#friendly country
			}
		}
	}
}

# serbian fate is sealed
country_event = {
	id = ww1_firstbalkan.25
	title = ww1_firstbalkan.25.t
	desc = ww1_firstbalkan.25.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	immediate = {
		SER = {
			set_country_flag = fate_sealed_by_anti_ottoman_balkan_coalition
		}
	}
	option = {
		name = ww1_firstbalkan.25.b
		trigger = {
			check_variable = {
				var = global.serbia_puppet
				value = global.serbia_annex
				compare = greater_than_or_equals
			}
			check_variable = {
				var = global.serbia_puppet
				value = global.serbia_reparations
				compare = greater_than_or_equals
			}
		}
		if = {
			limit = {
				OR = {
					tag = AUS
					tag = RUS
				}
			}
			custom_effect_tooltip = if_tur_refuse_we_will_get_a_war_goal
		}
		if = {
			limit = {
				is_in_array = {
					array = global.anti_ottoman_coalition_leaders
					value = ROOT
				}
			}
			TUR = {
				country_event = {
					days = 2
					id = ww1_firstbalkan.26
				}
			}
		}
	}
	option = {
		name = ww1_firstbalkan.25.c
		trigger = {
			check_variable = {
				var = global.serbia_puppet
				value = global.serbia_annex
				compare = greater_than
			}
			check_variable = {
				var = global.serbia_puppet
				value = global.serbia_reparations
				compare = greater_than
			}
		}
		if = {
			limit = {
				is_in_array = {
					array = global.anti_ottoman_coalition_leaders
					value = ROOT
				}
			}
			TUR = {
				country_event = {
					days = 2
					id = ww1_firstbalkan.27
				}
			}
		}
		if = {
			limit = {
				OR = {
					tag = AUS
					tag = RUS
				}
			}
			custom_effect_tooltip = if_tur_refuse_we_will_get_a_war_goal
		}
	}
	option = {
		name = ww1_firstbalkan.25.e
		trigger = {
			check_variable = {
				var = global.serbia_puppet
				value = global.serbia_annex
				compare = greater_than
			}
			check_variable = {
				var = global.serbia_puppet
				value = global.serbia_reparations
				compare = greater_than_or_equals
			}
		}
		if = {
			limit = {
				is_in_array = {
					array = global.anti_ottoman_coalition_leaders
					value = ROOT
				}
			}
			TUR = {
				country_event = {
					days = 2
					id = ww1_firstbalkan.28
				}
			}
		}
		if = {
			limit = {
				OR = {
					tag = AUS
					tag = RUS
				}
			}
			custom_effect_tooltip = if_tur_refuse_we_will_get_a_war_goal
		}
	}
	option = {
		name = another_vote
		trigger = {
			NOT = {
				AND = {
					check_variable = {
						global.SER_coalition_fate_reparations > global.SER_coalition_fate_integrated_puppet
					}
					check_variable = {
						global.SER_coalition_fate_reparations > global.SER_coalition_fate_annexed
					}
				}
				AND = {
					check_variable = {
						global.SER_coalition_fate_integrated_puppet > global.SER_coalition_fate_reparations
					}
					check_variable = {
						global.SER_coalition_fate_integrated_puppet > global.SER_coalition_fate_annexed
					}
				}
				AND = {
					check_variable = {
						global.SER_coalition_fate_annexed > global.SER_coalition_fate_integrated_puppet
					}
					check_variable = {
						global.SER_coalition_fate_annexed > global.SER_coalition_fate_integrated_puppet
					}
				}
			}
		}
		SER = {
			clr_country_flag = fate_sealed_by_anti_ottoman_balkan_coalition
		}
	}
}

#coalition let TUR get a serbian puppet SER_coalition_fate_integrated_puppet
country_event = {
	id = ww1_firstbalkan.26
	title = ww1_firstbalkan.26.t
	desc = ww1_firstbalkan.26.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		set_country_flag = TUR_reaction_to_SER_capitulation
	}
	##
	option = {
		name = ww1_firstbalkan.22.a		## we have no other choices
		if = {
			limit = {
				owns_state = 199
			}
			if = {
				limit = {
					SER = {
						exists = no
					}
				}
				SER = {
					transfer_state = 107
					transfer_state = 809
				}
			}
			transfer_state = 821
			transfer_state = 876
		}
		else = {
			SER = {
				transfer_state = 107
				transfer_state = 809
				transfer_state = 876
				transfer_state = 821
			}
		}
		set_autonomy = {
			target = SER
			autonomous_state = autonomy_puppet
			freedom_level = 0.2
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = ww1_firstbalkan.16.b		##
		effect_tooltip = {
			RUS = {
				create_wargoal = {
					target = TUR
					type = topple_government
				}
			}
			AUS = {
				create_wargoal = {
					target = TUR
					type = topple_government
				}
			}
		}
		every_country = {
			limit = {
				is_in_array = {
					array = global.anti_ottoman_coalition
					value = THIS
				}
			}
			country_event = ww1_firstbalkan.31
		}
		set_global_flag = TUR_oppose_the_coalition
	}
}

#coalition let TUR annex Serbia ! SER_coalition_fate_annexed
country_event = {
	id = ww1_firstbalkan.27
	title = ww1_firstbalkan.27.t
	desc = ww1_firstbalkan.27.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		set_country_flag = TUR_reaction_to_SER_capitulation
	}
	##
	option = {
		name = ww1_firstbalkan.22.a		## cool
		if = {
			limit = {
				SER = {
					is_subject_of = TUR
				}
			}
			TUR = {
				end_puppet = SER
			}
			SER = {
				drop_cosmetic_tag = no
			}
		}
		TUR = {
			annex_country = {
				target = SER
				transfer_troops = yes
			}
		}
		every_state = {
			limit = {
				OR = {
					is_claimed_by = SER
					is_core_of = SER
				}
			}
			add_claim_by = TUR
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		## we are fine with the puppet
		name = ww1_firstbalkan.22.b		##
	}
}

#coalition just ask Serbia to pay reparation... SER_coalition_fate_reparations
country_event = {
	id = ww1_firstbalkan.28
	title = ww1_firstbalkan.28.t
	desc = ww1_firstbalkan.28.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		set_country_flag = TUR_reaction_to_BUL_capitulation
	}
	##
	option = {
		name = ww1_firstbalkan.23.a		## wtf okay...
		ai_chance = {
			factor = 100
		}
		if = {
			limit = {
				SER = {
					exists = no
				}
			}
			SER = {
				transfer_state = 107
				transfer_state = 809
				transfer_state = 876
				transfer_state = 821
			}
		}
		if = {
			limit = {
				SER = {
					is_subject_of = TUR
				}
			}
			TUR = {
				end_puppet = SER
			}
			SER = {
				drop_cosmetic_tag = yes
			}
		}
		TUR_remove_debt_2360 = yes
		SER = {
			diplomatic_relation = {
				country = TUR
				relation = non_aggression_pact
			}
			add_timed_idea = {
				idea = TUR_paying_war_reparations
				days = 548
			}
		}
	}
	option = {
		## fuck you uk
		name = ww1_firstbalkan.23.b		##
		effect_tooltip = {
			RUS = {
				create_wargoal = {
					target = TUR
					type = topple_government
				}
			}
			AUS = {
				create_wargoal = {
					target = TUR
					type = topple_government
				}
			}
		}
		every_country = {
			limit = {
				is_in_array = {
					array = global.anti_ottoman_coalition
					value = THIS
				}
			}
			country_event = ww1_firstbalkan.31
		}
		set_global_flag = TUR_oppose_the_coalition
	}
}

#greece is alone in the balkan war
country_event = {
	id = ww1_firstbalkan.29
	title = ww1_firstbalkan.29.t
	desc = ww1_firstbalkan.29.d
	picture = GFX_report_event_tur_machine_gunners
	fire_only_once = yes
	trigger = {
		tag = GRE
		has_war_with = TUR
		OR = {
			has_global_flag = SER_surrender_in_balkan_war
			SER = {
				has_capitulated = yes
				is_subject_of = TUR
				exists = no
			}
		}
		OR = {
			has_global_flag = BUL_surrender_in_balkan_war
			BUL = {
				has_capitulated = yes
				is_subject_of = TUR
				exists = no
			}
		}
		NOT = {
			has_global_flag = great_war
			has_country_flag = GRE_solo_against_TUR
		}
	}
	immediate = {
		set_country_flag = GRE_solo_against_TUR
	}
	##
	option = {
		name = ww1_firstbalkan.29.a		## We will never die !
		set_global_flag = TUR_invasion_of_GRE_mission
		add_ideas = GRE_memory_of_1821
	}
}

#greece is alone in the balkan war
country_event = {
	id = ww1_firstbalkan.30
	title = ww1_firstbalkan.30.t
	desc = ww1_firstbalkan.30.d
	picture = GFX_report_event_tur_machine_gunners
	trigger = {
		tag = TUR
		has_war_with = GRE
		has_global_flag = TUR_invasion_of_GRE_mission
		NOT = {
			has_global_flag = great_war
			has_country_flag = TUR_informed_of_the_invasion_mission
		}
	}
	mean_time_to_happen = {
		days = 14
	}
	immediate = {
		set_country_flag = TUR_informed_of_the_invasion_mission
	}
	fire_only_once = yes
	##
	option = {
		name = ww1_firstbalkan.30.a		## We must conquer them all!
		add_political_power = -200
		add_stability = -0.2
		add_war_support = -0.2
		ai_chance = {
			base = 100
			modifier = {
				add = 50
				has_government = fascism
			}
			modifier = {
				add = 50
				has_war_support > 0.6
			}
			modifier = {
				add = 75
				has_war_support > 0.7
			}
			modifier = {
				add = 100
				has_war_support > 0.8
			}
			modifier = {
				factor = 0
				has_war_support < 0.25
			}
			modifier = {
				factor = 0
				surrender_progress > 0.5
			}
		}
	}
	option = {
		name = ww1_firstbalkan.30.b		##heu lets go peace deal
		ai_chance = {
			base = 70
			modifier = {
				add = 50
				has_government = democratic
			}
			modifier = {
				add = 50
				has_war_support < 0.4
			}
			modifier = {
				add = 100
				surrender_progress > 0.15
			}
			modifier = {
				add = 200
				surrender_progress > 0.3
			}
		}
		# territory transfer
		every_owned_state = {
			limit = {
				is_claimed_by = GRE
				is_controlled_by = GRE
			}
			transfer_state_to = GRE
		}
		if = {
			limit = {
				country_exists = CRE
			}
			if = {
				limit = {
					CRE = {
						is_subject_of = GRE
						has_capitulated = yes
					}
					182 = {
						is_controlled_by_ROOT_or_ally = yes
					}
				}
				annex_country = {
					target = CRE
				}
				else = {
					GRE = {
						annex_country = {
							target = CRE
							transfer_troops = yes
						}
					}
				}
			}
		}
		# peace
		every_country = {
			limit = {
				OR = {
					tag = ROOT
					has_war_together_with = ROOT
				}
				has_war_with = GRE
			}
			set_truce = {
				target = GRE
				days = 180
			}
			white_peace = GRE
		}
		hidden_effect = {
			GRE = {
				if = {
					limit = {
						is_faction_leader = yes
					}
					dismantle_faction = yes
					else_if = {
						limit = {
							has_war = no
						}
						leave_faction = yes
					}
				}
			}
		}
	}
}

#ottomans refused balkan coalition conditions ! 
country_event = {
	id = ww1_firstbalkan.31
	title = ww1_firstbalkan.31.t
	desc = ww1_firstbalkan.31.d
	picture = GFX_report_event_generic_conference
	fire_only_once = yes
	is_triggered_only = yes
	trigger = {
		is_in_array = {
			array = global.anti_ottoman_coalition
			value = THIS
		}
		has_global_flag = TUR_oppose_the_coalition
		NOT = {
			has_country_flag = ROOT_informed_TUR_opposition_to_balkan_coalition
		}
	}
	immediate = {
		set_country_flag = ROOT_informed_TUR_opposition_to_balkan_coalition
	}
	##
	option = {
		name = ww1_firstbalkan.30.a
		if = {
			limit = {
				tag = RUS
			}
			create_wargoal = {
				target = TUR
				type = topple_government
			}
			effect_tooltip = {
				AUS = {
					create_wargoal = {
						target = TUR
						type = topple_government
					}
				}
			}
		}
		if = {
			limit = {
				tag = AUS
			}
			create_wargoal = {
				target = TUR
				type = topple_government
			}
			effect_tooltip = {
				RUS = {
					create_wargoal = {
						target = TUR
						type = topple_government
					}
				}
			}
		}
		else = {
			effect_tooltip = {
				RUS = {
					create_wargoal = {
						target = TUR
						type = topple_government
					}
				}
				AUS = {
					create_wargoal = {
						target = TUR
						type = topple_government
					}
				}
			}
		}
		add_ai_strategy = {
			type = conquer
			id = TUR
			value = 200
		}
		add_ai_strategy = {
			type = antagonize
			id = TUR
			value = 100
		}
		add_ai_strategy = {
			type = declare_war
			id = TUR
			value = 100
		}
		ai_chance = {
			base = 100
			# we are not good
			modifier = {
				add = -30
				is_major = no
			}
			modifier = {
				add = -30
				strength_ratio = {
					tag = TUR
					ratio < 1
				}
			}
			# not enough to go war
			modifier = {
				add = -30
				threat < 0.15
			}
			modifier = {
				add = -30
				has_war_support < 0.15
			}
		}
	}
}

#auto remove the ottoman claim discussion
country_event = {
	id = ww1_firstbalkan.32
	title = ww1_firstbalkan.32.t
	desc = ww1_firstbalkan.32.d
	hidden = yes
	picture = GFX_report_event_generic_conference
	trigger = {
		has_global_flag = is_discussing_about_balkan_minor
	}
	mean_time_to_happen = {
		days = 30
	}
	immediate = {
		clr_global_flag = is_discussing_about_balkan_minor
	}
	##
	option = {
		name = ok
		clr_global_flag = is_discussing_about_balkan_minor
	}
}

# Greece annexs Crete
country_event = {
	id = ww1_firstbalkan.33
	title = ww1_firstbalkan.33.t
	desc = ww1_firstbalkan.33.d
	picture = GFX_report_event_gre_athens
	is_triggered_only = yes
	# fire_only_once = yes
	# trigger = {
	# 	original_tag = GRE
	# 	has_subject = CRE
	# 	has_country_flag = BW1_winner
	# }
	#mean_time_to_happen = { days = 0 }
	option = {
		name = ww1_firstbalkan.33.a
		annex_country = {
			target = CRE
			transfer_troops = yes
		}
	}
}

# FROM joined the coalition
country_event = {
	id = ww1_firstbalkan.34
	title = ww1_firstbalkan.34.t
	desc = ww1_firstbalkan.34.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	option = {
		name = ww1_firstbalkan.34.a
		add_political_power = 10
	}
}

# FROM refused the coalition
country_event = {
	id = ww1_firstbalkan.35
	title = ww1_firstbalkan.35.t
	desc = ww1_firstbalkan.35.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	option = {
		name = ww1_firstbalkan.35.a
		add_political_power = -5
	}
}

#########################################
#
#
#	MONTENEGRO PART
#
#######################
# ENG discussion about a minor balkan country = Montenegro
country_event = {
	id = ww1_firstbalkan.36
	title = ww1_firstbalkan.36.t
	desc = ww1_firstbalkan.36.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	immediate = {
		if = {
			limit = {
				check_variable = {
					id = global.MNT_coalition_fate_integrated_puppet
				}
			}
			else = {
				##setting up votes 
				set_variable = {
					id = global.MNT_coalition_fate_integrated_puppet
					value = 0
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					id = global.MNT_coalition_fate_annexed
				}
			}
			else = {
				##setting up votes 
				set_variable = {
					id = global.MNT_coalition_fate_annexed
					value = 0
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					id = global.MNT_coalition_fate_reparations
				}
			}
			else = {
				##setting up votes 
				set_variable = {
					id = global.MNT_coalition_fate_reparations
					value = 0
				}
			}
		}
	}
	## Ottoman may puppet
	option = {
		name = ww1_firstbalkan.36.b		## No
		add_to_variable = {
			var = global.montenegro_puppet
			value = 1
		}
		ai_chance = {
			factor = 10			#This is what ottomans want
			modifier = {
				is_in_faction_with = TUR				## puppet is the best for our friend
				add = 100
			}
			modifier = {
				has_opinion = {
					target = TUR
					value > 50
				}
				add = 20				#friendly country
			}
		}
	}
	## Ottoman may do whatever they want
	option = {
		name = ww1_firstbalkan.36.c		## No
		add_to_variable = {
			var = global.montenegro_annex
			value = 1
		}
		ai_chance = {
			factor = 5			#low chances
			modifier = {
				is_in_faction_with = TUR				##its very good
				add = 200
			}
			modifier = {
				has_opinion = {
					target = TUR
					value > 100
				}
				add = 20				#must be very friendly
			}
		}
	}
	## Ottoman may just ask reparations
	option = {
		name = ww1_firstbalkan.36.e		## No
		add_to_variable = {
			var = global.montenegro_reparations
			value = 1
		}
		ai_chance = {
			factor = 15			#strong base
			modifier = {
				is_in_faction_with = TUR				##thats shit
				add = -100
			}
			modifier = {
				has_opinion = {
					target = TUR
					value > 50
				}
				add = -20				#friendly country
			}
		}
	}
}

# montenegrin fate is sealed
country_event = {
	id = ww1_firstbalkan.37
	title = ww1_firstbalkan.37.t
	desc = ww1_firstbalkan.37.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	immediate = {
		MNT = {
			set_country_flag = fate_sealed_by_anti_ottoman_balkan_coalition
		}
	}
	option = {
		name = ww1_firstbalkan.37.b
		trigger = {
			check_variable = {
				var = global.montenegro_puppet
				value = global.montenegro_annex
				compare = greater_than_or_equals
			}
			check_variable = {
				var = global.montenegro_puppet
				value = global.montenegro_reparations
				compare = greater_than_or_equals
			}
		}
		if = {
			limit = {
				OR = {
					tag = AUS
					tag = RUS
				}
			}
			custom_effect_tooltip = if_tur_refuse_we_will_get_a_war_goal
		}
		if = {
			limit = {
				is_in_array = {
					array = global.anti_ottoman_coalition_leaders
					value = ROOT
				}
			}
			TUR = {
				country_event = {
					days = 2
					id = ww1_firstbalkan.38
				}
			}
		}
	}
	option = {
		name = ww1_firstbalkan.37.c
		trigger = {
			check_variable = {
				var = global.montenegro_annex
				value = global.montenegro_puppet
				compare = greater_than
			}
			check_variable = {
				var = global.montenegro_annex
				value = global.montenegro_reparations
				compare = greater_than
			}
		}
		if = {
			limit = {
				is_in_array = {
					array = global.anti_ottoman_coalition_leaders
					value = ROOT
				}
			}
			TUR = {
				country_event = {
					days = 2
					id = ww1_firstbalkan.39
				}
			}
		}
		if = {
			limit = {
				OR = {
					tag = AUS
					tag = RUS
				}
			}
			custom_effect_tooltip = if_tur_refuse_we_will_get_a_war_goal
		}
	}
	option = {
		name = ww1_firstbalkan.37.e
		trigger = {
			check_variable = {
				var = global.montenegro_reparations
				value = global.montenegro_puppet
				compare = greater_than
			}
			check_variable = {
				var = global.montenegro_reparations
				value = global.montenegro_annex
				compare = greater_than_or_equals
			}
		}
		if = {
			limit = {
				is_in_array = {
					array = global.anti_ottoman_coalition_leaders
					value = ROOT
				}
			}
			TUR = {
				country_event = {
					days = 2
					id = ww1_firstbalkan.40
				}
			}
		}
		if = {
			limit = {
				OR = {
					tag = AUS
					tag = RUS
				}
			}
			custom_effect_tooltip = if_tur_refuse_we_will_get_a_war_goal
		}
	}
	option = {
		name = another_vote
		trigger = {
			NOT = {
				AND = {
					check_variable = {
						global.MNT_coalition_fate_reparations > global.MNT_coalition_fate_integrated_puppet
					}
					check_variable = {
						global.MNT_coalition_fate_reparations > global.MNT_coalition_fate_annexed
					}
				}
				AND = {
					check_variable = {
						global.MNT_coalition_fate_integrated_puppet > global.MNT_coalition_fate_reparations
					}
					check_variable = {
						global.MNT_coalition_fate_integrated_puppet > global.MNT_coalition_fate_annexed
					}
				}
				AND = {
					check_variable = {
						global.MNT_coalition_fate_annexed > global.MNT_coalition_fate_integrated_puppet
					}
					check_variable = {
						global.MNT_coalition_fate_annexed > global.MNT_coalition_fate_integrated_puppet
					}
				}
			}
		}
		MNT = {
			clr_country_flag = fate_sealed_by_anti_ottoman_balkan_coalition
		}
	}
}

#coalition let TUR get a montenegrin puppet BUL_coalition_fate_integrated_puppet
country_event = {
	id = ww1_firstbalkan.38
	title = ww1_firstbalkan.38.t
	desc = ww1_firstbalkan.38.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		set_country_flag = TUR_reaction_to_MNT_capitulation
	}
	##
	option = {
		name = ww1_firstbalkan.38.a		## we have no other choices
		if = {
			limit = {
				MNT = {
					exists = no
				}
			}
			MNT = {
				transfer_state = 105
			}
		}
		set_autonomy = {
			target = MNT
			autonomous_state = autonomy_puppet
			freedom_level = 0.2
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = ww1_firstbalkan.16.b		##
		effect_tooltip = {
			RUS = {
				create_wargoal = {
					target = TUR
					type = topple_government
				}
			}
			AUS = {
				create_wargoal = {
					target = TUR
					type = topple_government
				}
			}
		}
		every_country = {
			limit = {
				is_in_array = {
					array = global.anti_ottoman_coalition
					value = THIS
				}
			}
			country_event = ww1_firstbalkan.31
		}
		set_global_flag = TUR_oppose_the_coalition
	}
}

#coalition let TUR annex Montenegro ! MNT_coalition_fate_annexed
country_event = {
	id = ww1_firstbalkan.39
	title = ww1_firstbalkan.39.t
	desc = ww1_firstbalkan.39.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		set_country_flag = TUR_reaction_to_MNT_capitulation
	}
	##
	option = {
		name = ww1_firstbalkan.39.a		## cool
		if = {
			limit = {
				MNT = {
					is_subject_of = TUR
				}
			}
			TUR = {
				end_puppet = MNT
			}
		}
		TUR = {
			annex_country = {
				target = MNT
				transfer_troops = yes
			}
		}
		every_state = {
			limit = {
				OR = {
					is_claimed_by = MNT
					is_core_of = MNT
				}
			}
			add_claim_by = TUR
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		## we are fine with the puppet
		name = ww1_firstbalkan.39.b		##
	}
}

#coalition just ask Montenegro to pay reparation... MNT_coalition_fate_reparations
country_event = {
	id = ww1_firstbalkan.40
	title = ww1_firstbalkan.40.t
	desc = ww1_firstbalkan.40.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		set_country_flag = TUR_reaction_to_BUL_capitulation
	}
	##
	option = {
		name = ww1_firstbalkan.40.a		## wtf okay...
		ai_chance = {
			factor = 100
		}
		if = {
			limit = {
				MNT = {
					exists = no
				}
			}
			MNT = {
				transfer_state = 105
			}
		}
		if = {
			limit = {
				MNT = {
					is_subject_of = TUR
				}
			}
			TUR = {
				end_puppet = MNT
			}
			MNT = {
				drop_cosmetic_tag = yes
			}
		}
		TUR_remove_debt_2360 = yes
		MNT = {
			diplomatic_relation = {
				country = TUR
				relation = non_aggression_pact
			}
			add_timed_idea = {
				idea = TUR_paying_war_reparations
				days = 548
			}
		}
	}
	option = {
		## fuck you uk
		name = ww1_firstbalkan.40.b		##
		effect_tooltip = {
			RUS = {
				create_wargoal = {
					target = TUR
					type = topple_government
				}
			}
			AUS = {
				create_wargoal = {
					target = TUR
					type = topple_government
				}
			}
		}
		every_country = {
			limit = {
				is_in_array = {
					array = global.anti_ottoman_coalition
					value = THIS
				}
			}
			country_event = ww1_firstbalkan.31
		}
		set_global_flag = TUR_oppose_the_coalition
	}
}

# Foreign support for the Balkan War participants
country_event = {
	id = ww1_firstbalkan.41
	title = ww1_firstbalkan.41.t
	desc = ww1_firstbalkan.41.d
	picture = GFX_report_event_generic_rifles
	is_triggered_only = yes
	option = {
		name = ww1_firstbalkan.41.a
		effect_tooltip = {
			add_equipment_to_stockpile = {
				type = infantry_equipment_1
				amount = 2000
			}
		}
	}
}

# The Great Powers Intervene the Balkan War
news_event = {
	id = ww1_firstbalkan.42
	title = ww1_firstbalkan.42.t
	desc = ww1_firstbalkan.42.d
	picture = GFX_news_event_generic_parliament
	major = yes
	is_triggered_only = yes
	option = {
		name = ww1_firstbalkan.42.a
		trigger = {
			tag = TUR
		}
	}
	option = {
		name = ww1_firstbalkan.42.a
		trigger = {
			NOT = {
				tag = TUR
			}
		}
	}
}

# Preventing League members from collapsing just because Bulgaria has
country_event = {
	id = ww1_firstbalkan.100
	hidden = yes
	is_triggered_only = yes
	trigger = {
		is_in_faction_with = BLL
		OR = {
			tag = SER
			tag = BUL
			tag = GRE
			tag = ROM
		}
		NOT = {
			has_country_flag = balkan_league_major
		}
	}
	option = {
		set_country_flag = balkan_league_major
		set_major = yes
	}
}

# Re-setting their major status
country_event = {
	id = ww1_firstbalkan.101
	hidden = yes
	is_triggered_only = yes
	trigger = {
		has_country_flag = belgrade_pact_major
		OR = {
			has_war = no
			is_in_faction = no
			NOT = {
				faction_leader = {
					tag = BLL
				}
			}
		}
	}
	option = {
		clr_country_flag = balkan_league_major
		set_major = no
	}
}

# greek occupation of nothern epirus
country_event = {
	id = ww1_firstbalkan.50
	title = ww1_firstbalkan.50.t
	desc = ww1_firstbalkan.50.d
	picture = GFX_french_parliament
	trigger = {
		tag = GRE
		has_war = no
		has_country_flag = kis_secondbalkan_war_winner
		803 = {
			OR = {
				is_controlled_by_ROOT_or_ally = yes
				is_controlled_by = ALB
			}
		}
		NOT = {
			has_global_flag = GRE_surrender_in_balkan_war
		}
		NOT = {
			has_country_flag = GRE_decision_on_nothern_epirus
		}
		NOT = {
			has_completed_focus = GRE_florence_protocol
		}
	}
	immediate = {
		set_country_flag = GRE_decision_on_nothern_epirus
	}
	fire_only_once = yes
	mean_time_to_happen = {
		days = 24
	}
	option = {
		name = ww1_firstbalkan.50.a
		transfer_state = 803
		ai_chance = {
			factor = 50
		}
	}
}

# situation over nothern Epirus from austria
country_event = {
	id = ww1_firstbalkan.51
	title = ww1_firstbalkan.51.t
	desc = ww1_firstbalkan.51.d
	picture = GFX_french_parliament
	trigger = {
		tag = AUS
		is_subject = no
		NOT = {
			has_country_flag = great_war_loser
		}
		803 = {
			is_owned_and_controlled_by = GRE
		}
		GRE = {
			has_country_flag = GRE_decision_on_nothern_epirus
			has_war = no
			is_subject = no
			NOT = {
				has_completed_focus = GRE_florence_protocol
			}
		}
		NOT = {
			has_country_flag = AUH_ITA_BUL_reaction_to_GRE_occupation_of_nothern_epirus
		}
	}
	immediate = {
		set_country_flag = AUH_ITA_BUL_reaction_to_GRE_occupation_of_nothern_epirus
	}
	mean_time_to_happen = {
		days = 24
	}
	option = {
		name = ww1_firstbalkan.51.a
		custom_effect_tooltip = GRE_will_have_150_days_to_free_epirus
		set_country_flag = ROOT_against_GRE_occupation_of_northern_epirus
		ITA = {
			if = {
				limit = {
					is_subject = no
					NOT = {
						has_war_with = ROOT
						has_guaranteed = GRE
						is_in_faction_with = GRE
					}
					NOT = {
						has_country_flag = AUH_ITA_BUL_reaction_to_GRE_occupation_of_nothern_epirus
					}
				}
				country_event = ww1_firstbalkan.53
			}	
		}
		GRE = {
			country_event = {
				id = ww1_firstbalkan.54
				days = 3
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 100
				is_historical_focus_on = yes
			}
		}
	}
}

# greece yeld
country_event = {
	id = ww1_firstbalkan.52
	title = ww1_firstbalkan.52.t
	desc = ww1_firstbalkan.52.d
	picture = GFX_french_parliament
	immediate = {
		set_global_flag = GRE_AUH_northern_epirus_problem_solved
	}
	is_triggered_only = yes
	option = {
		name = ww1_firstbalkan.52.a
	}
}

# situation over nothern Epirus from italy or bulgaria
country_event = {
	id = ww1_firstbalkan.53
	title = ww1_firstbalkan.51.t
	desc = ww1_firstbalkan.51.d
	picture = GFX_french_parliament
	is_triggered_only = yes
	option = {
		name = ww1_firstbalkan.51.a
		custom_effect_tooltip = GRE_will_have_150_days_to_free_epirus
		set_country_flag = ROOT_against_GRE_occupation_of_northern_epirus
		ai_chance = {
			factor = 50
			modifier = {
				factor = 100
				is_historical_focus_on = yes
			}
		}
	}
	option = {
		name = ww1_firstbalkan.51.b
		add_stability = -0.05
		ai_chance = {
			factor = 0
			modifier = {
				is_historical_focus_on = no
				factor = 25
			}
		}
	}
}


# situation over nothern Epirus from italy or bulgaria
country_event = {
	id = ww1_firstbalkan.54
	title = ww1_firstbalkan.51.t
	desc = ww1_firstbalkan.54.d
	picture = GFX_french_parliament
	is_triggered_only = yes
	option = {
		name = ww1_firstbalkan.54.a
		custom_effect_tooltip = GRE_will_have_150_days_to_free_epirus
		custom_effect_tooltip = GRE_get_out_of_epirus
	}
}

##Serbia gets the coast warning for Austria, will be triggered by on-actions
country_event = {
	id = ww1_firstbalkan.102
	title = ww1_firstbalkan.102.t
	desc = ww1_firstbalkan.102.d
	picture = GFX_report_event_generic_rifles
	fire_only_once = yes
	trigger = {
		tag = AUS
		has_war = no
		SER = {
			any_controlled_state = {
				is_coastal = yes
			}
		}
	}
	mean_time_to_happen = {
		days = 4
	}
	option = {
		name = ww1_firstbalkan.102.a
		SER = {
			country_event = {
				id = ww1_firstbalkan.103
				days = 1
			}
		}
		add_political_power = -5
		ai_chance = {
			base = 50
		}
	}
	option = {
		name = ww1_firstbalkan.102.b
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

##Serbia retreat from shore
country_event = {
	id = ww1_firstbalkan.103
	title = ww1_firstbalkan.103.t
	desc = ww1_firstbalkan.103.d
	picture = GFX_report_event_generic_rifles
	is_triggered_only = yes
	option = {
		name = ww1_firstbalkan.103.a
		trigger = {
			has_global_flag = macedonia_for_albania
		}
		BUL = {
			country_event = {
				id = ww1_firstbalkan.104
				days = 1
			}
		}
		ai_chance = {
			factor = 200
		}
	}
	option = {
		name = ww1_firstbalkan.103.b
		add_ideas = SER_idea_retreat_from_shore
		ai_chance = {
			base = 2
			modifier = {
				has_global_flag = macedonia_for_albania
				factor = 0
			}
		}
	}
}

##Bulgaria invited to stand on Serbia side
country_event = {
	id = ww1_firstbalkan.104
	title = ww1_firstbalkan.104.t
	desc = ww1_firstbalkan.104.d
	picture = GFX_report_event_generic_rifles
	is_triggered_only = yes
	option = {
		name = ww1_firstbalkan.104.a
		SER = {
			country_event = {
				id = ww1_firstbalkan.105
				days = 1
			}
		}
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
	option = {
		name = ww1_firstbalkan.104.b
		SER = {
			country_event = {
				id = ww1_firstbalkan.106
				days = 1
			}
		}
		ai_chance = {
			factor = 50
		}
	}
}

##Treaty reassured
country_event = {
	id = ww1_firstbalkan.105
	title = ww1_firstbalkan.105.t
	desc = ww1_firstbalkan.105.d
	picture = GFX_report_event_generic_rifles
	is_triggered_only = yes
	option = {
		name = ww1_firstbalkan.105.a
		AUS = {
			country_event = {
				id = ww1_firstbalkan.107
				days = 1
			}
		}
	}
}

##Bulgaria refused to stand on Serbia side
country_event = {
	id = ww1_firstbalkan.106
	title = ww1_firstbalkan.106.t
	desc = ww1_firstbalkan.106.d
	picture = GFX_report_event_generic_rifles
	is_triggered_only = yes
	option = {
		name = ww1_firstbalkan.106.a
		add_ideas = SER_idea_retreat_from_shore
	}
}

##Serbia defiant
country_event = {
	id = ww1_firstbalkan.107
	title = ww1_firstbalkan.107.t
	desc = ww1_firstbalkan.107.d
	picture = GFX_report_event_generic_rifles
	is_triggered_only = yes
	option = {
		name = ww1_firstbalkan.107.a
		add_political_power = -50
	}
	option = {
		name = ww1_firstbalkan.107.b
		add_political_power = 50
		add_war_support = -0.35
		add_stability = -0.35
		declare_war_on = {
			target = SER
			type = annex_everything
		}
		ai_chance = {
			factor = 0
		}
	}
}

#Serbia claims Ohrid
country_event = {
	id = ww1_firstbalkan.108
	title = ww1_firstbalkan.108.t
	desc = ww1_firstbalkan.108.d
	picture = GFX_report_event_generic_rifles
	is_triggered_only = yes
	trigger = {
		NOT = { owns_state = 203 }
	}
	option = {
		name = ww1_firstbalkan.108.a
		custom_effect_tooltip = historical_tt
		SER = {
			country_event = {
				id = ww1_firstbalkan.109
				days = 1
			}
		}
		ai_chance = {
			factor = 70
			modifier = {
				is_historical_focus_on = yes
				factor = 150
			}
		}
	}
	option = {
		name = ww1_firstbalkan.108.b
		unlock_national_focus = BUL_relative_hegemony
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0 #no room for compromise
				SER = { owns_state = 759 }
			}
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
		}
	}
}

#Bulgaria claims Ohrid
country_event = {
	id = ww1_firstbalkan.109
	title = ww1_firstbalkan.109.t
	desc = ww1_firstbalkan.109.d
	picture = GFX_report_event_generic_rifles
	is_triggered_only = yes
	option = {
		name = ww1_firstbalkan.109.a
		ai_chance = {
			base = 50
			modifier = {
				is_historical_focus_on = yes
				factor = 500
			}
		}
		custom_effect_tooltip = historical_tt
		add_state_claim = 759
		BUL = {
			country_event = {
				id = ww1_firstbalkan.110
				days = 1
			}
		}
	}
	option = {
		name = ww1_firstbalkan.109.b
		add_political_power = -50
		203 = {
			transfer_state_to = BUL
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 200
				OR = {
					any_character = {
						has_ideology = social_liberalism
						is_country_leader = yes
					}
					NOT = {
						has_idea = SER_idea_retreat_from_shore
					}
				}
			}
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
		}
		BUL = {
			country_event = ww1_firstbalkan.111
		}
	}
}

country_event = {
	id = ww1_firstbalkan.110
	title = ww1_firstbalkan.110.t
	desc = ww1_firstbalkan.110.d
	picture = GFX_report_event_generic_rifles
	is_triggered_only = yes
	option = {
		name = ww1_firstbalkan.110.a
		hidden_effect = {
			if = {
				limit = {
					is_faction_leader = yes
				}
				SER = {
					set_faction_leader = yes
				}
			}
			remove_opinion_modifier = {
				target = SER
				modifier = BUL_treaty_of_friendship
			}
			diplomatic_relation = {
				country = SER
				relation = guarantee
				active = no
			}
			SER = {
				remove_opinion_modifier = {
					target = ROOT
					modifier = BUL_treaty_of_friendship
				}
				diplomatic_relation = {
					country = ROOT
					relation = guarantee
					active = no
				}
			}
			diplomatic_relation = {
				country = SER
				relation = guarantee
				active = no
			}
		}
		set_country_flag = leave_balkan_league
	}
}

country_event = {
	id = ww1_firstbalkan.111
	title = ww1_firstbalkan.111.t
	desc = ww1_firstbalkan.111.d
	picture = GFX_report_event_generic_rifles
	is_triggered_only = yes
	option = {
		name = ww1_firstbalkan.111
		add_political_power = 50
		complete_national_focus = BUL_relative_hegemony
	}
}

news_event = {
	id = ww1_firstbalkan.112
	title = ww1_firstbalkan.112.t
	desc = ww1_firstbalkan.112.d
	picture = GFX_news_event_extermination_of_muslims
	major = yes
	fire_only_once = yes
	trigger = {
		NOT = { has_global_flag = explusion_of_muslims_from_the_balkans }
		OR = {
			has_global_flag = kis_firstbalkanwar_victory
			AND = {
				TUR = {
					NOT = {
						owns_state = 345
						controls_state = 345
						owns_state = 184
						controls_state = 184
						owns_state = 731
						controls_state = 731
					}
				}
				any_country = {
					OR = {
						original_tag = BUL
						original_tag = SER
						original_tag = MNT
						original_tag = GRE
						original_tag = ROM
					}
					owns_state = 345
					controls_state = 345
					owns_state = 184
					controls_state = 184
					owns_state = 731
					controls_state = 731
				}
			}
		}
	}
	immediate = {
		set_global_flag = explusion_of_muslims_from_the_balkans
	}
	option = {
		name = ww1_firstbalkan.112.a
		trigger = {
			original_tag = TUR
		}
		add_popularity = {
			ideology = fascism
			popularity = 0.05
		}
	}
	option = {
		name = ww1_firstbalkan.112.b
		trigger = {
			OR = {
				original_tag = BUL
				original_tag = SER
				original_tag = MNT
				original_tag = GRE
				original_tag = ROM
			}
		}
	}
	option = {
		name = ww1_firstbalkan.112.c
		trigger = {
			NOT = {
				original_tag = TUR
				original_tag = BUL
				original_tag = SER
				original_tag = MNT
				original_tag = GRE
				original_tag = ROM
			}
		}
	}
}

#Balkan league ultimatum to ottoman empire
country_event = {
	id = ww1_firstbalkan.113
	title = ww1_firstbalkan.113.t
	desc = ww1_firstbalkan.113.d
	picture = GFX_report_event_bul_military_parade_vidin
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_firstbalkan.113.a	#no
		trigger = {
			NOT = {
				has_game_rule = {
					rule = first_balkan_war_outcome
					option = TUR_FIRST_BALKAN_WAR_AVOIDED
				}
			}
		}
		FROM = {
			country_event = {
				id = ww1_firstbalkan.114
				days = 1
			}
		}
		ai_chance = {
			factor = 400
			modifier = {
				has_game_rule = {
					rule = first_balkan_war_outcome
					option = TUR_FIRST_BALKAN_WAR_AVOIDED
				}
				factor = 0
			}
		}
	}
	option = {
		name = ww1_firstbalkan.113.b	#yes
		trigger = {
			OR = {
				is_ai = yes
				is_debug = yes
				has_game_rule = {
					rule = first_balkan_war_outcome
					option = TUR_FIRST_BALKAN_WAR_AVOIDED
				}
			}
		}
		custom_effect_tooltip = TUR_dismantle_balkan_integrity
		FROM = {
			country_event = {
				id = ww1_firstbalkan.115
				days = 1
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				is_historical_focus_on = yes
				has_game_rule = {
					rule = first_balkan_war_outcome
					option = DEFAULT
				}
				factor = 0
			}
			modifier = {
				has_game_rule = {
					rule = first_balkan_war_outcome
					option = TUR_FIRST_BALKAN_WAR_AVOIDED
				}
				factor = 9999
			}
		}
	}
}

country_event = {
	id = ww1_firstbalkan.114
	title = ww1_firstbalkan.114.t
	desc = ww1_firstbalkan.114.d
	picture = GFX_report_event_bul_military_parade_vidin
	major = yes
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_firstbalkan.114.a	#no
		clr_global_flag = attack_TUR
		set_global_flag = kis_firstbalkan_war
		every_country = {
			limit = {
				is_in_faction_with = BLL
			}
			declare_war_on = {
				target = TUR
				type = take_state_focus
			}
			if = {
				limit = {
					country_exists = ALB
					ALB = {
						is_subject_of = TUR
					}
				}
				declare_war_on = {
					target = ALB
					type = annex_everything
				}
			}
		}
		news_event = ww1_firstbalkan.2
		hidden_effect = {
			add_named_threat = {
				threat = 5
				name = "First Balkan War"
			}
			756 = {
				add_claim_by = BUL
			}		
			SER = {
				add_state_claim = 106
				add_state_claim = 203
				country_event = {
					id = ww1_firstbalkan.118
					days = 10
				}
			}
			TUR = {
				country_event = {
					id = ww1_firstbalkan.3
					days = 42
				}
			}
		}
		BUL = {
			if = {
				limit = {
					has_country_flag = lozengradska_operacija
				}
				add_ideas = BUL_idea_lozengradska_operacija
			}
		}
		hidden_effect = {
			TUR = {
				country_event = {
					id = ottoman.212
					hours = 8
				}
			}
		}
	}
}

	
country_event = {
	id = ww1_firstbalkan.115
	title = ww1_firstbalkan.115.t
	desc = ww1_firstbalkan.115.d
	picture = GFX_report_event_bul_military_parade_vidin
	major = yes
	fire_only_once = yes
	is_triggered_only = yes
	immediate = {
		set_global_flag = BW1_avoided
	}
	option = {
		name = ww1_firstbalkan.115.a
		set_global_flag = kis_firstbalkanwar_victory
		every_country = {
			limit = {
				OR = {
					is_in_faction_with = BUL
					is_in_faction_with = SER
				}
			}
			set_country_flag = BW1_winner
		}
		hidden_effect = {
			if = {
				limit = {
					country_exists = IKR
				}
				TUR = { white_peace = IKR }
				GRE = {
					IKR = { get_current_government_type = yes }
					set_autonomy = {
						target = IKR
						autonomy_state = autonomy_tgwr_unilateral_union
					}
					IKR = {
						restore_previous_government_type = yes
						remove_ideas = standing_alone
					}
				}
			}
			TUR = {
				release_puppet = ALB
				ALB = {
					promote_character = TUR_ahmet_izzet
					add_popularity = {
						ideology = neutrality
						popularity = 0.10
					}
				}
				every_owned_state = {
					limit = {
						OR = {
							is_core_of = ALB
							is_core_of = SER
							is_core_of = MNT
							state = 758
						}
						NOT = {
							is_core_of = TUR
						}
					}
					transfer_state_to = ALB
				}
				every_owned_state = {
					limit = {
						OR = {
							state = 106
							state = 203
							state = 731
							state = 826
							state = 345
							state = 759
							state = 225
							state = 788
							state = 184
						}
					}
					transfer_state_to = MAC
					add_core_of = MAC
				}
				826 = {
					transfer_state_to = MAC
				}
				MAC = {
					set_politics = {
						ruling_party = neutrality
						elections_allowed = no
					}
					set_popularities = {
						democratic = 30
						neutrality = 60
						fascism = 10
						communism = 0
					}
					set_country_flag = turkish_concession
					set_cosmetic_tag = MAC_ottoman
				}
				TUR = {
					TUR_ahmet_izzet = {
						set_nationality = ALB
					}
				}
			}
			TUR = {
				ALB = {
					set_country_flag = protectorate
					add_ideas = TUR_wavering_ottoman_influence
				}
				set_autonomy = {
					target = ALB
					autonomous_state = autonomy_tgwr_protectorate
				}
				MAC = {
					set_country_flag = protectorate
					add_ideas = TUR_wavering_ottoman_influence
				}
				set_autonomy = {
					target = MAC
					autonomous_state = autonomy_tgwr_integrated_protectorate
				}
			}
			every_country = {
				limit = {
					has_country_flag = BW1_winner
				}
				give_guarantee = ALB
				give_guarantee = MAC
				set_truce = {
					target = ALB
					days = 365
				}
				set_truce = {
					target = MAC
					days = 365
				}
				set_truce = {
					target = TUR
					days = 365
				}
			}
			every_state = {
				limit = {
					OWNER = {
						is_subject_of = TUR
					}
					OR = {
						is_core_of = SER
						is_core_of = BUL
						is_core_of = GRE
						is_core_of = MNT
						is_core_of = MAC
					}
					NOT = {
						state = 345 #solun
						state = 871 #vlore
						state = 44 #albania
						state = 974 #samos
						state = 975 #ikaria
					}
				}
				set_demilitarized_zone = yes
			}
			transfer_units_fraction= {
				target = MAC
				size = 0
				stockpile_ratio = 0.01
				army_ratio = 0
				navy_ratio = 0
				air_ratio = 0
			}
			MAC = {
				transfer_navy = {
					target = TUR
				}
				add_named_threat = {
					threat = 1
					name = ww1_firstbalkan.117.t
				}
			}
			if = {
				limit = {
					ALB = {
						has_army_manpower = {
							size < 15000
						}
					}
				}
				transfer_units_fraction= {
					target = ALB
					size = 0
					stockpile_ratio = 0.015
					army_ratio = 0.1
					navy_ratio = 0
					air_ratio = 0
				}
				ALB = {
					transfer_navy = {
						target = TUR
					}
				}
			}
			BLL = {
				if = {
					limit = { has_war = no }
					dismantle_faction = yes
				}
			}
			news_event = {
				id = ww1_firstbalkan.117
				hours = 3
			}
		}
	}
}

# Lone Liberator news
news_event = {
	id = ww1_firstbalkan.116
	title = ww1_firstbalkan.2.t
	desc = ww1_firstbalkan.116.d
	picture = GFX_news_event_bulgarian_troops
	is_triggered_only = yes
	major = yes
	option = {
		name = ww1_firstbalkan.2.a
		if = {
			limit = {
				has_game_rule = {
					rule = rule_superevent
					option = DEFAULT
				}
				is_ai = no
			}
			hidden_effect = {
				play_song = "SE_balkan_war_1"
				set_country_flag = SE_balkan_war_1
			}
		}
	}
}

# Ottoman surrenders the Balkans news
news_event = {
	id = ww1_firstbalkan.117
	title = ww1_firstbalkan.117.t
	desc = ww1_firstbalkan.117.d
	picture = GFX_news_event_bulgarian_troops
	is_triggered_only = yes
	major = yes
	option = {
		name = ww1_firstbalkan.117.a
		trigger = {
			NOT = { original_tag = TUR }
		}
	}
	option = {
		name = ww1_firstbalkan.117.b
		trigger = {
			original_tag = TUR
		}
	}
}

# Serbian thieving notification
country_event = {
	id = ww1_firstbalkan.118
	title = ww1_firstbalkan.118.t
	desc = ww1_firstbalkan.118.d
	picture = GFX_report_event_yugoslavia_partisans
	is_triggered_only = yes
	trigger = {
		has_capitulated = no
		is_subject = no
		has_war = yes
		NOT = { owns_state = 203 }
		106 = { is_controlled_by_ROOT_or_ally = yes }
		203 = { is_controlled_by_ROOT_or_ally = yes }
	}
	option = {
		name = ww1_firstbalkan.118.a
		add_state_claim = 106
		add_state_claim = 203
		every_state = {
			limit = {
				state = 106
				state = 203
				is_controlled_by_ROOT_or_ally = yes
				NOT = { is_controlled_by = ROOT }
			}
			set_state_controller_to = ROOT
		}
	}
}