add_namespace = garibaldi

#Victor Emmannuel abdicates
country_event = {
	id = garibaldi.1
	title = garibaldi.1.t
	desc = garibaldi.1.d
	fire_only_once = yes
	picture = GFX_report_event_royal_parade
	mean_time_to_happen = {
		days = 14
	}
	trigger = {
		tag = ITA
		has_country_flag = great_war_loser
		OR = {
			has_global_flag = versallies_treaty
			has_global_flag = frankfurt_treaty
		}
		has_country_leader = {
		    name = "Vittorio Emanuele III"
		    ruling_only = no
		}
		NOT = {has_government = communism}
	}
	option = {
		name = garibaldi.1.a
		retire_ideology_leader = neutrality
		create_country_leader = { 
			name = "Umberto II"
			picture = "gfx/leaders/ITA/ITA_Umberto_II.dds"
			expire="1935.1.1" 
			ideology = autocracy
			traits = {} 
		}
		hidden_effect = {
			remove_ideas = victor_emmanuel
			news_event = { id = garibaldi.2 hours = 1 }
			country_event = { id = garibaldi.3 days = 6}
			country_event = { id = garibaldi.5 days = 19}
			SRD = {
				retire_ideology_leader = neutrality
				create_country_leader = { 
					name = "Umberto II"
					picture = "gfx/leaders/ITA/ITA_Umberto_II.dds"
					expire="1935.1.1" 
					ideology = autocracy
					traits = {} 
				}	
			}	
		}
	}
}
#Victor abdication news event
news_event = {
	id = garibaldi.2
	title = garibaldi.2.t
	desc = garibaldi.2.d
	picture = GFX_news_event_royal_visit
	major = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.2.a
	}
}
#Socialist riots in North Italy
country_event = {
	id = garibaldi.3
	title = garibaldi.3.t
	desc = garibaldi.3.d
	picture = GFX_report_event_generic_riot
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			every_state = {
				limit = {
					OR = {
						state = 39
						state = 157
						state = 158
						state = 159
						state = 160
						state = 161
						state = 162
						state = 735
						state = 833
						state = 834
						state = 835
					}
					is_owned_by = ITA
					is_controlled_by = ITA
				}
				set_demilitarized_zone = yes
			}

			add_popularity = { ideology = communism popularity = 0.2 }
		}
	}
	option = {
		name = garibaldi.3.a
		add_stability = -0.1
	}
}
#Republican Split
country_event = {
	id = garibaldi.4
	title = garibaldi.4.t
	desc = garibaldi.4.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_spain_civil_war_volunteers_02
	immediate = {
		hidden_effect = {
			create_dynamic_country = {
				original_tag = ITA
				every_state = {
					limit = {
						is_core_of = ROOT
					}
					add_core_of = PREV
				}
				set_capital = 161
				set_politics = {
					ruling_party = communism
					elections_allowed = no
				}
				set_popularities = {
					democratic = 17
					neutrality = 0
					fascism = 4
					communism = 79
				}
				set_country_flag = great_war_loser
				set_country_flag = ITA_socialist_italy_flag
				set_cosmetic_tag = SRI
				create_country_leader = { 
					name = "Giacinto Menotti Serrati"
					picture = "gfx/leaders/ITA/ITA_giacinto_menotti_serrati.dds" 
					expire="1935.1.1" 
					ideology = marxism 
					traits = { } 
				}
				set_party_name = {
					ideology = democratic
					long_name = ITA_democratic_reformist_party_long
					name = ITA_democratic_reformist_party
				}		
				create_corps_commander = {
					name = "Randolfo Pacciardi"
					portrait_path = "gfx/leaders/ITA/ITA_randolfo_pacciardi.dds"
					traits = {
						politically_connected
						trickster
						guerilla_fighter
					}
					skill = 3
					attack_skill = 2
					defense_skill = 3
					planning_skill = 2
					logistics_skill = 3
				}
				create_corps_commander = {
					name = "Edmondo Rossoni"
					portrait_path = "gfx/leaders/ITA/ITA_edmondo_rossoni.dds"
					traits = {
						career_officer
						organizer
					}
					skill = 2
					attack_skill = 2
					defense_skill = 1
					planning_skill = 1
					logistics_skill = 3
				}
				create_corps_commander = {
					name = "Arnaldo Azzi" 
					portrait_path = "gfx/leaders/ITA/ITA_arnaldo_azzi.dds" 
					traits = { } 
					skill = 1
					attack_skill = 1
					defense_skill = 1
					planning_skill = 1
					logistics_skill = 1
				}
                load_focus_tree = italian_focus
                load_focus_tree = { tree = italian_focus keep_completed = yes }		
                unlock_national_focus = ITA_vittoria_mutilata	
                unlock_national_focus = ITA_support_socialist_movenment			
                unlock_national_focus = ITA_prepare_for_revolution
                reserve_dynamic_country = yes				
			}
			every_state = {
				limit = {
					OR = {
						state = 157
						state = 158
						state = 159
						state = 161
						state = 162
						state = 160
						state = 833
						state = 39
						state = 834
						state = 735
					}
					is_owned_by = ROI
					is_controlled_by = ROI
				}
				SRI = {
					transfer_state = PREV
					remove_state_claim = PREV
					add_state_core = PREV
				}
			}
			SRI = {
				leave_faction = yes
				set_rule = { can_join_factions = no }
				inherit_technology = ROI
				add_ideas = ITA_death_before_surrender
			}
			ROI = {
				add_popularity = {
				   ideology = communism
   					popularity = -0.5
				}
				transfer_units_fraction= {
					target = SRI
					size = 0.6
					stockpile_ratio = 0.7
					army_ratio = 0.74
					navy_ratio = 0.4
					air_ratio = 0.6
					keep_unit_leaders_trigger = { 
					    OR = { has_id = 55007 has_id = 55008 has_id = 55009 has_id = 55011 has_id = 55012 }
					}
				}
				declare_war_on = {
 					target = SRI
					type = civil_war
				}
				if = {
					limit = {
						SRI = {owns_state = 162}
					}	
					set_province_controller = 6973
					162 = {
						create_unit = {
							division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
							owner = PREV
							prioritize_location = 6973
						}
					}
				}	
				if = {
					limit = {
						SRI = {owns_state = 160}
					}	
					set_province_controller = 11584
					set_province_controller = 3604
					set_province_controller = 6656
					160 = {
						create_unit = {
							division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
							owner = PREV
							prioritize_location = 11584
						}
						create_unit = {
							division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
							owner = PREV
							prioritize_location = 3604
						}
						create_unit = {
							division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
							owner = PREV
							prioritize_location = 6656
						}
					}
				}
				if = {
					limit = {
						SRI = {owns_state = 159}
					}
					set_province_controller = 11568
					set_province_controller = 6661
					159 = {
						create_unit = {
							division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
							owner = PREV
							prioritize_location = 11568
						}
						create_unit = {
							division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
							owner = PREV
							prioritize_location = 6661
						}
					}
				}
				if = {
					limit = {
						SRI = {owns_state = 158}
					}	
					set_province_controller = 11721
					set_province_controller = 770
					set_province_controller = 9738
					158 = {
						create_unit = {
							division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
							owner = PREV
							prioritize_location = 9738
						}
						create_unit = {
							division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
							owner = PREV
							prioritize_location = 770
						}
					}
				}
			}	
			ITS = {
				declare_war_on = {
 					target = SRI
					type = civil_war
				}	
			}	
		}		
	}
	option = {
		name = garibaldi.4.a
	}
	option = {
		name = garibaldi.4.b
		ai_chance = { factor = 0 }
		SRI = { change_tag_from = ROOT }
	}
}
#Republican coup 
country_event = {
	id = garibaldi.5
	title = garibaldi.5.t
	desc = garibaldi.5.d
	picture = GFX_report_event_saf_coup
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			ITA = {
				set_politics = {
					ruling_party = democratic
				}
				set_country_flag = ITA_republican_italy_flag
				set_cosmetic_tag = ROI
				add_popularity = { ideology = democratic popularity = 0.35 }
			}
			set_popularities = {
				democratic = 38
				neutrality = 25
				fascism = 9
				communism = 28
			}
			create_country_leader = { 
				name = "Francesco Saverio Nitti"
				picture = "gfx/leaders/ITA/ITA_francesco_saverio_nitti.dds" 
				expire="1935.1.1" 
				ideology = socialism
				traits = { } 
			}
			set_party_name = {
				ideology = neutrality
				long_name = ITA_neutrality_monarchist_party_long
				name = ITA_neutrality_monarchist_party
			}
			country_event = { id = garibaldi.6 days = 17 }
			clr_country_flag = color_democratic_italy
			every_state = {
				limit = {
					OR = {
						state = 115
						state = 117
						state = 156
					}
					is_owned_by = ITA
					is_controlled_by = ITA
				}
				set_demilitarized_zone = yes
			}
		}
	}	
	option = {
		name = garibaldi.5.a
		retire_ideology_leader = neutrality
		set_party_name = {
			ideology = democratic
			long_name = ITA_democratic_republican_party_long
			name = ITA_democratic_republican_party
		}
		add_stability = -0.05
		hidden_effect = { country_event = { id = garibaldi.6 days = 17 } }
	}
}
#Southern Monarchists declare restoration of the monarchy
country_event = {
	id = garibaldi.6
	title = garibaldi.6.t
	desc = garibaldi.6.d
	picture = GFX_report_event_ger_civil_war
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			create_dynamic_country = {
				original_tag = ITA
				every_state = {
					limit = {
						is_core_of = ROOT
					}
					add_core_of = PREV
				}
				set_capital = 117
				set_politics = {
					ruling_party = neutrality
					elections_allowed = no
				}
				set_popularities = {
					democratic = 31
					neutrality = 59
					fascism = 6
					communism = 4
				}
				set_party_name = {
					ideology = democratic
					long_name = ITA_democratic_ldr_party_long
					name = ITA_democratic_ldr_party
				}
				set_country_flag = great_war_loser
				set_country_flag = ITA_monarchist_italy_flag
				set_cosmetic_tag = ITS
				create_country_leader = { 
					name = "Provisional Government of Naples"
					picture = "gfx/leaders/ITA/ITA_Provisional_Government_of_Naples.dds" 
					expire="1935.1.1" 
					ideology = oligarchism
					traits = { } 
				}
                load_focus_tree = { tree = italian_focus keep_completed = yes }	
                reserve_dynamic_country = yes				
			}
			every_state = {
				limit = {
					OR = {
						state = 115
						state = 117
						state = 156
					}
					is_owned_by = ROI
					is_controlled_by = ROI
				}
				ITS = {
					transfer_state = PREV
					remove_state_claim = PREV
					add_state_core = PREV
				}
			}
			ITS = {
				inherit_technology = ROI		  
				leave_faction = yes
				set_rule = { can_join_factions = no }
				set_capital = 117
				add_ideas = ITA_death_before_surrender
				add_ideas = ITA_idea_mafia #The mafia was the strongest in Sicily.
				if = {
					limit = {
						ROI = {owns_state = 114}
					}	
				   set_province_controller = 11773
				}
				
				if = {
					limit = {
						ROI = {owns_state = 2}
					}	
					set_province_controller = 923
					set_province_controller = 11882
				}

				country_event = { id = garibaldi.8 days = 40 }
			}
			ROI = {
				remove_ideas = idea_army_restrictions
				remove_ideas = idea_armistice
				remove_ideas = ITA_ww1_Risorgimento
				leave_faction = yes
				set_rule = { can_join_factions = no }
				add_ideas = ITA_death_before_surrender
				remove_ideas = ww1_Scramble_for_Africa
				remove_ideas = ITA_idea_mafia
				remove_ideas = idea_italy_triple_alliance
				division_template = {
					name = "Milizia Repubblicana"
					is_locked = yes
					division_names_group = ITA_INF_01
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 0 y = 3 }
					}
				}
				add_popularity = {
				   ideology = neutrality
   					popularity = -0.5
				}
				declare_war_on = {
 					target = ITS
					type = civil_war
				}
				transfer_units_fraction= {
					target = ITS
					size = 0.4
					stockpile_ratio = 0.4
					army_ratio = 0.45
					navy_ratio = 0.5
					air_ratio = 0.35
					keep_unit_leaders_trigger = {           	                   						
					    NOT = {
							OR = { 
								has_trait = old_guard 
						   	 	has_trait = politically_connected
							}							
						}
					}
				}
				remove_unit_leader = 55004
				remove_unit_leader = 55006
				if = {
					limit = {
						ITS = {owns_state = 156}
					}
					set_province_controller = 10027
					set_province_controller = 3901	
				}
				if = {
					limit = {
						ITS = {owns_state = 117}
					}
					set_province_controller = 6980
					set_province_controller = 6939
					set_province_controller = 883
				}
				if = {
					limit = {
						ITS = {owns_state = 115}
					}	
					set_province_controller = 4014
				}	
				
				country_event = { id = garibaldi.4 days = 19}
			}
			every_state = {
				limit = {
					OR = {
						state = 2
						state = 115
						state = 117
						state = 156
						state = 157
						state = 158
						state = 159
						state = 160
						state = 161
						state = 162
						state = 735
						state = 833
						state = 834
						state = 835
					}
					is_owned_by = ROI
					is_controlled_by = ROI
				}
				set_demilitarized_zone = no
			}
			
			news_event = { id = garibaldi.7 hours = 1 }

			every_state = {
				limit = {
					is_core_of = LBA
					is_owned_by = ITA
				}
				LBA = {
					transfer_state = PREV
				}					
			}
			every_state = {
				limit = {
					is_core_of = SOM
					is_owned_by = ITA
				}
				SOM = {
					transfer_state = PREV
				}
			}
			if = {
				limit = {
					547 = {
						is_owned_by = ENG
					}
					792 = {
						is_owned_by = ITA
					}
				}
				ENG = {
					transfer_state = 792
				}
			}
			if = {
				limit = {
					547 = {
						is_owned_by = KEN
					}
					792 = {
						is_owned_by = ITA
					}
				}
				KEN = {
					transfer_state = 792
				}
			}
			if = {
				limit = {
					ETH = { exists = yes has_war = no NOT = {has_country_flag = great_war_loser}}		
				}	
				every_state = {
					limit = {
						is_core_of = ERI
						is_owned_by = ITA
					}
					ETH = {
						transfer_state = PREV
					}
				}
				else = {
					every_state = {
						limit = {
							is_core_of = ERI
							is_owned_by = ITA
						}
						ERI = {
							transfer_state = PREV
						}
					}
				}	
			}
			ROI = {
				every_state = {
					teleport_armies = {
						to_state_array = owned_controlled_states
					}
				}	
			}
			ITS = {
				every_state = {
					teleport_armies = {
						to_state_array = owned_controlled_states
					}
				
				}
			}
			if = {
				limit = {
					ITA = {owns_state = 114}
				}
				114 = {
					create_unit = {
						division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
						owner = ITA
						prioritize_location = 11874
					}
					create_unit = {
						division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
						owner = ITA
						prioritize_location = 902
					}
				}
			}
			if = {
				limit = {
					ITS = {owns_state = 156}
				}
				156 = {
					create_unit = {
					 	division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
						owner = ITA
						prioritize_location = 10027
					}
				}	
			}
			if = {
				limit = {
					ITS = {owns_state = 117}
				}
				117 = {
					create_unit = {
						division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
						owner = ITA
						prioritize_location = 6939
					}
					create_unit = {
						division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
						owner = ITA
						prioritize_location = 883
					}
				}
			}
			if = {
				limit = {
					ITS = {owns_state = 115}
				}	
				115 = {
					create_unit = {
						division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
						owner = ITA
						prioritize_location = 4014
					}
				}
			}

			set_global_flag = italian_civil_war
		}
	}
	#stay as republic
	option = {
		name = garibaldi.6.a
		ai_chance = { factor = 100 }
	}
	#For King and Stuff
	option = {
		name = garibaldi.6.b
		ai_chance = { factor = 0 }
		ITS = { change_tag_from = ROOT }
	}
}
#Italy fragmentation news event
news_event = {
	id = garibaldi.7
	title = garibaldi.7.t
	desc = garibaldi.7.d
	is_triggered_only = yes
	picture = GFX_news_event_fascist_militia
	major = yes
	option = {
		name = garibaldi.7.a
	}
}
# The coronation of the Kingdom of Italy
country_event = {
	id = garibaldi.8
	title = garibaldi.8.t
	desc = garibaldi.8.d
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			drop_cosmetic_tag = yes
			set_cosmetic_tag = ITS_bourbon
		}	
	}
	option = {
		name = garibaldi.8.a
		ITS = {
			add_stability = 0.1

			# Ferdinant III of Bourbon-Two Sicilies
			create_country_leader = { 
				name = "Ferdinando III"
				picture = "gfx/leaders/ITA/ITA_Ferdinant_III.dds"
				expire="1935.1.1" 
				ideology = despotism
				traits = { } 
			}
			set_party_name = {
				ideology = neutrality
				long_name = ITS_neutrality_party_long
				name = ITS_neutrality_party
			}
		}
	}
}
# Italian Republic choose their government after losing their mainland.
country_event = {
	id = garibaldi.9
	title = garibaldi.9.t
	desc = garibaldi.9.desc
	fire_only_once = yes
	trigger = {
		tag = ROI
		has_government = democratic
		has_war_with = SRI
		surrender_progress > 0.4
		NOT = { is_in_faction_with = ITS }
		controls_state = 114
		NOT = {
			any_state = {
				NOT = { state = 114}
				is_core_of = ROI
				is_controlled_by = ROI
			}
		}		
	}
	immediate = {
		hidden_effect = {
			set_capital = 114
		}
	}
	option = {
		name = garibaldi.9.a
		ai_chance = { factor = 10 }
		ROI = {
			set_politics = {
				ruling_party = fascism
			}
			add_popularity = {
 			    ideology = democratic
			    popularity = -0.3
			}
			hidden_effect = {
			    unlock_national_focus = ITA_vittoria_mutilata	
                unlock_national_focus = ITA_fascismo_movimento			
                unlock_national_focus = ITA_mussolini_cult	
				unlock_national_focus = ITA_blackshirt_veterans	
				unlock_national_focus = ITA_march_on_rome	
				unlock_national_focus = ITA_absorb_the_ani	
				
				
			}
		}
	}
	option = {
		name = garibaldi.9.b
		ai_chance = { factor = 15 }
		ROI = {
			add_war_support = 0.3
			add_stability = -0.07
		}
	}
	option = {
		ai_chance = { factor = 30 }
		name = garibaldi.9.c
		    every_state = {
				limit = {
					is_owned_by = ROI 
					is_fully_controlled_by = SRI
				}
				SRI ={
					transfer_state = PREV
				}
			}
			every_state = {
				limit = {
					is_owned_by = ROI 
					is_fully_controlled_by = ITS
				}
				ITS ={
					transfer_state = PREV
				}
			}
			every_state = {
				limit = {
					is_owned_by = ROI 
					is_controlled_by  = SRI
				}
				SRI ={
					transfer_state = PREV
				}
			}
			every_state = {
				limit = {
					is_owned_by = ROI 
					is_controlled_by  = ITS
				}
				ITS ={
					transfer_state = PREV
				}
			}
			every_state = {
				limit = {
					is_owned_by = ROI 
					is_core_of = ROI 
					NOT = { state = 114}
				}
				ITS ={
					transfer_state = PREV
				}
			}
			
			hidden_effect = {
				every_state = {
					limit = { 
					    OR = {
							is_core_of = ROI 
							is_claimed_by = ROI
						}
					}
					remove_core_of = ROI
					remove_claim_by = ROI
				}
				SRD = {
					transfer_state = 114
					add_state_core = 114
               
					annex_country = {
						target = ROI
						transfer_troops = yes
					}
					delete_units = {
				        division_template = "Milizia Repubblicana"
				        disband = yes
				    }
					change_tag_from = ROOT

					every_state = {
						teleport_armies = {
							to_state_array = owned_controlled_states
						}
					}				
				}
			}
	}
	option = {
		ai_chance = { factor = 30 }
		name = garibaldi.9.d
		
		ITS = {
			country_event = { id = garibaldi.21 days = 1 }
		}
	}
}
# French Commune supports Italian Socialist Republic
country_event = {
	id = garibaldi.10
	title = garibaldi.10.t
	desc = garibaldi.10.d
	fire_only_once = yes
	trigger = {
		tag = FRA
		FRA = {
			has_government = communism
			has_war = no
		}
		SRI = {
			has_government = communism
			exists = yes
			has_war_with = ITS
			surrender_progress > 0.5
		}
	}
	option = {
		name = garibaldi.10.a
		ai_chance = { factor = 100 }
		FRA = {
			give_guarantee = ITS
            add_to_war = {
				targeted_alliance = SRI
				enemy = ITS 
			}
		}

		hidden_effect = {
			FRA = {
				set_rule = { can_join_factions = yes }
				create_faction = internationale
				add_to_faction = SRI
			}

			if = {
				limit = {
					AUH = {
						exists = yes
						NOT = { has_war_with = SRI }
					}
				}

				AUH = {
					country_event = { id = garibaldi.11 days = 3 }
				}
			}
		}
	}
	option = {
		name = garibaldi.10.b
		ai_chance = { factor = 0 }
		FRA = {
			add_war_support = -0.1
			add_stability = -0.05
		}
	}
}
# The response of National France and Austria when French Commune intervenes Italian civil war
country_event = {
	id = garibaldi.11
	title = garibaldi.11.t
	desc = garibaldi.11.d
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.11.a
		ai_chance = { factor = 100 }
		ROOT = {
			declare_war_on = {
				target = FRA
				type = topple_government
			}
			add_war_support = 0.1
			add_stability = -0.02
		}
	}
	option = {
		name = garibaldi.11.b
		ai_chance = { factor = 0 }
		ROOT = {
			add_war_support = -0.1
			add_stability = -0.01
		}
	}
}
# Socialists control the Rome
country_event = {
	id = garibaldi.12
	title = garibaldi.12.t
	desc = garibaldi.12.d
	fire_only_once = yes
	mean_time_to_happen = { days = 1 }
	trigger = {
		tag = SRI
		SRI = {
			controls_state = 2
			has_war_with = ITS
		}
	}
	option = {
		name = garibaldi.12.a
		ai_chance = { factor = 50 }
		news_event = { id = garibaldi.13 days = 1 }
		add_stability = -0.1
		hidden_effect = {
			SRI = {
				add_named_threat = { threat = 5 name = garibaldi.13.t }
			}
			every_country = {
				limit = {
					OR = {
					    tag = AUH
						tag = AUS
						#tag = FRA
						#tag = HUN
						tag = SPR
						tag = POR
						#tag = CRO
						#tag = SLO
						tag = POL
						#tag = GAL
						#tag = CZE
						#tag = LIT
						tag = BRA
						tag = MEX
			        }
					NOT = { has_government = communism }
					exists = yes
					is_subject = no
			    }
				country_event = { id = garibaldi.14 days = 4 }
			}	
		}	
	}
	option = {
		name = garibaldi.12.b
		add_political_power = -50
		ai_chance = { factor = 50 }
	}
}
#Pope is killed
news_event = {
	id = garibaldi.13
	title = garibaldi.13.t
	desc = garibaldi.13.d
	#picture =
	major = yes
	is_triggered_only = yes
	option = {
		trigger = {
			tag = SRI
		}
		name = garibaldi.13.a
	}
	option = {
		trigger = {
			NOT = { tag = SRI }
		}
		name = garibaldi.13.b
	}
}
#Catholic countries issue ultimatum
country_event = {
	id = garibaldi.14
	title = garibaldi.14.t
	desc = garibaldi.14.d
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.14.a
		ai_chance = { 
		    factor = 70 
			modifier = {			
                has_war = yes
				factor = 0
			}
		}
		set_country_flag = catholic_crusader
		set_global_flag = catholic_crusader_is_here
	}
	option = {
		name = garibaldi.14.b
		ai_chance = { 
		    factor = 50 
			modifier = {			
                is_major = yes
				factor = 0
			}
	    }
		add_war_support = -0.1
		add_stability = -0.1
	}
}
#Ultimatum
country_event = {
	id = garibaldi.15
	title = garibaldi.15.t
	desc = garibaldi.15.d
	fire_only_once = yes
	trigger = {
		tag = SRI
		has_global_flag = catholic_crusader_is_here
	}
	mean_time_to_happen = { days = 5 }
	option = {
		name = garibaldi.15.a
		ai_chance = { factor = 100 }
		SRI = {
			country_event = { id = garibaldi.16 }
		}
	}
	option = {
		name = garibaldi.15.b
		ai_chance = { factor = 1 }
		every_country = {
			limit = {
				has_country_flag = catholic_crusader
			}
			declare_war_on = {
				target = SRI
				type = topple_government
			}
		}
	}
}
# Proposal of Peace Conference
country_event = {
	id = garibaldi.16
	title = garibaldi.16.t
	desc = garibaldi.16.d
	fire_only_once = yes
	trigger = {
		tag = ITS
		ITS = {
			has_war_with = SRI
			has_war_with = FRA
		}
	}
	mean_time_to_happen = { days = 5 }
	option = {
		name = garibaldi.16.a
		ai_chance = { factor = 100 }
		if = {
			limit = {
				tag = ITS
			}

			SRI = {
				country_event = { id = garibaldi.17 days = 7 }
			}

			if = {
				limit = {
					ROI {
						has_war_with = ITS
					}
				}
				ROI = {
					country_event = { id = garibaldi.17 days = 7 }
				}
			}
		}

		if = {
			limit = {
				tag = SRI
			}

			ITS = {
				country_event = { id = garibaldi.17 days = 7 }
			}

			if = {
				limit = {
					ROI = {
						has_war_with = SRI
					}
				}
				ROI = {
					country_event = { id = garibaldi.17 days = 7 }
				}
			}
		}
	}
	option = {
		name = garibaldi.16.b
		ai_chance = { factor = 0 }
		trigger = {
			NOT = { tag = SRI }
		}
		add_stability = -0.1
	}
}
# Response on Peace Conference
country_event = {
	id = garibaldi.17
	title = garibaldi.17.t
	desc = garibaldi.17.d
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.17.a
		ai_chance = { factor = 100 }

		every_state = {
			limit = {
				is_fully_controlled_by = SRI
			}

			set_state_flag = controled_by_socialists
		}

		every_state = {
			limit = {
				is_fully_controlled_by = ITS
			}

			set_state_flag = controled_by_monarchists
		}

		every_state = {
			limit = {
				is_fully_controlled_by = ROI
			}

			set_state_flag = controled_by_republicans
		}

		white_peace = FROM
		if = {
			limit = {
				tag = SRI
			}
			FRA = {
				white_peace = FROM

				if = {
					limit = {
						FRA = {
							has_war_with = NFA
						}
					}

					FRA = { white_peace = NFA }
				}

				if = {
					limit = {
						FRA = {
							has_war_with = AUH
						}
					}

					FRA = { white_peace = AUH }
				}
			}
		}
		if = {
			limit = {
				OR = {
					tag = ROI
					tag = ITS
				}
			}
			AUH = {
				white_peace = FROM

				if = {
					limit = {
						AUH = {
							has_war_with = FRA
						}
					}

					AUH = { white_peace = FRA }
				}
			}
			NFA = {
				white_peace = FROM

				if = {
					limit = {
						NFA = {
							has_war_with = FRA
						}
						459 = {
							is_core_of = NFA
						}
					}

					NFA = { white_peace = FRA }
				}
			}
		}
	}
	option = {
		name = garibaldi.17.b
		ai_chance = { factor = 0 }
		add_stability = -0.1
	}
}
# Aftermath of peace treaty
news_event = {
	id = garibaldi.18
	title = garibaldi.18.t
	desc = garibaldi.18.d
	fire_only_once = yes
	trigger = {
		ITA = {
			has_country_flag = great_war_loser
			OR = {
				has_global_flag = versallies_treaty
				has_global_flag = frankfurt_treaty
			}
		}
		SRI = {
			exists = yes
			has_war = no
		}
		ITS = {
			exists = yes
			has_war = no
		}
	}
	mean_time_to_happen = { days = 10 }
	major = yes
	immediate = {
		every_state = {
			limit = {
				has_state_flag = controled_by_socialists
			}

			SRI = {
				transfer_state = PREV
			}
		}

		every_state = {
			limit = {
				has_state_flag = controled_by_monarchists
			}

			ITS = {
				transfer_state = PREV
			}
		}

		every_state = {
			limit = {
				has_state_flag = controled_by_republicans
			}

			ITA = {
				transfer_state = PREV
			}
		}

		if = {
			limit = {
				SRI = {
					is_in_faction_with = FRA
				}
			}
			SRI = {
				leave_faction = yes
			}
		}

		every_country = {
			limit = {
				is_in_faction_with = ITS
				NOT = {
					OR = {
						tag = ROI
						tag = ITS
					}
				}
			}
			leave_faction = yes
		}

		if = {
			limit = {
				ITS = {
					is_in_faction = no
				}
			}
			ITS = {
				create_faction = italian_federation
			}
		}

		if = {
			limit = {
				ROI = {
					is_in_faction = no
				}
			}
			ITS = {
				add_to_faction = ROI
			}
		}

		if = {
			limit = {
				SRD = {
					is_in_faction = no
				}
			}
			ITS = {
				add_to_faction = SRD
			}
		}

		if = {
			limit = {
				SRI = {
					NOT = { is_in_faction = yes }
				}
			}
			SRI = {
				create_faction = italian_popular_front
			}
		}

		if = {
			limit = {
				ITS = { exists = yes }
			}
			ITS = {
				country_event = { id = garibaldi.19 days = 7 }
			}
		}

		if = {
			limit = {
				ROI = {
					exists = yes
				}
			}
			ROI = {
				country_event = { id = garibaldi.20 days = 7 }
			}
		}

		if = {
			limit = {
				any_country = {
					has_country_flag = catholic_crusader
				}
			}
			PAP = {
				add_state_core = 2
				add_state_core = 157
				add_state_core = 161
				add_state_core = 835
				transfer_state = 2
			}
		}

		if = {
			limit = {
				PAP = {
					exists = yes
				}
				ITS = {
					OR = {
						owns_state = 2
						owns_state = 157
						owns_state = 161
						owns_state = 835
					}
				}
			}

			PAP = {
				transfer_state = 2
				transfer_state = 834
			}
		}

		if = {
			limit = {
				PAP = {
					exists = yes
				}
				ROI = {
					OR = {
						owns_state = 2
						owns_state = 834
					}
				}
			}

			PAP = {
				transfer_state = 2
				transfer_state = 834
			}
		}

		if = {
			limit = {
				PAP = {
					exists = yes
				}
				SRI = {
					OR = {
						owns_state = 117
						owns_state = 156
					}
				}
			}

			157 = { set_demilitarized_zone = yes }
			835 = { set_demilitarized_zone = yes }

			ITS = {
				transfer_state = 117
				transfer_state = 156
			}
		}

		if = {
			limit = {
				PAP = {
					exists = yes
				}
			}

			ITS = {
				add_to_faction = PAP
			}
		}

		every_state = {
			limit = {
				is_owned_by = PAP
			}

			set_demilitarized_zone = yes
		}

		if = {
			limit = {
				PAP = {
					exists = yes
				}
				OR = {
					has_global_flag = pope_died
					date > 1922.1.22
				}
			}

			create_country_leader = { 
				name = "PAP_Pius_XI"
				picture = "gfx/leaders/ITA/PAP_Pius_XI.dds" 
				expire = "1935.1.1" 
				ideology = theocracy
				traits = { pope }
			}
		}
	}
	option = {
		name = garibaldi.18.a
		ai_chance = { factor = 100 }
	}
}
# Two Sicilies or not
country_event = {
	id = garibaldi.19
	title = garibaldi.19.t
	desc = garibaldi.19.d
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.19.a
		ai_chance = { factor = 80 }
		add_stability = 0.1
		hidden_effect = {

			every_state = {
				limit = {
					is_owned_by = ITS
					is_core_of = ITS
				}
				add_core_of = SIC
			}
			every_state = {
				limit = { 
					OR = {
						is_core_of = ITS 
						is_claimed_by = ITS
					}
				}
				remove_core_of = ITS
				remove_claim_by = ITS
			}

			SIC = {
				annex_country = {
					target = ITS
					transfer_troops = yes
				}
				change_tag_from = ITS
			}
		}
	}
	option = {
		name = garibaldi.19.b
		ai_chance = { factor = 20 }
		add_stability = -0.1
	}
}
# Sardinia or not
country_event = {
	id = garibaldi.20
	title = garibaldi.20.t
	desc = garibaldi.20.d
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.20.a
		ai_chance = { factor = 70 }
		set_cosmetic_tag = SRD
		add_stability = 0.2
		hidden_effect = {
			drop_cosmetic_tag = yes

			every_state = {
				limit = {
					is_owned_by = ROI
				}

				add_core_of = SRD
			}

			every_state = {
				limit = {
					is_claimed_by = ROI
				}

				add_claim_by = SRD
			}

			SRD = {
				add_state_core = 114
				add_state_core = 158
				add_state_core = 735
				add_state_core = 834

				annex_country = {
					target = ROI
					transfer_troops = yes
				}

				add_stability = 0.2

				change_tag_from = ROOT
			}
		}
	}
	option = {
		name = garibaldi.20.b
		ai_chance = { factor = 30 }
		add_stability = -0.1
	}
}
# Italian Federation
country_event = {
	id = garibaldi.21
	title = garibaldi.21.t
	desc = garibaldi.21.d
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.21.a
		ai_chance = { factor = 100 }

		ROI = {
			set_rule = { can_join_factions = yes }
			white_peace = ITS
		}
		ITS = {
			leave_faction = yes
			set_rule = { can_join_factions = yes }
			create_faction = italian_federation
			add_to_faction = ROI
		}
	}
	option = {
		name = garibaldi.21.b
		ai_chance = { factor = 0 }

		ROI = {
			country_event = { id = garibaldi.22 }
		}
	}
}
# Italian Federation is denied
country_event = {
	id = garibaldi.22
	title = garibaldi.22.t
	desc = garibaldi.22.d
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.22.a
		ai_chance = { factor = 100 }

		add_war_support = 0.01
		add_stability = -0.15
	}
}
# Socialists unify the Italy
news_event = {
	id = garibaldi.23
	title = garibaldi.23.t
	desc = garibaldi.23.d
	fire_only_once = yes
	trigger = {
		has_global_flag = italian_civil_war

		SRI = {
			exists = yes
			has_war = no
			owns_state = 115
			owns_state = 117
			owns_state = 2
		}
		ITS = {
			exists = no
		}
	}
	mean_time_to_happen = { days = 3 }
	major = yes
	immediate = {
		SRI = {
			add_stability = 10
			set_cosmetic_tag = ITA_communism
			set_capital = 2
			set_rule = { can_join_factions = yes }
		}
	}
	option = {
		name = garibaldi.23.a
		ai_chance = { factor = 100 }
		trigger = {
			has_government = communism
		}
	}
	option = {
		name = garibaldi.23.b
		ai_chance = { factor = 100 }
		trigger = {
			NOT = { has_government = communism }
		}
	}
}
# Monarchists unify the Italy
news_event = {
	id = garibaldi.24
	title = garibaldi.24.t
	desc = garibaldi.24.d
	fire_only_once = yes
	trigger = {
		has_global_flag = italian_civil_war

		SRI = {
			exists = no
		}
		ITS = {
			exists = yes
			has_war = no
			owns_state = 161
			owns_state = 2
		}
	}
	mean_time_to_happen = { days = 3 }
	major = yes
	immediate = {
		ITS = {
			add_stability = 10
			set_capital = 2
			set_rule = { can_join_factions = yes }
		}
	}
	option = {
		name = garibaldi.24.a
		ai_chance = { factor = 100 }
		trigger = {
			has_government = neutrality
		}
	}
	option = {
		name = garibaldi.24.b
		ai_chance = { factor = 100 }
		trigger = {
			has_government = communism
		}
	}
}
# Republicans unify the Italy
news_event = {
	id = garibaldi.25
	title = garibaldi.25.t
	desc = garibaldi.25.d
	fire_only_once = yes
	trigger = {
		has_global_flag = italian_civil_war

		ROI = {
			owns_state = 115
			owns_state = 117
			owns_state = 161
			owns_state = 2
		}
		SRI = {
			exists = no
		}
		ITS = {
			exists = no
		}
	}
	mean_time_to_happen = { days = 3 }
	major = yes
	immediate = {
		ROI = {
			add_stability = 10
			set_capital = 2
			set_rule = { can_join_factions = yes }
		}
	}
	option = {
		name = garibaldi.25.a
		ai_chance = { factor = 100 }
		trigger = {
			has_government = democratic
		}
	}
	option = {
		name = garibaldi.25.b
		ai_chance = { factor = 100 }
		trigger = {
			NOT = { has_government = democratic }
		}
	}
}
# Italy is devided by the Republicans and Monarchists
country_event = {
	id = garibaldi.26
	title = garibaldi.26.t
	desc = garibaldi.26.d
	fire_only_once = yes
	trigger = {
		tag = ITS
		has_global_flag = italian_civil_war

		ROI = {
			has_war = no
			is_subject = no

			OR = {
				owns_state = 158
				owns_state = 161
			}
		}
		SRI = {
			exists = no
		}
		ITS = {
			has_war = no
			is_subject = no
			owns_state = 2
		}
	}
	mean_time_to_happen = { days = 3 }
	option = {
		name = garibaldi.26.a
		ai_chance = { factor = 30 }
		set_rule = { can_join_factions = no }
		dismantle_faction = yes

		declare_war_on = {
			target = ROI
			type = civil_war
		}

		ROI = {
			set_rule = { can_join_factions = no }
		}
	}
	option = {
		name = garibaldi.26.b
		ai_chance = { factor = 70 }
		ROI = { country_event = { id = garibaldi.27 days = 3 } }
	}
}
# Italy is devided by the Republicans and Monarchists
country_event = {
	id = garibaldi.27
	title = garibaldi.27.t
	desc = garibaldi.27.d
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.27.a
		ai_chance = { factor = 15 }
		leave_faction = yes
		set_rule = { can_join_factions = no }
		declare_war_on = {
			target = ITS
			type = civil_war
		}

		ITS = {
			set_rule = { can_join_factions = no }
			dismantle_faction = yes
		}
	}
	option = {
		name = garibaldi.27.b
		ai_chance = { factor = 85 }

		if = {
			limit = {
				ROI = {
					owns_state = 158
				}
			}
			set_capital = 158
		}
	}
}
# Establish puppets on the North and Sardinia for the Kingdom of Two Sicilies 
news_event = {
	id = garibaldi.28
	title = garibaldi.28.t
	desc = garibaldi.28.d
	fire_only_once = yes
	trigger = {
		has_global_flag = italian_civil_war
		SIC = {
			has_war = no
			exists = yes
		}
		ITS = {
			exists = no
		}	

		ROI = {
			OR = {
				exists = no
				is_subject_of = SIC
			}
		}

		SRI = {
			OR = {
				exists = no
				is_subject_of = SIC
			}
		}
	}
	major = yes
	mean_time_to_happen = { days = 3 }
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					SRI = {is_subject_of = SIC}
				}
				SIC = {
					annex_country = {
						target = SRI
					}
				}
			}
			every_state = {
			    limit = {
				    is_owned_by = SIC
					OR = {
						state = 2
						state = 835
						state = 157
						state = 161
					}
				}	
				PAP = {
					transfer_state = PREV
					add_state_core = PREV
				}
			}
            every_state = {
			    limit = {
				    is_owned_by = SIC
					state = 833
				}	
				EMI = {
					transfer_state = PREV
					add_state_core = PREV
				}
			}
            every_state = {
			    limit = {
				    is_owned_by = SIC
					OR = {
						state = 114
						state = 158
					}
				}	
				SRD = {
					transfer_state = PREV
					add_state_core = PREV
				}
			}
			every_state = {
			    limit = {
				    is_owned_by = SIC
					state = 162
				}	
				TUS = {
					transfer_state = PREV
					  add_state_core = PREV
				}
			}
			every_country = {
			    limit = {
				    OR = {
						tag = EMI
						tag = SRD
						tag = TUS
					}
                    exists = no
				}	
				SIC = {puppet = PREV}
			}
			
			
            if = {
				limit = {
					SRD = {owns_state = 158}
				}
                SRD = {				
					set_capital = 158
					set_cosmetic_tag = SRD_PIE
					add_state_core = 735
				    add_state_core = 834
				}	
			}

			SIC = {
				set_rule = { can_join_factions = yes }
				create_faction = italian_federation
				add_to_faction = PAP
			}
		}
	}
	option = {
		name = garibaldi.28.a
		ai_chance = { factor = 100 }
		trigger = {
			OR = {
				original_tag = ITA
				original_tag = SIC
			}
		}
	}
	option = {
		name = garibaldi.28.b
		ai_chance = { factor = 100 }
		trigger = {
			NOT = { original_tag = ITA original_tag = SIC}
		}
	}
}
# National France supports Italian Republic
country_event = {
	id = garibaldi.29
	title = garibaldi.29.t
	desc = garibaldi.29.d
	fire_only_once = yes
	trigger = {
		tag = NFA
		NFA = {
			has_war = no
		}
		ITS = {
			exists = yes
			has_war_with = SRI
			surrender_progress > 0.5
		}
	}
	option = {
		name = garibaldi.29.a
		ai_chance = { factor = 100 }
		NFA = {
			give_guarantee = ITS

			every_country = {
				limit = {
					has_war_with = ITS
					NOT = {
						tag = ROI
					}
				}

				NFA = {
					declare_war_on = {
						target = PREV
						type = topple_government
					}
				}
			}
		}

		hidden_effect = {
			NFA = {
				set_rule = { can_join_factions = yes }
				create_faction = entente
				every_country = {
					limit = {
						is_in_faction_with = ITS
					}
					NFA = { add_to_faction = PREV }
				}
				add_to_faction = ITS
			}

			if = {
				limit = {
					FRA = {
						exists = yes
						NOT = { has_war_with = ITS }
					}
				}

				FRA = {
					country_event = { id = garibaldi.30 days = 3 }
				}
			}
		}
	}
	option = {
		name = garibaldi.29.b
		ai_chance = { factor = 0 }
		NFA = {
			add_war_support = -0.1
			add_stability = -0.05
		}
	}
}