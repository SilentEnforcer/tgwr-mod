add_namespace = ww1_poland

# Russian Color
####################
country_event = {
	id = ww1_poland.100
	
	trigger = {
		tag = POL
		POL = { is_subject_of = RUS }
		NOT = { has_global_flag = POL_RUS }
	}	
	mean_time_to_happen = {
		days = 0
	}

	hidden = yes

	immediate = {
		set_cosmetic_tag = POL_RUS
		set_global_flag = POL_RUS
	}
}

# Remove Russian Color
####################
country_event = {
	id = ww1_poland.101
	
	trigger = {
		tag = POL
		NOT = { POL = { is_subject_of = RUS } }
		has_global_flag = POL_RUS
	}	
	mean_time_to_happen = {
		days = 0
	}

	hidden = yes

	immediate = {
		drop_cosmetic_tag = yes
		clr_global_flag = POL_RUS
	}
}

# Unite with Galicia
####################
country_event = {
	id = ww1_poland.102
	
	trigger = {
		tag = POL
		is_subject = no
		GAL = { exists = yes is_subject = no }
	}	
	mean_time_to_happen = {
		days = 0
	}

	hidden = yes

	immediate = {
		POL = {
			annex_country = {
				target = GAL
				transfer_troops = yes
			}
		}
		every_state = {
			limit = { is_core_of = GAL }
			add_core_of = POL
		}
	}
}

# REPUBLIC OF POLAND
####################
country_event = {
    id = ww1_poland.1
	title = ww1_poland.1.t
	desc = ww1_poland.1.d
	picture = GFX_report_event_generic_military_parade
    fire_only_once = yes
	trigger = {
		tag = POL
		exists = yes			
		NOT = { 
			has_country_leader = { 
				name = "Józef Piłsudski" 
				ruling_only = yes 
			} 
			has_completed_focus = POL_declare_a_republic
			has_completed_focus = POL_kingdom
		}
		OR = {
		    is_subject = no
			AND = {
				is_subject_of = GER
				GER = { has_country_flag = great_war_loser }
				NOT = { has_global_flag = versallies_treaty}
			}
        }
	}
	mean_time_to_happen = { days = 1 }
	option = {
		name = ww1_poland.1.a
		trigger = {
			NOT = {has_completed_focus = POL_kingdom}
		}
		if = {
		    limit = {
                is_subject_of = GER
		    }
            GER = { end_puppet = POL}
            leave_faction = yes			
		}	
		create_country_leader = {
			name = "Józef Piłsudski"
			picture = "gfx/leaders/POL/POL_jozef_pilsudski.dds" 
			expire = "1935.1.1" 
			ideology = centrism
			traits = { 
			    nationalist_symbol 
				dislikes_russia 
			} 
		}
		set_cosmetic_tag = POL_republic
		hidden_effect = {			
            retire_ideology_leader = communism
			create_country_leader = {
				name = "Ignacy Daszyński"
				picture = "gfx/leaders/POL/POL_ignacy_daszynski.dds" 
				expire = "1935.1.1" 
				ideology = reformist_socialism
				 
			}			
		}	
		set_party_name = { ideology = neutrality name = POL_pilsudski_party long_name = POL_pilsudski_party}
		complete_national_focus = POL_declare_a_republic
		ai_chance = { factor = 100 }
	}
	option = {
		name = ww1_poland.1.b
		complete_national_focus = POL_kingdom
		trigger = {
			NOT = {has_completed_focus = POL_declare_a_republic}
		}
	}
}
#Poland Annexes Galicia - Undead Unicorn wuz here, fixed by Silent Enforcer
country_event = {
	id = ww1_poland.2
	title = ww1_poland.2.t
	desc = ww1_poland.2.d
	picture = GFX_report_event_generic_military_parade
	fire_only_once = yes
	trigger = {
		has_subject = POL
        has_subject = GAL	
	}
	option = {
		name = ww1_poland.2.a
		ai_chance = { factor = 95 }
		POL = {
			annex_country = {
 			   target = GAL
			    transfer_troops = yes
			}
		}
		if = {
			limit = {
				UKR = {
					is_subject_of = ROOT
					owns_state = 766
				}
			}
			POL = { transfer_state = 766 }
		}
	}
	option = {
		name = ww1_poland.2.b
		ai_chance = { factor = 5 }
		end_puppet = POL
		POL = {leave_faction = yes }
		hidden_effect = {
			POL = {
				set_politics = {
					ruling_party = communism
					elections_allowed = yes
				}
				add_popularity = {
				    ideology = communism
 				   popularity = 0.5
				}
				create_country_leader = { 
					name = "Józef Piłsudski"
					picture = "gfx/leaders/POL/POL_jozef_pilsudski.dds" 
					expire = "1935.1.1" 
					ideology = marxism
					traits = { 
					    revolutionary_general
					    dislikes_russia		
					} 
				}
				set_cosmetic_tag = POL_republic
			}
		}
		declare_war_on = {
			target = POL
			type = puppet_wargoal_focus
		}
	}
}
# Soviet Poland
####################
country_event = {
    id = ww1_poland.3
	title = ww1_poland.3.t
	desc = ww1_poland.3.d
	picture = GFX_report_event_soviet_soldiers
    fire_only_once = yes
	trigger = {
		original_tag = POL
		exists = yes			
		NOT = { has_country_leader = { name = "Józef Piłsudski" ruling_only = yes } }
		NOT = { has_cosmetic_tag = POL_SOVIET }
		has_government = communism
		SOV = {has_government = communism}
		OR = {
		    is_subject_of = SOV
			is_in_faction_with = SOV
        }
	}
	mean_time_to_happen = { days = 17 }
	option = {
		name = ww1_poland.3.a
		retire_ideology_leader = communism
		create_country_leader = {
			name = "Felix Dzerzhinsky"
			picture = "gfx/leaders/POL/POL_felix_dzerzhinsky.dds" 
			expire = "1935.1.1" 
			ideology = vanguardism
			traits = { prince_of_terror } 
		}
		set_party_name = { ideology = communism name = POL_polrewkom_party long_name = POL_polrewkom_party_long }
		set_cosmetic_tag = POL_SOVIET
	}
}
# Remove Soviet Poland
####################
country_event = {
    id = ww1_poland.4
	trigger = {
		original_tag = POL
		has_cosmetic_tag = POL_SOVIET
		NOT = { has_government = communism }
	}
	hidden = yes
	immediate = {
		retire_ideology_leader = communism
		create_country_leader = {
			name = "Ignacy Daszyński"
			picture = "gfx/leaders/POL/POL_ignacy_daszynski.dds" 
			expire = "1935.1.1" 
			ideology = reformist_socialism
			 
		}
		set_party_name = { ideology = communism name = POL_communism_party long_name = POL_communism_party_long }
		drop_cosmetic_tag = yes
	}
}