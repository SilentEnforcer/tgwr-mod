SER_black_hand_category = {
	SER_talks_with_pm = {
		allowed = {
			original_tag = SER
		}
		visible = {
			has_completed_focus = SER_paramilitary_question
			has_government = democratic
		}
		available = {
			OR = {
				has_country_flag = grand_coalition
				has_country_leader = {
					name = "Milovan Milovanović"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Ljubomir Stojanović"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Ljubomir Davidović"
					ruling_only = yes
				}
			}
		}
		complete_effect = {
			add_popularity = {
				ideology = fascism
				popularity = 0.02
			}
		}
		remove_effect = {
			# add_to_variable = {
			# 	black_hand_strength = 5
			# }
			add_to_variable = {
				black_hand_loyalty = 5
			}
			add_war_support = 0.05
		}
	}
	SER_nationalist_agitation = {
		allowed = {
			original_tag = SER
		}
		available = {
			check_variable = {
				black_hand_loyalty > 50
			}
			check_variable = {
				black_hand_strength > 30
			}
		}
		visible = {
			has_completed_focus = SER_support_black_hand
		}
		remove_effect = {
			AUH = {
				add_stability = -0.05
			}
		}
	}
}
SER_special_operations = {
	#SER_arranged_BOS_rebellion

	SER_form_yugoslavia = {
		name = SER_form_yugoslavia2
		icon = GFX_decision_ser_yugoslavia
		ai_will_do = {
			factor = 500
		}
		visible = {
			NOT = {
				has_country_flag = SER_yugoslavia_formed
			}
		}
		available = {
			tag = SER
			has_country_flag = SER_unification_of_yugoslavs
			
			
			custom_trigger_tooltip = {
				tooltip = SER_at_least_3_integrated_nations
				check_variable = {
					SER_integrated_nations > 2
				}
			}

		
		}
		
		days_remove = 3
		remove_effect = {
			
		}
		complete_effect = {
			custom_effect_tooltip = SER_integrated_count
			set_country_flag = SER_yugoslavia_formed
			set_cosmetic_tag = YUG
			
		}
	}

	SER_integrate_balkan_nations = {
		name = integrate_country
		target_trigger = {
			FROM = {
				OR = {
					tag = SLV
					tag = CRO
					tag = YUG
					tag = BOS
					tag = MAC
					tag = TRA
					tag = ALB
					tag = MNT
				}
			}
		}
		
		target_non_existing = yes
		ai_will_do = {
			factor = 500
		}
		visible = {
			NOT = {
				has_country_flag = SER_asked_us_to_merge
			}
		}
		available = {
			FROM = {
				exists = yes
			}
			tag = SER
			has_country_flag = SER_unification_of_yugoslavs
			FROM = {
				is_neighbor_of = SER
				is_puppet = no
			}
		}
		days_remove = 3
		remove_effect = {
		}
		complete_effect = {
			FROM = {
				set_country_flag = SER_asked_us_to_merge
				country_event = {
					id = ww1_serbia.102
					days = 2
				}
			}
			
		}
	}




	SER_ignite_bosnian_rebellion = {
		days_remove = 60
		cost = 100
		allowed = {
			original_tag = SER
		}
		ai_will_do = {
			factor = 100
		}
		available = {
			has_country_flag = BOS_rebellion_planed
			NOT = {
				has_country_flag = BOS_rebellion
			}
		}
		visible = {
			has_country_flag = BOS_rebellion_planed
			NOT = {
				has_country_flag = BOS_rebellion
			}
		}
		remove_effect = {
			set_country_flag = BOS_rebellion
			set_global_flag = SER_arranged_BOS_rebellion
			AUH = {
				country_event = {
					id = ww1_auh.53
					days = 2
				}
			}
		}
	}
	SER_join_bosnian = {
		cost = 25
		allowed = {
			original_tag = SER
		}
		ai_will_do = {
			factor = 100
		}
		available = {
			BOS = {
				has_war_with = AUH
			}
			NOT = {
				has_war_together_with = BOS
			}
			has_country_flag = BOS_rebellion
		}
		visible = {
			BOS = {
				has_war_with = AUH
			}
			NOT = {
				has_war_together_with = BOS
			}
			has_country_flag = BOS_rebellion
		}
		remove_effect = {
			add_to_war = {
				targeted_alliance = BOS 
				enemy = AUH 
			}
		}
	}
	SER_invest_into_bosnian_liberation_army = {
		days_remove = 30
		custom_cost_trigger = {
			command_power > 24
			has_political_power > 49
		}
		days_re_enable = 190
		custom_cost_text = decision_cost_CP_50_pp_50
		allowed = {
			original_tag = SER
		}
		ai_will_do = {
			factor = 100
		}
		available = {
			has_country_flag = BOS_rebellion_planed
			NOT = {
				has_country_flag = BOS_rebellion
			}
			BOS = {
				exists = no
			}
		}
		visible = {
			has_country_flag = BOS_rebellion_planed
			NOT = {
				has_country_flag = BOS_rebellion
			}
			BOS = {
				exists = no
			}
		}
		complete_effect = {
			add_political_power = -50
			add_command_power = -25
		}
		remove_effect = {
			custom_effect_tooltip = back_in_190_days
			BOS = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 5000
					producer = SER
				}
			}
		}
	}
}
GER_great_war = {
	SER_sue_for_peace_TUR = {
		name = sue_for_peace_TUR
		allowed = {
			original_tag = SER
		}
		available = {
			has_war_with = TUR
			surrender_progress > 0.50
			
			NOT = { 
			    is_in_faction_with = GER 
				has_war_together_with = GER
				is_in_faction_with = FRA 
				has_war_together_with = FRA
			}
		}
		visible = {	
			has_global_flag = kis_firstbalkan_war
			NOT = { 
			    is_in_faction_with = GER 
				has_war_together_with = GER
				is_in_faction_with = FRA 
				has_war_together_with = FRA
			}
			NOT = { 
				has_country_flag = BW1_winner 
				has_global_flag = kis_firstbalkanwar_victory
			}
			has_war_with = TUR	
		}
		fire_only_once = yes
		ai_will_do = {
			factor = 400
		}
		complete_effect = {
			set_global_flag = SER_surrender_in_balkan_war
			set_global_flag = TUR_is_winning_balkan_war
			SER = {
				leave_faction = yes
			}
			every_country = {
				limit = {
					has_war_with = SER
				}
				white_peace = SER
			}
			TUR = {
				puppet = SER
				set_autonomy = {
					target = SER
					autonomy_state = autonomy_integrated_puppet
				}
			}
				
		}
	}
}
balkan_league_category = {
	SER_invite_GRE = {
		allowed = {
			original_tag = SER
		}
		days_mission_timeout = 35
		activation = {
			always = no
		}
		timeout_effect = {
			custom_effect_tooltip = SER_balkan_league_greece_mission_tooltip
			if = {
				limit = {
					OR = {
						has_opinion = {
							target = GRE
							value > 30
						}
						GRE = {
							has_opinion = {
								target = SER
								value > 30
							}
						}
					}
				}
				set_country_flag = invited_to_balkan_league
				give_guarantee = GRE
				GRE = {
					give_guarantee = SER
				}
			}
		}
	}
	SER_invite_MNT = {
		allowed = {
			original_tag = SER
		}
		days_mission_timeout = 21
		activation = {
			always = no
		}
		timeout_effect = {
			custom_effect_tooltip = SER_balkan_league_montenegro_mission_tooltip
			if = {
				limit = {
					OR = {
						has_opinion = {
							target = MNT
							value > 20
						}
						GRE = {
							has_opinion = {
								target = MNT
								value > 20
							}
						}
					}
				}
				set_country_flag = invited_to_balkan_league
				give_guarantee = MNT
				MNT = {
					give_guarantee = SER
				}
			}
		}
	}
}

AUH_franzjoseph = {
	european_crisis_mission2 = {
		icon = GFX_decision_generic_ignite_civil_war
		name = european_crisis_mission2
		desc =  ww1_serbia.117.d
		allowed = {
			NOT = { tag = GAL }
		}
		
		available = {
			OR = {
				GAL = {
					is_subject_of = AUH
				}
				AUH = {
					has_war_with = GAL
				}
				has_global_flag = galician_crisis_ends
			}
		}

		visible = {
			OR = {
				is_in_faction_with = GER
				is_in_faction_with = FRA
				tag = SER
			}
		}
		
		activation = {
			has_global_flag = kis_franzJoseph_murdered
			NOT = { has_global_flag = galician_crisis_ends }
		}

		fire_only_once = yes		

		is_good = no
		days_mission_timeout = 25

		ai_will_do = {
			factor = 0
		}

		timeout_effect = {
			set_global_flag = galician_crisis_ends
			custom_effect_tooltip = galician_crisis_mission_tt
		}		

	}

}
crisis = {
	SER_impending_political_crisis = {
		allowed = {
			original_tag = SER
		}
		available = {
			NOT = {
				has_government = democratic
			}
		}
		days_mission_timeout = 60
		activation = {
			always = no
		}
		fire_only_once = yes
		is_good = no
		complete_effect = {
			country_event = {
				id = ww1_serbia.136
			}
		}
		timeout_effect = {
			start_civil_war = {
				ideology = democratic
				ruling_party = neutrality
				size = 0.8
			}
		}
	}
}

SER_laws = {
	SER_judicial_improvements = {
		allowed = {
			original_tag = SER
		}
		visible = {
			NOT = {
				has_country_flag = SER_judicial_improvements
			}
		}
		available = {
			
		}
		days_remove = 15
		remove_effect = {
			set_country_flag = SER_judicial_improvements
			add_popularity = {
				ideology = democratic
				popularity = 0.03
			}
			add_stability = 0.03
		}
		cost = 10
	}
	SER_press_improvements = {
		allowed = {
			original_tag = SER
		}
		visible = {
			NOT = {
				has_country_flag = SER_press_improvements
			}
		}
		available = {
		}
		days_remove = 15
		remove_effect = {
			set_country_flag = SER_press_improvements
			add_popularity = {
				ideology = democratic
				popularity = 0.05
			}
			add_stability = 0.03
		}
		cost = 60
	}
	SER_antiqity_law = {
		allowed = {
			original_tag = SER
		}
		days_remove = 15
		visible = {
			NOT = {
				has_country_flag = SER_antiqity_law
			}
		}
		available = {
		}
		remove_effect = {
			set_country_flag = SER_antiqity_law
			add_war_support = 0.05
		}
		cost = 10
	}
	SER_army_restoration_act = {
		allowed = {
			original_tag = SER
		}
		days_remove = 15
		visible = {
			NOT = {
				has_country_flag = SER_army_restoration_act
			}
		}
		available = {
		}
		remove_effect = {
			set_country_flag = SER_army_restoration_act
			army_experience = 25
			add_tech_bonus = {
				name = SER_army_restoration_act
				category = infantry_tech
				uses = 2
				bonus = 1
			}
		}
		cost = 60
	}
	SER_armement_grants = {
		allowed = {
			original_tag = SER
		}
		visible = {
			NOT = {
				has_country_flag = SER_armement_grants
			}
		}
		days_remove = 15
		available = {
		}
		remove_effect = {
			set_country_flag = SER_armement_grants
			add_equipment_to_stockpile = {
				type = infantry_equipment_1
				amount = 500
			}
		}
		cost = 10
	}
	SER_military_academy_law = {
		allowed = {
			original_tag = SER
		}
		visible = {
			NOT = {
				has_country_flag = SER_military_academy_law
			}
		}
		days_remove = 60
		available = {
		}
		remove_effect = {
			set_country_flag = SER_military_academy_law
			army_experience = 10
			add_tech_bonus = {
				name = SER_university_law
				category = air_equipment
				bonus = 1
				uses = 1
			}
			add_tech_bonus = {
				name = SER_university_law
				category = armor
				bonus = 1
				uses = 1
			}
		}
		cost = 25
	}
	SER_monetary_reform = {
		allowed = {
			original_tag = SER
		}
		visible = {
			NOT = {
				has_country_flag = SER_monetary_reform
			}
		}
		days_remove = 30
		available = {
		}
		remove_effect = {
			set_country_flag = SER_monetary_reform
			add_timed_idea = {
				idea = SER_idea_extended_taxation
				days = 780
			}
		}
		cost = 50
	}
	SER_reinforce_administration = {
		allowed = {
			original_tag = SER
		}
		visible = {
			NOT = {
				has_country_flag = SER_reinforce_administration
			}
		}
		days_remove = 120
		available = {
		}
		remove_effect = {
			set_country_flag = SER_reinforce_administration
			add_political_power = 100
		}
		cost = 10
	}
}

SER_royal_tour = {
	SER_visit_city = {
		allowed = {
			original_tag = SER
		}
		state_target = yes
		target_trigger = {
			FROM = {
				is_core_of = SER
				NOT = {
					has_state_flag = SER_royal_tour_done
				}
			}
		}
		available = {
			FROM = {
				is_owned_and_controlled_by = SER
			}
			NOT = {
				has_country_flag = SER_on_tour
			}
		}
		days_remove = 15
		complete_effect = {
			set_country_flag = SER_on_tour
		}
		remove_effect = {
			FROM = {
				set_state_flag = SER_royal_tour_done
			}
			clr_country_flag = SER_on_tour
			add_political_power = 25
			add_popularity = {
				ideology = neutrality
				popularity = 0.02
			}
		}
		cost = 10
	}
	SER_visit_friend = {
		allowed = {
			original_tag = SER
		}
		target_trigger = {
			
			FROM = {
				NOT = {
					has_country_flag = SER_royal_tour_done
				}
				FROM = {
					has_opinion = {
						target = SER
						value > 9
					}
					
				}
				capital_scope = {
					is_on_continent = europe
				}
				NOT = {
					has_idea = neutrality_idea
					has_idea = SWI_swiss_neutrality
				}
				NOT = {		## dont care about them
					tag = SWE
					tag = NOR
					tag = FIN
					tag = POR
					tag = SPR
				}
			}
		}
		available = {
			NOT = {
				has_country_flag = SER_royal_tour_done
			}
			NOT = {
				has_country_flag = SER_on_tour
			}
		}
		days_remove = 30
		complete_effect = {
			set_country_flag = SER_on_tour
		}
		remove_effect = {
			FROM = {
				set_country_flag = SER_royal_tour_done
			}
			FROM = {
				add_opinion_modifier = {
					target = SER
					modifier = medium_increase
				}
			}
			clr_country_flag = SER_on_tour
			add_war_support = 0.02
		}
		cost = 10
	}
}

SER_fighting_black_hand = {
	SER_clean_region_from_black_hand_influence = {
		allowed = {
			original_tag = SER
		}
		state_target = yes
		target_trigger = {
			FROM = {
				is_owned_and_controlled_by = SER
				is_core_of = SER
				NOT = {
					has_state_flag = SER_black_hand_beaten
				}
			}
		}
		icon = GFX_decision_generic_reorganize_irregulars
		available = {
			FROM = {
				is_owned_and_controlled_by = SER
				is_core_of = SER
			}
			FROM = {
				NOT = {
					has_state_flag = SER_black_hand_beaten
				}
			}
			NOT = {
				has_country_flag = SER_actualy_cleaning_region_from_black_hand
			}
			
		}
		days_remove = 60
		complete_effect = {
			set_country_flag = SER_actualy_cleaning_region_from_black_hand
		}
		remove_effect = {
			clr_country_flag = SER_actualy_cleaning_region_from_black_hand
			FROM = {
				set_state_flag = SER_black_hand_beaten
			}
			add_popularity = {
				ideology = fascism
				popularity = -0.02
			}
			FROM = {
				add_dynamic_modifier = {
					modifier = SER_local_loyalty_assured
				}
			}
		}
		cost = 50
	}
}

SER_fighting_radicals = {
	SER_spark_inner_divide_in_radical_rows = {
		allowed = {
			original_tag = SER
		}
		visible = {
			has_country_flag = SER_decisions_against_democracy
			NOT = {
				has_government = neutrality
			}
			NOT = {
				has_country_flag = SER_dismantle_radicals_lobbies
			}
		}
		available = {
			has_country_flag = SER_decisions_against_democracy
			NOT = {
				has_government = neutrality
			}
		}
		fire_only_once = yes
		days_remove = 60
		modifier = {
			democratic_drift = -0.10
		}
		cost = 50
		remove_effect = {
			set_country_flag = SER_dismantle_radicals_lobbies
		}
	}
	SER_spark_inner_divide_in_radical_rows = {
		allowed = {
			original_tag = SER
		}
		visible = {
			has_country_flag = SER_decisions_against_democracy
			NOT = {
				has_government = neutrality
			}
			NOT = {
				has_country_flag = SER_dismantle_radicals_lobbies
			}
		}
		available = {
			has_country_flag = SER_decisions_against_democracy
			NOT = {
				has_government = neutrality
			}
		}
		fire_only_once = yes
		days_remove = 60
		modifier = {
			democratic_drift = -0.20
		}
		cost = 50
		remove_effect = {
			set_country_flag = SER_dismantle_radicals_lobbies
		}
	}
	SER_undermine_radicals_figures = {
		allowed = {
			original_tag = SER
		}
		visible = {
			NOT = {
				has_country_flag = SER_undermine_radicals_figures
			}
			has_country_flag = SER_decisions_against_democracy
			NOT = {
				has_government = neutrality
			}
		}
		available = {
			has_country_flag = SER_decisions_against_democracy
			NOT = {
				has_government = neutrality
			}
		}
		fire_only_once = yes
		days_remove = 30
		modifier = {
			political_power_factor = -0.15
		}
		cost = 25
		remove_effect = {
			set_country_flag = SER_undermine_radicals_figures
			# retire_character = SER_vojislav_marinkovic
			retire_character = SER_milenko_radomar_vesnic
			# retire_character = SER_nikola_uzunovic
			add_popularity = {
				ideology = democratic
				popularity = -0.10
			}
		}
	}
	SER_king_speech_in_beograd = {
		allowed = {
			original_tag = SER
		}
		visible = {
			has_country_flag = SER_decisions_against_democracy
			NOT = {
				has_government = neutrality
			}
			NOT = {
				has_country_flag = SER_king_speech_in_beograd
			}
		}
		available = {
			has_country_flag = SER_decisions_against_democracy
			NOT = {
				has_government = neutrality
			}
		}
		fire_only_once = yes
		days_remove = 30
		cost = 50
		remove_effect = {
			set_country_flag = SER_king_speech_in_beograd
			add_popularity = {
				ideology = neutrality
				popularity = 0.10
			}
		}
	}
	SER_fund_srsd = {
		allowed = {
			original_tag = SER
		}
		visible = {
			has_country_flag = SER_decisions_against_democracy
			NOT = {
				has_government = neutrality
			}
			NOT = {
				has_country_flag = SER_fund_srsd
			}
		}
		available = {
			has_country_flag = SER_decisions_against_democracy
			NOT = {
				has_government = neutrality
			}
		}
		fire_only_once = yes
		days_remove = 30
		cost = 50
		remove_effect = {
			set_country_flag = SER_fund_srsd
			add_popularity = {
				ideology = neutrality
				popularity = 0.10
			}
		}
	}
}


