SWE_foreign_policy = {
	SWE_request_pact_for_colonies = {	# Entente
		allowed = {
			original_tag = SWE
		}
		visible = {
			has_country_flag = SWE_entente_diplomacy
			country_exists = FRA
		}
		available = {
			has_country_flag = SWE_entente_diplomacy
			is_subject = no
			FRA = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
				NOT = { has_country_flag = great_war_loser }
			}
			custom_trigger_tooltip = {
				tooltip = have_gotten_two_agreements_with_entente
				check_variable = { var = SWE_entente_points value = 4 }
			}
		}
		
		cost = 50
		fire_only_once = yes
		
		complete_effect = {
			custom_effect_tooltip = swe_flirting_allies_tt
			FRA = {
				country_event = { id = ww1_sweden.6 }
			}
		}
		
		ai_will_do = {
			base = 0
		}
	}
	SWE_request_pact_for_old_territories = {	# Germany
		allowed = {
			original_tag = SWE
		}
		visible = {
			has_country_flag = SWE_central_powers_diplomacy
			country_exists = GER
		}
		available = {
			has_country_flag = SWE_central_powers_diplomacy
			is_subject = no
			GER = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
				NOT = { has_country_flag = great_war_loser }
			}
			custom_trigger_tooltip = {
				tooltip = have_gotten_two_agreements_with_cp
				check_variable = { var = SWE_cp_points value = 4 }
			}
		}
		
		cost = 50
		fire_only_once = yes
		
		complete_effect = {
			custom_effect_tooltip = swe_flirting_germans_tt
			GER = {
				country_event = { id = ww1_sweden.9 }
			}
		}
		
		ai_will_do = {
			base = 0
		}
	}
	SWE_secure_entente_investments = {
		allowed = {
			original_tag = SWE
		}
		visible = {
			has_country_flag = SWE_entente_diplomacy
			country_exists = FRA
		}
		available = {
			has_country_flag = SWE_entente_diplomacy
			OR = {
				is_in_faction = no
				is_in_faction_with = FRA
			}
			OR = {
				is_subject = no
				is_subject_of = FRA
			}
			NOT = { has_war_with = FRA }
			NOT = {
				has_idea = idea_entente_investments
				has_idea = idea_cp_investments
				has_decision = SWE_secure_cp_investments
			}
		}
		
		cost = 75
		days_remove = 7
		days_re_enable = 35
		
		complete_effect = {
			FRA = {
				country_event = { id = ww_sverige_general.5 }
			}
			custom_effect_tooltip = agree_effect_tooltip
			effect_tooltip = {
				FRA = { add_political_power = 25 }
				add_ideas = idea_entente_investments
			}
			custom_effect_tooltip = disagree_effect_tooltip
			effect_tooltip = {
				add_political_power = 75
			}
		}
		
		ai_will_do = {
			base = 0
		}
	}
	SWE_secure_cp_investments = {
		allowed = {
			original_tag = SWE
		}
		visible = {
			has_country_flag = SWE_central_powers_diplomacy
			country_exists = GER
		}
		available = {
			has_country_flag = SWE_central_powers_diplomacy
			OR = {
				is_in_faction = no
				is_in_faction_with = GER
			}
			OR = {
				is_subject = no
				is_subject_of = GER
			}
			NOT = { has_war_with = GER }
			NOT = {
				has_idea = idea_entente_investments
				has_idea = idea_cp_investments
				has_decision = SWE_secure_entente_investments
			}
		}
		
		cost = 75
		days_remove = 7
		days_re_enable = 35
		
		complete_effect = {
			GER = {
				country_event = { id = ww_sverige_general.5 }
			}
			custom_effect_tooltip = agree_effect_tooltip
			effect_tooltip = {
				GER = { add_political_power = 25 }
				add_ideas = idea_cp_investments
			}
			custom_effect_tooltip = disagree_effect_tooltip
			effect_tooltip = {
				add_political_power = 75
			}
		}
		
		ai_will_do = {
			base = 0
		}
	}
	SWE_secure_french_military_advisors = {
		allowed = {
			original_tag = SWE
		}
		visible = {
			has_country_flag = SWE_entente_diplomacy
			country_exists = FRA
		}
		available = {
			has_country_flag = SWE_entente_diplomacy
			OR = {
				is_in_faction = no
				is_in_faction_with = FRA
			}
			OR = {
				is_subject = no
				is_subject_of = FRA
			}
			NOT = { has_war_with = FRA }
			NOT = {
				has_idea = french_advisors
				has_idea = SWE_german_advisors
				has_decision = SWE_secure_german_military_advisors
			}
		}
		
		cost = 75
		days_remove = 7
		days_re_enable = 35
		
		complete_effect = {
			FRA = {
				country_event = { id = ww_sverige_general.8 }
			}
			custom_effect_tooltip = agree_effect_tooltip
			effect_tooltip = {
				FRA = { add_political_power = 25 }
				add_ideas = french_advisors
				army_experience = 5
			}
			custom_effect_tooltip = disagree_effect_tooltip
			effect_tooltip = {
				add_political_power = 75
			}
		}
		
		ai_will_do = {
			base = 0
		}
	}
	SWE_secure_german_military_advisors = {
		allowed = {
			original_tag = SWE
		}
		visible = {
			has_country_flag = SWE_central_powers_diplomacy
			country_exists = GER
		}
		available = {
			has_country_flag = SWE_central_powers_diplomacy
			OR = {
				is_in_faction = no
				is_in_faction_with = GER
			}
			OR = {
				is_subject = no
				is_subject_of = GER
			}
			NOT = { has_war_with = GER }
			NOT = {
				has_idea = french_advisors
				has_idea = SWE_german_advisors
				has_decision = SWE_secure_french_military_advisors
			}
		}
		
		cost = 75
		days_remove = 7
		days_re_enable = 35
		
		complete_effect = {
			GER = {
				country_event = { id = ww_sverige_general.8 }
			}
			custom_effect_tooltip = agree_effect_tooltip
			effect_tooltip = {
				GER = { add_political_power = 25 }
				add_ideas = SWE_german_advisors
				army_experience = 5
			}
			custom_effect_tooltip = disagree_effect_tooltip
			effect_tooltip = {
				add_political_power = 75
			}
		}
		
		ai_will_do = {
			base = 0
		}
	}
	SWE_implement_temporary_entente_sanctions = {
		allowed = {
			original_tag = SWE
		}
		visible = {
			NOT = { has_opinion_modifier = SWE_temporary_trade_restrictions }
			has_country_flag = SWE_central_powers_diplomacy
			country_exists = FRA
		}
		available = {
			has_country_flag = SWE_central_powers_diplomacy
			has_war = no
			NOT = {
				is_in_faction_with = FRA
			}
			NOT = {
				is_subject_of = FRA
			}
		}
		
		cost = 50
		fire_only_once = yes
		
		complete_effect = {
			every_other_country = {
				limit = {
					OR = {
						original_tag = FRA
						is_in_faction_with = FRA
					}
				}
				display_individual_scopes = yes
				reverse_add_opinion_modifier = {
					target = SWE
					modifier = SWE_temporary_trade_restrictions
				}
			}
			SWE_increase_cp_point_amount = yes
		}
		
		ai_will_do = {
			base = 0
		}
	}
	SWE_implement_temporary_central_powers_sanctions = {
		allowed = {
			original_tag = SWE
		}
		visible = {
			NOT = { has_opinion_modifier = SWE_temporary_trade_restrictions }
			has_country_flag = SWE_entente_diplomacy
			country_exists = GER
		}
		available = {
			has_country_flag = SWE_entente_diplomacy
			has_war = no
			NOT = {
				is_in_faction_with = GER
			}
			NOT = {
				is_subject_of = GER
			}
		}
		
		cost = 50
		fire_only_once = yes
		
		complete_effect = {
			every_other_country = {
				limit = {
					OR = {
						original_tag = GER
						is_in_faction_with = GER
					}
				}
				display_individual_scopes = yes
				reverse_add_opinion_modifier = {
					target = SWE
					modifier = SWE_temporary_trade_restrictions
				}
			}
			SWE_increase_entente_point_amount = yes
		}
		
		ai_will_do = {
			base = 0
		}
	}
}
foreign_politics = {
	SWE_secure_entente_trade_agreements = {
		allowed = {
			original_tag = SWE
		}
		visible = {
			has_idea = SWE_hungerskjold
			country_exists = ENG
			NOT = { has_idea = SWE_entente_trade_agreement }
		}
		available = {
			has_country_flag = SWE_entente_diplomacy
			OR = {
				is_in_faction = no
				is_in_faction_with = ENG
			}
			OR = {
				is_subject = no
				is_subject_of = ENG
			}
			NOT = { has_war_with = ENG }
			NOT = {
				has_country_leader_with_trait = germanophile
				has_country_leader = {
					character = SWE_hjalmar_hammarskjold
					ruling_only = yes
				}
			}
		}
		cancel_trigger = {
			hidden_trigger = {
				OR = {
					NOT = { has_idea = SWE_hungerskjold }
					ENG = {
						OR = {
							is_subject = yes
							has_country_flag = great_war_loser
							has_war_with = ROOT
						}
					}
					NOT = {
						country_exists = ENG
					}
				}
			}
		}
		cost = 50
		
		days_re_enable = 7
		
		complete_effect = {
			ENG = {
				country_event = { id = ww_sverige.104 }
			}
			custom_effect_tooltip = agree_effect_tooltip
			effect_tooltip = {
				add_political_power = -50
				add_stability = 0.10
				add_ideas = SWE_entente_trade_agreement
			}
			custom_effect_tooltip = disagree_effect_tooltip
			effect_tooltip = {
				add_political_power = -25
				add_stability = 0.025
			}
		}
		
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				has_country_flag = pact_with_germany
				NOT = { has_country_flag = pact_with_france }
			}
			modifier = {
				factor = 0
				date < 1914.6.1
				NOT = { has_country_flag = pact_with_france }
			}
			modifier = {
				factor = 0
				has_stability > 0.5
			}
		}
	}
	SWE_secure_central_powers_trade_agreements = {
		allowed = {
			original_tag = SWE
		}
		visible = {
			has_idea = SWE_hungerskjold
			country_exists = GER
			NOT = { has_idea = SWE_cp_trade_agreement }
		}
		available = {
			has_country_flag = SWE_central_powers_diplomacy
			OR = {
				is_in_faction = no
				is_in_faction_with = GER
			}
			OR = {
				is_subject = no
				is_subject_of = GER
			}
			NOT = { has_war_with = GER }
		}
		cancel_trigger = {
			hidden_trigger = {
				OR = {
					NOT = { has_idea = SWE_hungerskjold }
					GER = {
						OR = {
							is_subject = yes
							has_country_flag = great_war_loser
							has_war_with = ROOT
						}
					}
					NOT = {
						country_exists = GER
					}
				}
			}
		}
		cost = 50
		
		days_re_enable = 7
		
		complete_effect = {
			GER = {
				country_event = { id = ww_sverige.104 }
			}
			custom_effect_tooltip = agree_effect_tooltip
			effect_tooltip = {
				add_political_power = -50
				add_stability = 0.10
				add_ideas = SWE_cp_trade_agreement
			}
			custom_effect_tooltip = disagree_effect_tooltip
			effect_tooltip = {
				add_political_power = -25
				add_stability = 0.025
			}
		}
		
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				has_country_flag = pact_with_france
				NOT = { has_country_flag = pact_with_germany }
			}
			modifier = {
				factor = 0
				date < 1914.6.1
				NOT = { has_country_flag = pact_with_germany }
			}
			modifier = {
				factor = 0
				has_stability > 0.5
			}
		}
	}
	SWE_sponsor_socialists_in_from = {
		allowed = {
			always = no
		}
		visible = {
			country_exists = FROM
			has_government = communism
		}
		available = {
			has_war = no
			NOT = { has_war_with = FROM }
			FROM = {
				has_civil_war = no
				communism < 0.5
				NOT = { has_idea = communism_banned }
				NOT = { has_decision = ban_communist_party }
			}
		}
		cancel_trigger = {
			hidden_trigger = {
				NOT = {
					country_exists = FROM
				}
			}
		}
		cost = 50
		
		days_remove = 100
		days_re_enable = 7
		
		modifier = { political_power_gain = -0.2 }
		
		complete_effect = {
			FROM = {
				add_timed_idea = {
					idea = SWE_socialists_sponsorship
					days = 120
				}
				# Add event that let's target country increase their drift defence temporarily
					# If they are not democratic/socialist add option to ban socialist organisations
						# If they do, Sweden can embargo in return (no wargoal, we peaceful)
			}
		}
		
		ai_will_do = {
			base = 0.1
			modifier = {
				factor = 10
				FROM = { communism > 0.15 }
			}
			modifier = {
				factor = 0
				has_political_power < 120
			}
		}
	}
	SWE_justify_intervention_in_from = {
		allowed = {
			always = no
		}
		visible = {
			country_exists = FROM
			has_government = communism
			NOT = { has_country_flag = great_war_loser }	# You lost, you cannot do it now
		}
		available = {
			is_subject = no
			NOT = { has_war_with = FROM }
			FROM = {
				has_civil_war = no
			}
			NOT = { is_ally_with = FROM }
			NOT = { has_country_flag = swe_intervention_in_other_country }
			NOT = {
				has_idea = idea_army_restrictions
				has_idea = idea_armistice
			}
			NOT = { has_country_flag = great_war_loser }
		}
		
		cost = 25
		
		days_remove = 50
		fire_only_once = yes
		
		war_with_target_on_remove = yes
		
		complete_effect = {
			set_country_flag = {
				flag = swe_intervention_in_other_country
				days = 50
				value = 1
			}
		}
		
		remove_effect = {
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
		
		ai_will_do = {
			base = 0
			modifier = {	# We've allies
				add = 0.25
				is_in_faction = yes
			}
			modifier = {
				add = 0.25
				strength_ratio = {
					tag = FROM
					ratio > 1.0
				}
			}
			modifier = {
				add = 0.25
				strength_ratio = {
					tag = FROM
					ratio > 1.5
				}
			}
			modifier = {
				add = 0.5
				strength_ratio = {
					tag = FROM
					ratio > 2.0
				}
			}
			modifier = {
				add = 0.25
				strength_ratio = {
					tag = FROM
					ratio > 1.5
				}
			}
			modifier = {
				factor = 0.5
				has_manpower < 5000
			}
			modifier = {
				factor = 0.1
				is_in_faction = no
				FROM = { is_in_faction = yes }
			}
			modifier = {
				factor = 2
				FROM = { surrender_progress > 0.1 }
			}
			modifier = {
				factor = 0
				OR = {
					has_war = yes
					num_divisions < 20
				}
			}
		}
	}
}
operations = {
	SWE_intervention_in_finland = {
		priority = 100
		icon = generic_civil_support
		
		allowed = {
			always = no
		}
		available = {
			FIN = {
				has_civil_war = no
			}
		}
		visible = {
			original_tag = SWE
		}
		
		fire_only_once = yes
		
		is_good = yes
		
		days_mission_timeout = 120
		
		timeout_effect = {
			# If Sweden is communist:
				# Germany will threaten intervention (if they won war)
				# UK will pressure to end war (if they won war)
				# You can chose to back down and thus pull out all troops from Finland
				# Or not and sanctions/invasion will occur from Germany/UK
					# UK can try and pull in Russia if they aren't communist
			# If Sweden is not:
				# Protests about the war will occur and instead an armistice will occur between the countries
				# Sweden will be forced to pull out their soldiers due to public backlash
		}
		
		complete_effect = {
			custom_effect_tooltip = will_allow_follow_up_event_with_finland_tt
			if = {
				limit = {
					any_other_country = {
						exists = yes
						original_tag = FIN
						NOT = { has_country_flag = supported_by_swe }
					}
				}
				# Peace time
			}
			else = {
				country_event = { id = ww_sverige_general.13 }
			}
		}
	}
	# Should be unlocked through event about outbreak of civil war
		# You get choice:
			# To directly intervene (but you have to be quick to avoid international backlash)
			# Aid civilians (will allow you too safey transport people out of country through specific places)
	SWE_occupation_of_aland = {
		allowed = {
			original_tag = SWE
		}
		
		available = {
			has_war = no
			NOT = {
				has_government = communism
			}
			OR = {
				has_global_flag = finnish_civil_war
				FIN = { has_civil_war = yes }
			}
			NOT = {
				has_idea = idea_army_restrictions
				has_idea = idea_armistice
			}
			NOT = { has_country_flag = great_war_loser }
		}
		
		fire_only_once = yes
		
		visible = {
			FIN = {
				exists = yes
				has_civil_war = yes
			}
			any_other_country = {
				original_tag = FIN
				NOT = { is_subject_of = ROOT }
				owns_state = 145
			}
			NOT = { has_country_flag = great_war_loser }
		}
		
		custom_cost_trigger = {
			command_power > 49
			navy_experience > 24
		}
		custom_cost_text = decision_cost_CP_50_navy_25
		
		days_remove = 14
		
		complete_effect = {
			hidden_effect = {
				add_command_power = -50
				add_navy_experience = -25
			}
		}
		remove_effect = {
			transfer_state = 145
			set_country_flag = SWE_aland
			add_named_threat = {
				name = SWE_aland
				threat = 1
			}
		}
		
		ai_will_do = {
			base = 0
		}
	}
	SWE_intervene_in_finnish_civil_war = {
		allowed = {
			always = no
		}
		
		available = {
			has_civil_war = no
			has_war_support > 0.7
			FIN = { is_neighbor_of = ROOT }
			NOT = {
				has_idea = idea_army_restrictions
				has_idea = idea_armistice
			}
			NOT = { has_country_flag = great_war_loser }
		}
		
		fire_only_once = yes
		
		visible = {
			FIN = {
				exists = yes
			}
			OR = {
				has_global_flag = finnish_civil_war
				FIN = { has_civil_war = yes }
			}
			OR = {
				NOT = { has_government = communism }
				any_other_country = {
					original_tag = FIN
					has_government = communism
				}
			}
			NOT = { has_country_flag = great_war_loser }
		}
		
		custom_cost_trigger = {
			command_power > 49
			has_political_power > 49
		}
		custom_cost_text = decision_cost_CP_50_pp_50
		
		days_remove = 21
		war_with_target_on_remove = yes
		
		complete_effect = {
			hidden_effect = {
				add_command_power = -50
				add_political_power = -50
				random_other_country = {
					limit = {
						NOT = { tag = FROM }
						original_tag = FIN
					}
					save_event_target_as = finland_friend_of_sweden
					set_country_flag = supported_by_swe
				}
			}
		}
		remove_effect = {
			hidden_effect = {
				random_other_country = {
					limit = {
						NOT = { tag = FROM }
						original_tag = FIN
					}
					save_event_target_as = finland_friend_of_sweden
					set_country_flag = supported_by_swe
				}
			}
			add_threat = 1
			add_to_war = {
				targeted_alliance = event_target:finland_friend_of_sweden
				enemy = FROM
				hostility_reason = asked_to_join
			}
			# Socialist side if socialist
			# Otherwise non-socialist side
			custom_effect_tooltip = failure_to_assist_with_civil_war_in_timely_manner_may_spark_international_backlash
			activate_mission = SWE_intervention_in_finland
		}
		
		ai_will_do = {
			base = 1
			modifier = {
				factor = 0
				has_war = no
			}
		}
	}
}